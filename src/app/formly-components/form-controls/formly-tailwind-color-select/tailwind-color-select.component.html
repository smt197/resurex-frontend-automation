<mat-form-field appearance="outline" class="w-full">
    <mat-label>{{ to.label }}</mat-label>

    <mat-select [formControl]="formControl" (openedChange)="onOpenedChange($event)">
        <!-- Personnalisation de l'affichage quand une valeur est sélectionnée -->
        <mat-select-trigger>
            <div class="flex items-center gap-2">
                <span class="w-5 h-5 rounded" [style.background]="formControl.value"></span>
                <span>{{ getSelectedColorName(formControl.value) }}</span>
            </div>
        </mat-select-trigger>
        <!-- Champ de recherche sans bordure -->
        <div class="p-2" (click)="$event.stopPropagation()" (mousedown)="$event.stopPropagation()">
            <input type="text" placeholder="Rechercher une couleur..." [formControl]="searchControl"
                class="w-full focus:outline-none border-none p-1" (click)="$event.stopPropagation()"
                (mousedown)="$event.stopPropagation()">
        </div>

        <!-- Options avec couleur -->
        <mat-option *ngFor="let color of filteredColors" [value]="color.value">
            <div class="flex items-center gap-2">
                <span class="w-5 h-5 rounded" [style.background]="color.value"></span>
                {{ color.name }} ({{ color.shade }})
            </div>
        </mat-option>
    </mat-select>

    <mat-error *ngIf="showError">
        {{ showErrorMessage }}
    </mat-error>
</mat-form-field>