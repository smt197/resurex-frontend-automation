<!-- On utilise mat-expansion-panel comme conteneur principal -->
<mat-expansion-panel 
  [expanded]="showComponent"
  (opened)="showComponent = true" 
  (closed)="onPanelClosed()"
  class="bg-white rounded-lg shadow-sm hover:shadow-none border border-transparent hover:border-primary-500 transition-all duration-300 ease-in-out overflow-hidden border-2 hover:border-2 my-6 p-2">

  <!-- L'en-tête est maintenant un vrai mat-expansion-panel-header, garantissant un style et un comportement parfaits -->
  <mat-expansion-panel-header class="px-2 py-2 sm:px-10 sm:py-8 hover:bg-gray-50 transition-colors duration-200">
    <div class="flex flex-wrap items-center w-full min-w-0">
      <!-- Icône et titre/description (identique à show-dynamic-card) -->
      <div class="flex gap-4 sm:gap-6 flex-grow">
        <mat-icon class="icon-lg text-primary-600 flex-shrink-0">{{ icon }}</mat-icon>
        <div class="flex flex-col min-w-0">
          <h2 class="title m-0 text-lg font-semibold text-gray-700 truncate">
            {{ title }}
          </h2>
          <p class="text-gray-600 text-sm mt-2 mb-0 truncate" *ngIf="description">
            {{ description }}
          </p>
        </div>
      </div>

      <!-- Contrôles à droite (identique à show-dynamic-card) -->
      <div class="flex items-center ml-auto flex-shrink-0">
        <!-- Utilisation de la traduction pour "Voir plus" / "Voir moins" pour une cohérence parfaite -->
        <span class="text-sm text-gray-500 mr-3">
          {{ (showComponent ? "global.expansion.Unfolded" : "global.expansion.Folded") | translate }}
        </span>
        <mat-icon 
          class="transition-transform duration-200 transform -rotate-90 text-gray-600"
          [class.rotate-0]="showComponent">
          expand_more
        </mat-icon>
      </div>
    </div>
  </mat-expansion-panel-header>

  <!-- Le contenu est affiché/masqué par le panneau lui-même -->
  <div class="w-full px-10 py-6">
    <ng-container *ngComponentOutlet="component"></ng-container>
  </div>

</mat-expansion-panel>