{"version":3,"file":"src_app_auth_login_login_component_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMuB;AACyC;AACP;AAEP;AAC2B;AACd;AACR;AACM;AACF;AACF;AACS;AACI;AACQ;AACX;AACC;AACF;AACM;AACH;AACT;AACW;AACH;AAEL;AAEgC;AACG;AACtC;AAC3B;;;;;;;ICzBrB8B,4DAAA,cAAsF;IACpFA,uDAAA,cAAiD;IACnDA,0DAAA,EAAM;;;;IADcA,uDAAA,EAAiB;IAAjBA,wDAAA,QAAAM,YAAA,EAAAN,2DAAA,CAAiB;;;;;;IA+BnCA,qEAAA,GAAiD;IAC/CA,4DAAA,iBACoB;IADZA,wDAAA,mBAAAU,8FAAA;MAAAV,2DAAA,CAAAY,GAAA;MAAA,MAAAC,MAAA,GAAAb,2DAAA;MAAA,OAASA,yDAAA,CAAAa,MAAA,CAAAG,IAAA,EAAM;IAAA,EAAC;IAEtBhB,4DAAA,eAAiC;IAAAA,oDAAA,cAAO;IAAAA,0DAAA,EAAO;IAEnDA,mEAAA,EAAe;;;;IAJYA,uDAAA,EAAmC;IAAnCA,wDAAA,aAAAmB,MAAA,CAAAC,cAAA,CAAAC,OAAA,CAAmC;;;;;IAM5DrB,uDAAA,0BAA2C;;;;;IAtBjDA,qEAAA,GAAgC;IAE9BA,4DAAA,cAA8B;IACwCA,oDAAA,cAAO;IAAAA,0DAAA,EAAK;IAChFA,4DAAA,aAAuF;IACrFA,oDAAA,6CACF;IAAAA,0DAAA,EAAK;IAIPA,4DAAA,cAAiC;IAE7BA,uDAAA,sBAA+F;IACjGA,0DAAA,EAAM;IAENA,wDAAA,IAAAuB,qEAAA,2BAKe,KAAAC,qEAAA,iCAAAxB,oEAAA;IAIjBA,0DAAA,EAAM;IACRA,mEAAA,EAAe;;;;;IAbIA,uDAAA,GAAuB;IAAvBA,wDAAA,SAAA0B,MAAA,CAAAN,cAAA,CAAuB,WAAAM,MAAA,CAAAC,WAAA,WAAAD,MAAA,CAAAE,UAAA;IAGvB5B,uDAAA,EAAoB;IAApBA,wDAAA,UAAA0B,MAAA,CAAAG,SAAA,GAAoB,aAAAC,GAAA;;;;;IAzCjD9B,qEAAA,GAAqC;IACnCA,4DAAA,aAAoF;IAQ1EA,wDAAA,IAAA+B,4CAAA,iBAEM;;IACR/B,0DAAA,EAAM;IACNA,4DAAA,aAAwC;IAEpCA,oDAAA,IAEF;;IAAAA,0DAAA,EAAK;IACLA,4DAAA,aAAwF;IACtFA,oDAAA,IACF;;IAAAA,0DAAA,EAAI;IAKRA,4DAAA,eAAwE;IACtEA,wDAAA,KAAAgC,sDAAA,2BAyBe;IACjBhC,0DAAA,EAAM;IAIdA,mEAAA,EAAe;;;;IAtDNA,uDAAA,GAAS;IAATA,wDAAA,cAAAiC,SAAA,CAAS;IAOiCjC,uDAAA,GAAiC;IAAjCA,wDAAA,SAAAA,yDAAA,OAAAmC,MAAA,CAAAC,WAAA,CAAAC,MAAA,EAAiC;IAMtErC,uDAAA,GAEF;IAFEA,gEAAA,MAAAA,yDAAA,QAAAmC,MAAA,CAAAC,WAAA,CAAAG,cAAA,OAEF;IAEEvC,uDAAA,GACF;IADEA,gEAAA,MAAAA,yDAAA,QAAAmC,MAAA,CAAAC,WAAA,CAAAI,iBAAA,OACF;IAMaxC,uDAAA,GAAe;IAAfA,wDAAA,UAAAmC,MAAA,CAAAM,MAAA,GAAe;;;ADuClC,MAAOC,cAAc;EA7B3BC,YAAA;IA8BE;IACiB,KAAAC,MAAM,GAAG1E,qDAAM,CAACI,oDAAM,CAAC;IACvB,KAAAuE,QAAQ,GAAG3E,qDAAM,CAACO,qEAAW,CAAC;IAC9B,KAAAqE,eAAe,GAAG5E,qDAAM,CAACwB,8EAAe,CAAC;IAC1C,KAAA0C,WAAW,GAAGlE,qDAAM,CAACsB,sEAAW,CAAC;IAChC,KAAAuD,gBAAgB,GAAG7E,qDAAM,CAACuB,iFAAgB,CAAC;IAE5D;IACS,KAAAuD,SAAS,GAAG7E,qDAAM,CAAS,UAAU,CAAC;IACtC,KAAA8E,OAAO,GAAG9E,qDAAM,CAAU,KAAK,CAAC;IAChC,KAAA0D,SAAS,GAAG1D,qDAAM,CAAU,KAAK,CAAC;IAClC,KAAA+E,SAAS,GAAG/E,qDAAM,CAAU,KAAK,CAAC;IAClC,KAAAgF,YAAY,GAAGhF,qDAAM,CAAW,EAAE,CAAC;IACnC,KAAAsE,MAAM,GAAGtE,qDAAM,CAAU,KAAK,CAAC;IAC/B,KAAAiF,WAAW,GAAGjF,qDAAM,CAAU,KAAK,CAAC;IACpC,KAAAkF,WAAW,GAAGlF,qDAAM,CAAqB,EAAE,CAAC;IAErD,KAAAmF,QAAQ,GAAmB,IAAI;IAC/B,KAAAC,YAAY,GAAY,KAAK;IAE7B;IACA,KAAAnC,cAAc,GAAG,IAAIhD,sDAAS,CAAC,EAAE,CAAC;IAClC,KAAAwD,UAAU,GAAyB;MACjC4B,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAE;KACd;IAED,KAAA/B,WAAW,GAAwB,EAAE;;EAErCgC,QAAQA,CAAA;IACN,IAAI,CAACC,cAAc,EAAE;IACrB,IAAI,CAACC,iBAAiB,EAAE;EAC1B;EAEAA,iBAAiBA,CAAA;IACf;IACE,IAAI,CAACN,YAAY,GAAG,IAAI,CAACX,MAAM,CAACkB,GAAG,CAACC,QAAQ,CAAC,cAAc,CAAC;IAC9DC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACV,YAAY,CAAC;IAE9B,IAAI,CAAC5B,WAAW,GAAGhC,yEAAoB,CAACuE,GAAG,CAAEC,KAAK,IAAI;MACpD,IAAI,IAAI,CAACZ,YAAY,IAAIY,KAAK,CAACC,mBAAmB,EAAE;QAClD,MAAMC,QAAQ,GAAG;UAAE,GAAGF;QAAK,CAAE;QAC7B,IAAIE,QAAQ,CAACC,UAAU,EAAE;UACvBD,QAAQ,CAACC,UAAU,GAAGD,QAAQ,CAACC,UAAU,CAACC,MAAM,CAC7CC,UAAU,IAAKA,UAAU,CAACC,GAAG,KAAK,mBAAmB,CACvD;;QAEH,OAAOJ,QAAQ;;MAEjB,OAAOF,KAAK;IACd,CAAC,CAAC;EACJ;EAEAO,QAAQA,CAAA;IACN,OAAO,IAAI,CAAC9C,UAAU,CAAC4B,KAAK;EAC9B;EAEQI,cAAcA,CAAA;IACpB,IAAI,CAACN,QAAQ,GAAG,IAAI,CAACR,eAAe,CAAC6B,OAAO;EAC9C;EAEA3D,IAAIA,CAAA;IACF,IAAI,CAACa,SAAS,CAAC+C,GAAG,CAAC,IAAI,CAAC;IAExB;IACA,IAAI,IAAI,CAACrB,YAAY,EAAE;MACrB,IAAI,CAACsB,kBAAkB,EAAE;MACzB;;IAGF;IACA,IAAI,CAACzC,WAAW,CAAC0C,KAAK,CAAC,IAAI,CAAClD,UAAU,CAAC,CAACmD,SAAS,CAAC;MAChDC,IAAI,EAAGC,QAAQ,IAAI;QACjB,IAAI,CAACC,WAAW,CAACD,QAAQ,CAACE,OAAO,CAAC;QAElC,IAAIF,QAAQ,CAACG,YAAY,EAAE;UACzB,IAAI,CAACxC,MAAM,CAACyC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC;SAC9B,MAAM;UACL;UACA,IAAI,CAACvC,eAAe,CAACwC,WAAW,EAAE,CAACP,SAAS,CAAC;YAC3CC,IAAI,EAAG1B,QAAQ,IAAI;cACjB,IAAI,CAACR,eAAe,CAAC6B,OAAO,GAAGrB,QAAQ;cACvC,IAAI,CAACiC,kBAAkB,EAAE;YAC3B,CAAC;YACDC,KAAK,EAAEA,CAAA,KAAK;cACV;cACA,IAAI,CAAC5C,MAAM,CAACyC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAACI,IAAI,CAAC,MAAK;gBACxCC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;cAC1B,CAAC,CAAC;YACJ;WACD,CAAC;;MAEN,CAAC;MACDJ,KAAK,EAAGA,KAAwB,IAAI;QAClC,IAAI,CAAC3D,SAAS,CAAC+C,GAAG,CAAC,KAAK,CAAC;QACzB,IAAI,CAACM,WAAW,CAACM,KAAK,CAACA,KAAK,CAACL,OAAO,CAAC;QACrC,IAAI,CAAC9B,WAAW,CAACuB,GAAG,CAACY,KAAK,CAACA,KAAK,CAACL,OAAO,CAAC;QACzCnB,OAAO,CAACwB,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAACA,KAAK,CAAC;QAElD,IAAIA,KAAK,CAACA,KAAK,CAACK,cAAc,KAAK5D,SAAS,EAAE;UAC5C,IAAI,CAACmB,WAAW,CAACwB,GAAG,CAAC,IAAI,CAAC;UAC1B,IAAI,CAACnC,MAAM,CAACmC,GAAG,CAAC,IAAI,CAAC;;MAEzB;KACD,CAAC;EACJ;EAEAW,kBAAkBA,CAAA;IAChB,IAAI,CAAC1D,SAAS,CAAC+C,GAAG,CAAC,IAAI,CAAC;IACxB,IAAI,CAAChC,MAAM,CAACyC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;EACjC;EAEQR,kBAAkBA,CAAA;IACxB;IACA,IAAI,CAAC9B,gBAAgB,CAClB+C,YAAY,EAAE,CACdC,IAAI,CAAChG,gDAAS,CAAC,MAAM,IAAI,CAACgD,gBAAgB,CAAC+B,KAAK,CAAC,IAAI,CAAClD,UAAU,CAAC,CAAC,CAAC,CACnEmD,SAAS,CAAC;MACTC,IAAI,EAAGC,QAAQ,IAAI;QACjB,IAAI,CAACpD,SAAS,CAAC+C,GAAG,CAAC,KAAK,CAAC;QACzB,IAAI,CAAC/B,QAAQ,CAACmD,IAAI,CAACf,QAAQ,CAACE,OAAO,EAAE,QAAQ,EAAE;UAAEc,QAAQ,EAAE;QAAI,CAAE,CAAC;QAClE,IAAI,CAACV,kBAAkB,EAAE;MAC3B,CAAC;MACDC,KAAK,EAAGA,KAAwB,IAAI;QAClC,IAAI,CAAC3D,SAAS,CAAC+C,GAAG,CAAC,KAAK,CAAC;QACzB,IAAI,CAAC/B,QAAQ,CAACmD,IAAI,CAChBR,KAAK,CAACA,KAAK,CAACL,OAAO,IAAI,qBAAqB,EAC5C,QAAQ,EACR;UAAEc,QAAQ,EAAE;QAAI,CAAE,CACnB;MACH;KACD,CAAC;EACN;EAEAC,OAAOA,CAAA;IACL,IAAI,CAACrE,SAAS,CAAC+C,GAAG,CAAC,KAAK,CAAC;IACzB,IAAI,CAACnC,MAAM,CAACmC,GAAG,CAAC,KAAK,CAAC;IACtB,IAAI,CAACxB,WAAW,CAACwB,GAAG,CAAC,KAAK,CAAC;IAC3B,IAAI,CAAChD,UAAU,GAAG;MAChB4B,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAE;KACd;IAED,IAAI,CAACd,MAAM,CAACyC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EAClC;EAEAc,MAAMA,CAAA;IACJ,IAAI,CAACtE,SAAS,CAAC+C,GAAG,CAAC,IAAI,CAAC;IACxB,IAAI,CAACxB,WAAW,CAACwB,GAAG,CAAC,KAAK,CAAC;IAE3B,IAAI,CAACxC,WAAW,CAACgE,yBAAyB,CAAC,IAAI,CAACxE,UAAU,CAAC,CAACmD,SAAS,CAAC;MACpEC,IAAI,EAAGC,QAAQ,IAAI;QACjB,IAAI,CAACC,WAAW,CAACD,QAAQ,CAACE,OAAO,CAAC;QAClC,IAAI,CAAC9B,WAAW,CAACuB,GAAG,CAACK,QAAQ,CAACE,OAAO,CAAC;MACxC,CAAC;MACDK,KAAK,EAAGA,KAAwB,IAAI;QAClC,IAAI,CAACN,WAAW,CAACM,KAAK,CAACA,KAAK,CAACL,OAAO,CAAC;QACrCnB,OAAO,CAACwB,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAACA,KAAK,CAAC;MACzD;KACD,CAAC;EACJ;EAEAa,gBAAgBA,CAAA;IACd,MAAMC,cAAc,GAAG,IAAI,CAACrD,OAAO,EAAE;IACrC,IAAI,CAACA,OAAO,CAAC2B,GAAG,CAAC,CAAC0B,cAAc,CAAC;IACjC,IAAI,CAACtD,SAAS,CAAC4B,GAAG,CAAC0B,cAAc,GAAG,UAAU,GAAG,MAAM,CAAC;EAC1D;EAEQpB,WAAWA,CAACqB,MAA0B;IAC5C,IAAIA,MAAM,EAAE;MACV,IAAI,CAAC1D,QAAQ,CAACmD,IAAI,CAACO,MAAM,EAAE,QAAQ,EAAE;QAAEN,QAAQ,EAAE;MAAK,CAAE,CAAC;;EAE7D;;;uBA/KWvD,cAAc;IAAA;EAAA;;;YAAdA,cAAc;MAAA8D,SAAA;MAAAC,UAAA;MAAAC,QAAA,GAAA1G,iEAAA;MAAA4G,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,wBAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UCjE3BjH,wDAAA,IAAAmH,sCAAA,4BAwDe;UAEfnH,uDAAA,gCAEyB;;;UA5DVA,wDAAA,UAAAkH,GAAA,CAAA9D,WAAA,GAAoB;UA0DXpD,uDAAA,EAA6B;UAA7BA,wDAAA,gBAAAkH,GAAA,CAAA7D,WAAA,GAA6B,UAAA6D,GAAA,CAAAxC,QAAA,mBAAAwC,GAAA,CAAA9D,WAAA,iBAAA8D,GAAA,CAAAhE,SAAA,cAAAgE,GAAA,CAAAzE,MAAA;;;qBDdjDpE,gEAAmB,EACnBW,6EAAkB,EAClBD,oEAAc,EACdP,kDAAI,EACJM,sEAAe,EAAAsI,gEAAA,EACfvI,wEAAgB,EAChBD,kEAAa,EACbD,0EAAiB,EACjBD,2EAAiB,EACjBO,iFAAoB,EACpBC,yFAAwB,EACxBC,2DAAY,EAAAmI,yDAAA,EACZjI,6EAAoB,EACpBC,mFAAuB,EACvBF,+EAAqB,EACrBQ,uGAAyB,EACzBC,0GAAuB,EACvBtB,uDAAS,EACTuB,sEAAY,EAAA0H,4EAAA;MAAAE,MAAA;MAAAC,IAAA;QAAAC,SAAA,EArBF,CAACrI,+EAAa;MAAC;MAAAsI,eAAA;IAAA;EAAA","sources":["./src/app/auth/login/login.component.ts","./src/app/auth/login/login.component.html"],"sourcesContent":["import {\n  ChangeDetectionStrategy,\n  Component,\n  inject,\n  OnInit,\n  signal\n} from '@angular/core';\nimport { FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { AsyncPipe, NgIf } from '@angular/common';\nimport { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { FormlyModule, FormlyFieldConfig } from '@ngx-formly/core';\nimport { FormlyMatToggleModule } from '@ngx-formly/material/toggle';\nimport { FormlyMatInputModule } from '@ngx-formly/material/input';\nimport { FormlyMatCheckboxModule } from '@ngx-formly/material/checkbox';\nimport { fadeInUp400ms } from '@vex/animations/fade-in-up.animation';\nimport { AuthService } from 'src/app/services/auth-service';\nimport { AdminAuthService } from 'src/app/services/admin-auth.service';\nimport { SettingsService } from 'src/app/services/settings.service';\nimport { credentialsFormLogin } from 'src/app/interfaces/Credentials-form-login';\nimport { loginFormForlyFields } from 'src/app/interfaces/User';\nimport { Setting } from 'src/app/interfaces/setting';\nimport { EmailNotVerifiedComponent } from '../email-not-verified/email-not-verified.component';\nimport { LoadingSpinnerComponent } from '../components/loading-spinner/loading-spinner.component';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { switchMap } from 'rxjs';\n\n@Component({\n  selector: 'vex-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['../auth.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [fadeInUp400ms],\n  standalone: true,\n  imports: [\n    ReactiveFormsModule,\n    MatFormFieldModule,\n    MatInputModule,\n    NgIf,\n    MatButtonModule,\n    MatTooltipModule,\n    MatIconModule,\n    MatCheckboxModule,\n    MatSnackBarModule,\n    MatProgressBarModule,\n    MatProgressSpinnerModule,\n    FormlyModule,\n    FormlyMatInputModule,\n    FormlyMatCheckboxModule,\n    FormlyMatToggleModule,\n    EmailNotVerifiedComponent,\n    LoadingSpinnerComponent,\n    AsyncPipe,\n    SharedModule\n  ]\n})\nexport class LoginComponent implements OnInit {\n  // Services injectés\n  private readonly router = inject(Router);\n  private readonly snackbar = inject(MatSnackBar);\n  private readonly settingsService = inject(SettingsService);\n  public readonly authService = inject(AuthService);\n  private readonly adminAuthService = inject(AdminAuthService);\n\n  // Signals pour l'état du composant\n  readonly inputType = signal<string>('password');\n  readonly visible = signal<boolean>(false);\n  readonly isLoading = signal<boolean>(false);\n  readonly isSuccess = signal<boolean>(false);\n  readonly errorMessage = signal<string[]>([]);\n  readonly sucess = signal<boolean>(false);\n  readonly LoadingForm = signal<boolean>(false);\n  readonly mailmessage = signal<string | undefined>('');\n\n  settings: Setting | null = null;\n  isAdminLogin: boolean = false;\n\n  // Formulaire\n  loginFormGroup = new FormGroup({});\n  loginModel: credentialsFormLogin = {\n    email: '',\n    password: '',\n    remember_me: false\n  };\n\n  loginfields: FormlyFieldConfig[] = [];\n\n  ngOnInit(): void {\n    this.getSettingInfo();\n    this.getAdminAuthority();\n  }\n\n  getAdminAuthority(): void {\n    // Vérifier si c'est un login admin via les données de la route\n      this.isAdminLogin = this.router.url.includes('/admin/login');\n    console.log(this.isAdminLogin);\n    \n    this.loginfields = loginFormForlyFields.map((field) => {\n      if (this.isAdminLogin && field.fieldGroupClassName) {\n        const newField = { ...field };\n        if (newField.fieldGroup) {\n          newField.fieldGroup = newField.fieldGroup.filter(\n            (innerField) => innerField.key !== 'forgotpasswordurl'\n          );\n        }\n        return newField;\n      }\n      return field;\n    });\n  }\n\n  getEmail(): string {\n    return this.loginModel.email;\n  }\n\n  private getSettingInfo(): void {\n    this.settings = this.settingsService.setting;\n  }\n\n  send(): void {\n    this.isLoading.set(true);\n\n    // Si c'est un login admin, utiliser le service admin\n    if (this.isAdminLogin) {\n      this.sendLoginWithAdmin();\n      return;\n    }\n\n    // Sinon, utiliser le service d'authentification normal\n    this.authService.login(this.loginModel).subscribe({\n      next: (response) => {\n        this.showMessage(response.message);\n\n        if (response.otp_required) {\n          this.router.navigate(['otp']);\n        } else {\n          // Charger les settings avant de rediriger\n          this.settingsService.getSettings().subscribe({\n            next: (settings) => {\n              this.settingsService.setting = settings;\n              this.redirectAfterLogin();\n            },\n            error: () => {\n              // Même en cas d'erreur de chargement des settings, rediriger\n              this.router.navigate(['index']).then(() => {\n                window.location.reload();\n              });\n            }\n          });\n        }\n      },\n      error: (error: HttpErrorResponse) => {\n        this.isLoading.set(false);\n        this.showMessage(error.error.message);\n        this.mailmessage.set(error.error.message);\n        console.error('Erreur de connexion:', error.error);\n\n        if (error.error.email_verified !== undefined) {\n          this.LoadingForm.set(true);\n          this.sucess.set(true);\n        }\n      }\n    });\n  }\n\n  redirectAfterLogin(): void {\n    this.isLoading.set(true);\n    this.router.navigate(['index']);\n  }\n\n  private sendLoginWithAdmin(): void {\n    // Récupérer le token CSRF puis effectuer la connexion admin\n    this.adminAuthService\n      .getCsrfToken()\n      .pipe(switchMap(() => this.adminAuthService.login(this.loginModel)))\n      .subscribe({\n        next: (response) => {\n          this.isLoading.set(false);\n          this.snackbar.open(response.message, 'Fermer', { duration: 3000 });\n          this.redirectAfterLogin();\n        },\n        error: (error: HttpErrorResponse) => {\n          this.isLoading.set(false);\n          this.snackbar.open(\n            error.error.message || 'Erreur de connexion',\n            'Fermer',\n            { duration: 5000 }\n          );\n        }\n      });\n  }\n\n  Refrech(): void {\n    this.isLoading.set(false);\n    this.sucess.set(false);\n    this.LoadingForm.set(false);\n    this.loginModel = {\n      email: '',\n      password: '',\n      remember_me: false\n    };\n\n    this.router.navigate(['/login']);\n  }\n\n  Resend(): void {\n    this.isLoading.set(true);\n    this.LoadingForm.set(false);\n\n    this.authService.ResenderVerificationEmail(this.loginModel).subscribe({\n      next: (response) => {\n        this.showMessage(response.message);\n        this.mailmessage.set(response.message);\n      },\n      error: (error: HttpErrorResponse) => {\n        this.showMessage(error.error.message);\n        console.error(\"Erreur de renvoi d'email:\", error.error);\n      }\n    });\n  }\n\n  toggleVisibility(): void {\n    const currentVisible = this.visible();\n    this.visible.set(!currentVisible);\n    this.inputType.set(currentVisible ? 'password' : 'text');\n  }\n\n  private showMessage(params: string | undefined): void {\n    if (params) {\n      this.snackbar.open(params, 'Fermer', { duration: 10000 });\n    }\n  }\n}\n","<ng-container *ngIf=\"!LoadingForm()\">\r\n  <div class=\"w-full min-h-screen bg-pattern flex justify-center p-4 sm:items-center\">\r\n    <div @fadeInUp class=\"w-full max-w-4xl card shadow-2xl overflow-hidden\">\r\n      <!-- Layout responsive: desktop = 2 colonnes, mobile = 1 colonne -->\r\n      <div class=\"grid grid-cols-1 md:grid-cols-2 gap-0\">\r\n        <!-- Colonne gauche - Descriptif -->\r\n        <div class=\"order-2 md:order-1 bg-slate-100 flex flex-col justify-center p-6 md:p-8\">\r\n          <!-- Logo -->\r\n          <div class=\"pb-4 flex flex-col items-center justify-center\">\r\n            <div class=\"fill-current text-center\" *ngIf=\"authService.image$ | async as site_logo\">\r\n              <img class=\"w-12\" [src]=\"site_logo\" alt=\"Logo\" />\r\n            </div>\r\n          </div>\r\n          <div class=\"flex flex-col items-center\">\r\n            <h1 class=\"capitalize text-2xl sm:text-3xl font-bold text-slate-800 dark:text-white text-center\">\r\n              {{ authService.site_subtitle$ | async }}\r\n\r\n            </h1>\r\n            <p class=\"mt-4 text-base text-slate-600 dark:text-slate-300 leading-normal text-center\">\r\n              {{ authService.site_description$ | async }}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Colonne droite - Formulaire de login -->\r\n        <div class=\"order-1 md:order-2 flex flex-col justify-center p-6 md:p-8\">\r\n          <ng-container *ngIf=\"!sucess()\">\r\n            <!-- Titre -->\r\n            <div class=\"text-center mb-6\">\r\n              <h2 class=\"title m-0 text-xl md:text-2xl\" rxTranslate=\"login.title\">Welcome</h2>\r\n              <h4 class=\"body-2 text-secondary m-0 text-sm md:text-base\" rxTranslate=\"login.subtile\">\r\n                Sign in with your credentials below.\r\n              </h4>\r\n            </div>\r\n\r\n            <!-- Formulaire -->\r\n            <div class=\"flex flex-col gap-4\">\r\n              <div class=\"flex flex-col\">\r\n                <formly-form [form]=\"loginFormGroup\" [fields]=\"loginfields\" [model]=\"loginModel\"></formly-form>\r\n              </div>\r\n              <!-- Bouton de connexion -->\r\n              <ng-container *ngIf=\"!isLoading(); else spinner\">\r\n                <button (click)=\"send()\" [disabled]=\"loginFormGroup.invalid\" color=\"primary\" class=\"w-full\"\r\n                  mat-raised-button>\r\n                  <span rxTranslate=\"login.submit\">SIGN IN</span>\r\n                </button>\r\n              </ng-container>\r\n              <ng-template #spinner>\r\n                <vex-loading-spinner></vex-loading-spinner>\r\n              </ng-template>\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-container>\r\n\r\n<vex-email-not-verified [mailmessage]=\"mailmessage()\" [email]=\"getEmail()\" [LoadingForm]=\"LoadingForm()\"\r\n  [isSuccess]=\"isSuccess()\" [sucess]=\"sucess()\">\r\n</vex-email-not-verified>"],"names":["inject","signal","FormGroup","ReactiveFormsModule","Router","AsyncPipe","NgIf","MatSnackBar","MatSnackBarModule","MatCheckboxModule","MatIconModule","MatTooltipModule","MatButtonModule","MatInputModule","MatFormFieldModule","MatProgressBarModule","MatProgressSpinnerModule","FormlyModule","FormlyMatToggleModule","FormlyMatInputModule","FormlyMatCheckboxModule","fadeInUp400ms","AuthService","AdminAuthService","SettingsService","loginFormForlyFields","EmailNotVerifiedComponent","LoadingSpinnerComponent","SharedModule","switchMap","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","site_logo_r3","ɵɵsanitizeUrl","ɵɵelementContainerStart","ɵɵlistener","LoginComponent_ng_container_0_ng_container_16_ng_container_9_Template_button_click_1_listener","ɵɵrestoreView","_r8","ctx_r7","ɵɵnextContext","ɵɵresetView","send","ɵɵtext","ɵɵelementContainerEnd","ctx_r4","loginFormGroup","invalid","ɵɵtemplate","LoginComponent_ng_container_0_ng_container_16_ng_container_9_Template","LoginComponent_ng_container_0_ng_container_16_ng_template_10_Template","ɵɵtemplateRefExtractor","ctx_r2","loginfields","loginModel","isLoading","_r6","LoginComponent_ng_container_0_div_6_Template","LoginComponent_ng_container_0_ng_container_16_Template","undefined","ɵɵpipeBind1","ctx_r0","authService","image$","ɵɵtextInterpolate1","site_subtitle$","site_description$","sucess","LoginComponent","constructor","router","snackbar","settingsService","adminAuthService","inputType","visible","isSuccess","errorMessage","LoadingForm","mailmessage","settings","isAdminLogin","email","password","remember_me","ngOnInit","getSettingInfo","getAdminAuthority","url","includes","console","log","map","field","fieldGroupClassName","newField","fieldGroup","filter","innerField","key","getEmail","setting","set","sendLoginWithAdmin","login","subscribe","next","response","showMessage","message","otp_required","navigate","getSettings","redirectAfterLogin","error","then","window","location","reload","email_verified","getCsrfToken","pipe","open","duration","Refrech","Resend","ResenderVerificationEmail","toggleVisibility","currentVisible","params","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","LoginComponent_Template","rf","ctx","LoginComponent_ng_container_0_Template","i1","MatButton","i2","FormlyForm","i3","default","styles","data","animation","changeDetection"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}