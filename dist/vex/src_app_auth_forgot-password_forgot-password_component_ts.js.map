{"version":3,"file":"src_app_auth_forgot-password_forgot-password_component_ts.js","mappings":"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","sources":["./src/app/auth/forgot-password/forgot-password.component.ts","./src/app/auth/forgot-password/forgot-password.component.html"],"sourcesContent":["import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { FormGroup, ReactiveFormsModule } from '@angular/forms';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { NgIf } from '@angular/common';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { FormlyFieldConfig, FormlyModule } from '@ngx-formly/core';\r\nimport { FormlyMatCheckboxModule } from '@ngx-formly/material/checkbox';\r\nimport { FormlyMatInputModule } from '@ngx-formly/material/input';\r\nimport { FormlyMatToggleModule } from '@ngx-formly/material/toggle';\r\nimport { fadeInUp400ms } from '@vex/animations/fade-in-up.animation';\r\nimport { AuthService } from 'src/app/services/auth-service';\r\nimport { credentialsFormForgot } from 'src/app/interfaces/Credentials-form-forgot';\r\nimport { forgotFormFomlyfields } from 'src/app/interfaces/User';\r\nimport { EmailNotVerifiedComponent } from '../email-not-verified/email-not-verified.component';\r\nimport { LoadingSpinnerComponent } from '../components/loading-spinner/loading-spinner.component';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\n\r\n@Component({\r\n  selector: 'vex-forgot-password',\r\n  templateUrl: './forgot-password.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  styleUrls: ['../auth.component.scss'],\r\n  animations: [fadeInUp400ms],\r\n  standalone: true,\r\n  imports: [\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatIconModule,\r\n    MatInputModule,\r\n    NgIf,\r\n    MatButtonModule,\r\n    MatProgressBarModule,\r\n    EmailNotVerifiedComponent,\r\n    MatProgressSpinnerModule,\r\n    FormlyModule,\r\n    FormlyMatInputModule,\r\n    FormlyMatCheckboxModule,\r\n    FormlyMatToggleModule,\r\n    LoadingSpinnerComponent,\r\n    SharedModule\r\n  ]\r\n})\r\nexport class ForgotPasswordComponent implements OnInit {\r\n  forgotFormGroup = new FormGroup({});\r\n  forgotModel: credentialsFormForgot = {\r\n    email: ''\r\n  };\r\n  forgotfields: FormlyFieldConfig[] = forgotFormFomlyfields;\r\n\r\n  sucess = false;\r\n  LoadingForm = false;\r\n  isSuccess = false;\r\n  mailmessage: string | undefined = '';\r\n  formMessage = false;\r\n  isLoading = false;\r\n\r\n  constructor(\r\n    private readonly authService: AuthService,\r\n    private readonly snackbar: MatSnackBar,\r\n    private readonly cd: ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  getEmail(): string {\r\n    return this.forgotModel.email || '';\r\n  }\r\n\r\n  send(): void {\r\n    this.isLoading = true;\r\n    this.mailmessage = '';\r\n\r\n    this.authService.forgotPassword(this.forgotModel).subscribe({\r\n      next: (response) => {\r\n        this.showMessage(response.message);\r\n        this.formMessage = true;\r\n        this.sucess = true;\r\n        this.cd.detectChanges();\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.isLoading = false;\r\n        this.mailmessage = error.error.message;\r\n        this.showMessage(error.error.message);\r\n\r\n        if (error.error.email_verified !== undefined) {\r\n          this.LoadingForm = true;\r\n        }\r\n\r\n        this.cd.detectChanges();\r\n      }\r\n    });\r\n  }\r\n\r\n  refresh(): void {\r\n    this.sucess = false;\r\n    this.LoadingForm = false;\r\n    this.isSuccess = false;\r\n    window.location.reload();\r\n  }\r\n\r\n  private showMessage(message: string | undefined): void {\r\n    if (message) {\r\n      this.snackbar.open(message, 'Fermer', { duration: 10000 });\r\n    }\r\n  }\r\n}","<ng-container *ngIf=\"!LoadingForm\">\r\n  <!-- Affichage du formulaire ou du message de vérification -->\r\n  <div class=\"w-full h-full bg-pattern flex flex-col items-center justify-center\">\r\n    <div @fadeInUp class=\"card overflow-hidden w-full max-w-md\">\r\n      <!-- Si sucess est false, on affiche le formulaire -->\r\n      <ng-container *ngIf=\"!sucess ; else failed\">\r\n        \r\n\r\n          <!-- Logo -->\r\n          <div class=\"p-6 pb-0 flex flex-col items-center justify-center\">\r\n            <div class=\"fill-current text-center\">\r\n              <img class=\"w-16\" src=\"assets/img/logo/logo.svg\" />\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Titre -->\r\n          <div class=\"text-center mt-4\">\r\n            <h2 class=\"title m-0\" rxTranslate=\"forgot-password.title\">Reset Password</h2>\r\n            <h4 class=\"body-2 text-secondary m-0\" rxTranslate=\"forgot-password.subtile\">\r\n              Enter your email for password recovery.\r\n            </h4>\r\n            <div *ngIf=\"mailmessage?.trim()\" class=\"text-red-500 text-lg font-medium\">\r\n              {{ mailmessage }}\r\n            </div>\r\n          </div>\r\n          <div class=\"p-6 flex flex-col\">\r\n            <formly-form [form]=\"forgotFormGroup\" [fields]=\"forgotfields\" [model]=\"forgotModel\"></formly-form>\r\n            <ng-container *ngIf=\"!isLoading; else spinner\"> \r\n    \r\n            <button\r\n              (click)=\"send()\"\r\n              class=\"mt-2\"\r\n              color=\"primary\"\r\n              [disabled]=\"forgotFormGroup.invalid\" \r\n              mat-raised-button\r\n              type=\"button\" rxTranslate=\"forgot-password.submit\">\r\n              SEND RECOVERY LINK\r\n            </button>\r\n          </ng-container>\r\n          <ng-template #spinner>\r\n            <vex-loading-spinner></vex-loading-spinner>\r\n          </ng-template>\r\n          </div>\r\n      </ng-container>\r\n    </div>\r\n  </div>\r\n</ng-container>\r\n\r\n<!-- Loader -->\r\n\r\n<ng-template #failed class=\"bg-pattern w-full h-full flex flex-col items-center justify-center\">\r\n        <div [@fadeInUp] class=\"card overflow-hidden w-full max-w-md\">\r\n          <div class=\"p-6 pb-0 flex flex-col items-center justify-center\">\r\n            <div class=\"fill-current text-center\">\r\n              <mat-icon\r\n                class=\"icon-5xl\"\r\n                [svgIcon]=\"sucess ? 'mat:check' : 'mat:mail'\"></mat-icon>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"text-center mt-4\">\r\n            <h2 class=\"title m-0\" rxTranslate=\"forgot-password.success_bloc.title\">\r\n              Vérifiez votre email pour le lien de réinitialisation.\r\n            </h2>\r\n            <div class=\"p-6 flex flex-col\">\r\n              <button (click)=\"refresh()\" color=\"primary\" mat-raised-button rxTranslate=\"forgot-password.success_bloc.submit\">\r\n                Come back\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n</ng-template>\r\n\r\n\r\n<vex-email-not-verified  \r\n[mailmessage]=\"mailmessage\"\r\n[email]=\"getEmail()\"\r\n[LoadingForm]=\"LoadingForm\"\r\n[isSuccess] =\"isSuccess\"\r\n[sucess]=\"sucess\"\r\n></vex-email-not-verified>"],"names":["FormGroup","ReactiveFormsModule","NgIf","MatButtonModule","MatInputModule","MatIconModule","MatFormFieldModule","MatProgressBarModule","MatProgressSpinnerModule","FormlyModule","FormlyMatCheckboxModule","FormlyMatInputModule","FormlyMatToggleModule","fadeInUp400ms","forgotFormFomlyfields","EmailNotVerifiedComponent","LoadingSpinnerComponent","SharedModule","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r4","mailmessage","ɵɵelementContainerStart","ɵɵlistener","ForgotPasswordComponent_ng_container_0_ng_container_3_ng_container_12_Template_button_click_1_listener","ɵɵrestoreView","_r9","ctx_r8","ɵɵnextContext","ɵɵresetView","send","ɵɵelementContainerEnd","ɵɵproperty","ctx_r5","forgotFormGroup","invalid","ɵɵelement","ɵɵtemplate","ForgotPasswordComponent_ng_container_0_ng_container_3_div_9_Template","ForgotPasswordComponent_ng_container_0_ng_container_3_ng_container_12_Template","ForgotPasswordComponent_ng_container_0_ng_container_3_ng_template_13_Template","ɵɵtemplateRefExtractor","ctx_r3","trim","forgotfields","forgotModel","isLoading","_r7","ForgotPasswordComponent_ng_container_0_ng_container_3_Template","undefined","ctx_r0","sucess","_r2","ForgotPasswordComponent_ng_template_1_Template_button_click_8_listener","_r11","ctx_r10","refresh","ctx_r1","ForgotPasswordComponent","constructor","authService","snackbar","cd","email","LoadingForm","isSuccess","formMessage","ngOnInit","getEmail","forgotPassword","subscribe","next","response","showMessage","message","detectChanges","error","email_verified","window","location","reload","open","duration","ɵɵdirectiveInject","i1","AuthService","i2","MatSnackBar","ChangeDetectorRef","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","ForgotPasswordComponent_Template","rf","ctx","ForgotPasswordComponent_ng_container_0_Template","ForgotPasswordComponent_ng_template_1_Template","i3","MatIcon","i4","MatButton","i5","FormlyForm","i6","default","styles","data","animation","changeDetection"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}