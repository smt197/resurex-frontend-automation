{"version":3,"file":"src_app_pages_chat_chat_routes_ts.js","mappings":"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","sources":["./src/@vex/animations/scale-fade-in.animation.ts","./src/app/auth/components/loading-spinner/loading-spinner.component.ts","./src/app/auth/components/loading-spinner/loading-spinner.component.html","./src/app/interfaces/Response-globalServer.ts","./src/app/models/chat.model.ts","./src/app/pages/apps/chat/add-contact-modal/add-contact-modal.component.ts","./src/app/pages/apps/chat/add-contact-modal/add-contact-modal.component.html","./src/app/pages/chat/chat-conversation/chat-conversation.component.ts","./src/app/pages/chat/chat-conversation/chat-conversation.component.html","./src/app/pages/chat/chat-empty/chat-empty.component.ts","./src/app/pages/chat/chat-empty/chat-empty.component.html","./src/app/pages/chat/chat.component.ts","./src/app/pages/chat/chat.component.html","./src/app/pages/chat/chat.routes.ts","./src/app/pages/chat/file-size.pipe.ts","./src/app/services/CustomPaginatorIntl.ts"],"sourcesContent":["import { animate, style, transition, trigger } from '@angular/animations';\r\n\r\nexport function scaleFadeInAnimation(duration: number) {\r\n  return trigger('scaleFadeIn', [\r\n    transition(':enter', [\r\n      style({\r\n        transform: 'scale(0.8)',\r\n        opacity: 0\r\n      }),\r\n      animate(\r\n        `${duration}ms cubic-bezier(0.35, 0, 0.25, 1)`,\r\n        style({\r\n          transform: 'scale(1)',\r\n          opacity: 1\r\n        })\r\n      )\r\n    ])\r\n  ]);\r\n}\r\n\r\nexport const scaleFadeIn400ms = scaleFadeInAnimation(400);\r\n","import { Component } from '@angular/core';\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\n\r\n@Component({\r\n  selector: 'vex-loading-spinner',\r\n  standalone: true,\r\n  imports: [\r\n   MatProgressBarModule,\r\n    MatProgressSpinnerModule,\r\n    SharedModule\r\n  ],\r\n  templateUrl: './loading-spinner.component.html',\r\n  styleUrls: ['../../auth.component.scss']\r\n})\r\nexport class LoadingSpinnerComponent {\r\n\r\n}\r\n","<div class=\"flex flex-col items-center justify-center \">\r\n    <button color=\"primary\" mat-raised-button>\r\n    <span class=\"text-lg \" rxTranslate=\"global.loading\">Please wait...</span>\r\n   \r\n</button>\r\n<mat-progress-spinner mode=\"indeterminate\" class=\"icon-2xl\" color=\"primary\" diameter=\"35\"></mat-progress-spinner>\r\n</div>","import { environment } from 'src/environments/environment';\r\nimport { Logs } from './Activity-logs';\r\nimport { Chat } from './Chat';\r\nimport { Notifications } from './Notifications';\r\nimport { Roles } from './Roles';\r\nimport { User } from './User';\r\nimport { Setting } from './setting';\r\n\r\nexport interface ResponseGlobalServer {\r\n  data?: User | User[] |  Roles | Roles[] | Logs | Logs[] | Setting | Chat[] | null;\r\n  message?: string;\r\n  mailmessage?: string;\r\n  status?: boolean;\r\n  email_verified?: boolean;\r\n  active?: boolean;\r\n  otp?: boolean;\r\n  code?: string;\r\n  otp_required?: boolean;\r\n  otp_enabled?: boolean;\r\n  otp_id?: string;\r\n  status_otp?: boolean;\r\n  otp_status_auth?: boolean;\r\n  user?: User;\r\n  pagination?: customPagination;\r\n  site_name?: string;\r\n  site_logo?: string | File | null;\r\n  site_description?: string;\r\n  site_active?: boolean;\r\n  unreadnotificationcount?: number,\r\n  recent_unread_list?: Notifications[]\r\n\r\n}\r\n\r\nexport interface customPagination {\r\n  current_page: number;\r\n  per_page: number;\r\n  total: number;\r\n}\r\n\r\nexport const PaginationStandard = {\r\n  current_page: environment.current_page,\r\n  pageSize: environment.pageSize,\r\n  total: environment.total,\r\n  total_user_blocked: environment.total_user_blocked\r\n};\r\n","import { FormlyFieldConfig } from '@ngx-formly/core';\r\nimport { ChatConversationComponent } from '../pages/chat/chat-conversation/chat-conversation.component';\r\n\r\nexport class ChatMessageModel {\r\n  message: string | null;\r\n  attachment: File | null;\r\n\r\n  constructor(chat: ChatMessageModel) {\r\n    this.message = chat.message ?? null;\r\n    this.attachment = chat.attachment ?? null;\r\n  }\r\n}\r\n\r\nexport function getChatMessageFormFields(\r\n  component: ChatConversationComponent\r\n): FormlyFieldConfig[] {\r\n  return [\r\n    {\r\n      fieldGroupClassName: 'flex flex-col gap-2',\r\n      fieldGroup: [\r\n        // CHAMP 1: FilePond (pièce jointe)\r\n        {\r\n          key: 'attachment',\r\n          type: 'chat-file-pond',\r\n          className: 'flex-none',\r\n          // Affiche ce champ uniquement si isAttachmentAreaVisible est vrai\r\n          hide: !component.isAttachmentAreaVisible(),\r\n          props: {\r\n            browse: component.onBrowseInit.bind(component),\r\n            disabled: component.isBlocked()\r\n          }\r\n        },\r\n\r\n        // CHAMP 2: Barre de saisie de message\r\n        {\r\n          key: 'message',\r\n          type: 'chat-input-type', // Notre nouveau type personnalisé\r\n          className: 'flex-auto',\r\n          props: {\r\n            placeholder: component.translateService.instant(\r\n              'global.chats.try_message'\r\n            ),\r\n            // Lie les actions des boutons aux méthodes du composant parent\r\n            onAdd: () => component.toggleAttachmentArea(),\r\n            onSend: () => component.send(),\r\n            // Passe l'état de chargement et de désactivation en tant que fonctions\r\n            isUploading: () => component.isUploadingFile(),\r\n            isSendDisabled: () =>\r\n              (!component.model.message?.trim() &&\r\n                !component.model.attachment) ||\r\n              component.isUploadingFile()\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n}\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  Inject,\r\n  OnInit,\r\n  ViewChild,\r\n  AfterViewInit,\r\n  OnDestroy,\r\n  DestroyRef,\r\n  inject,\r\n  signal\r\n} from '@angular/core';\r\nimport {\r\n  MAT_DIALOG_DATA,\r\n  MatDialogRef,\r\n  MatDialogModule\r\n} from '@angular/material/dialog';\r\nimport { BehaviorSubject, Observable, Subject, of } from 'rxjs';\r\nimport {\r\n  debounceTime,\r\n  distinctUntilChanged,\r\n  switchMap,\r\n  takeUntil,\r\n  catchError,\r\n  tap,\r\n  map,\r\n  filter\r\n} from 'rxjs/operators';\r\nimport { User } from 'src/app/interfaces/User'; // Votre interface User\r\nimport { AsyncPipe, NgFor, NgIf } from '@angular/common';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport {\r\n  MatPaginator,\r\n  MatPaginatorIntl,\r\n  MatPaginatorModule,\r\n  PageEvent\r\n} from '@angular/material/paginator'; // Pour la pagination\r\nimport { MatFormFieldModule } from '@angular/material/form-field'; // Pour le champ de recherche\r\nimport { MatInputModule } from '@angular/material/input'; // Pour le champ de recherche\r\nimport { FormControl, ReactiveFormsModule } from '@angular/forms'; // Pour le champ de recherche\r\nimport { UsersService } from 'src/app/pages/users/users.service'; // VOTRE SERVICE UTILISATEUR\r\nimport {\r\n  ResponseGlobalServer,\r\n  customPagination,\r\n  PaginationStandard\r\n} from 'src/app/interfaces/Response-globalServer'; // Vos interfaces\r\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\r\nimport { AuthService } from 'src/app/services/auth-service'; // Pour l'ID de l'utilisateur actuel\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CustomPaginatorIntl } from 'src/app/services/CustomPaginatorIntl';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { ChatService } from 'src/app/pages/chat/chat.service'; // Pour accéder aux chats existants\r\nimport { Chat, UserStub } from 'src/app/interfaces/Chat'; // Pour les interfaces Chat\r\n\r\n@Component({\r\n  selector: 'vex-add-contact-modal',\r\n  templateUrl: './add-contact-modal.component.html',\r\n  styleUrls: ['./add-contact-modal.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  standalone: true,\r\n  providers: [{ provide: MatPaginatorIntl, useClass: CustomPaginatorIntl }],\r\n  imports: [\r\n    NgIf,\r\n    NgFor,\r\n    AsyncPipe,\r\n    MatListModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatProgressSpinnerModule,\r\n    MatDialogModule,\r\n    MatPaginatorModule,\r\n    MatFormFieldModule,\r\n    MatInputModule,\r\n    ReactiveFormsModule,\r\n    SharedModule,\r\n    TranslateModule,\r\n    MatPaginatorModule,\r\n    MatRippleModule\r\n  ]\r\n})\r\nexport class AddContactModalComponent\r\n  implements OnInit, AfterViewInit, OnDestroy\r\n{\r\n  private _users = new BehaviorSubject<User[]>([]);\r\n  readonly users$: Observable<User[]> = this._users.asObservable();\r\n\r\n  private _recentContacts = new BehaviorSubject<User[]>([]);\r\n  readonly recentContacts$: Observable<User[]> =\r\n    this._recentContacts.asObservable();\r\n\r\n  private _displayedRecentContacts = new BehaviorSubject<User[]>([]);\r\n  readonly displayedRecentContacts$: Observable<User[]> =\r\n    this._displayedRecentContacts.asObservable();\r\n\r\n  searchCtrl = new FormControl('');\r\n  isLoading = signal(false);\r\n  showRecentContacts = signal(true); // État pour basculer entre recently list et recherche\r\n\r\n  // Variables pour la pagination des contacts récents\r\n  recentContactsLimit = 5;\r\n  allRecentContacts: User[] = [];\r\n\r\n  pagination: customPagination = {\r\n    current_page: PaginationStandard.current_page,\r\n    per_page: 5, // Commencer avec un petit nombre pour la modale\r\n    total: PaginationStandard.total\r\n  };\r\n\r\n  @ViewChild(MatPaginator) paginator!: MatPaginator;\r\n\r\n  private readonly destroyRef: DestroyRef = inject(DestroyRef);\r\n  private currentUserId: string | number | null = null;\r\n\r\n  constructor(\r\n    public dialogRef: MatDialogRef<AddContactModalComponent>,\r\n    @Inject(MAT_DIALOG_DATA)\r\n    public data: {\r\n      /* Peut-être plus besoin de passer users ici */\r\n    },\r\n    private usersService: UsersService, // Injecter votre service utilisateur\r\n    private authService: AuthService,\r\n    private chatService: ChatService // Injecter ChatService pour accéder aux chats existants\r\n  ) {\r\n    this.currentUserId = this.authService.user?.id ?? null;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // S'abonner aux chats du service et charger les contacts récents quand ils sont disponibles\r\n    this.chatService.chats$\r\n      .pipe(\r\n        filter((chats) => chats.length > 0), // Attendre que les chats soient chargés\r\n        tap((chats) => {\r\n          this.loadRecentContacts();\r\n        }),\r\n        takeUntilDestroyed(this.destroyRef)\r\n      )\r\n      .subscribe();\r\n\r\n    // Charger immédiatement si les chats sont déjà disponibles\r\n    if (this.chatService.currentChatsValue.length > 0) {\r\n      this.loadRecentContacts();\r\n    }\r\n\r\n    this.searchCtrl.valueChanges\r\n      .pipe(\r\n        debounceTime(300),\r\n        distinctUntilChanged(),\r\n        tap((searchTerm) => {\r\n          this.isLoading.set(true);\r\n          // Basculer vers la recherche si un terme est saisi, sinon afficher recently list\r\n          this.showRecentContacts.set(!searchTerm || searchTerm.trim() === '');\r\n        }),\r\n        switchMap((searchTerm) => {\r\n          if (!searchTerm || searchTerm.trim() === '') {\r\n            // Réafficher les contacts récents\r\n            this.loadRecentContacts();\r\n            return of({\r\n              data: [],\r\n              pagination: this.pagination,\r\n              message: 'Recent contacts loaded'\r\n            } as ResponseGlobalServer);\r\n          } else {\r\n            // Rechercher des utilisateurs\r\n            return this.usersService.searchUsers(searchTerm).pipe(\r\n              catchError((error) => {\r\n                this.isLoading.set(false);\r\n                return of({\r\n                  data: [],\r\n                  pagination: this.pagination,\r\n                  message: 'Error'\r\n                } as ResponseGlobalServer);\r\n              })\r\n            );\r\n          }\r\n        }),\r\n        takeUntilDestroyed(this.destroyRef)\r\n      )\r\n      .subscribe((response) => {\r\n        if (!this.showRecentContacts()) {\r\n          this.handleUserResponse(response);\r\n        }\r\n        this.isLoading.set(false);\r\n      });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    // Le paginator est initialisé après que les données initiales soient chargées\r\n    // ou après une recherche pour mettre à jour `this.pagination.total`.\r\n  }\r\n\r\n  fetchUsers(page: number, searchTerm?: string): void {\r\n    this.isLoading.set(true);\r\n    this.usersService\r\n      .getUsers(page)\r\n      .pipe(\r\n        // Assumer que getUsers accepte per_page et searchTerm\r\n        takeUntilDestroyed(this.destroyRef)\r\n      )\r\n      .subscribe({\r\n        next: (response) => {\r\n          this.handleUserResponse(response);\r\n          this.isLoading.set(false);\r\n        },\r\n        error: (error) => {\r\n          console.error('Error fetching users:', error);\r\n          this._users.next([]); // Vider la liste en cas d'erreur\r\n          this.isLoading.set(false);\r\n        }\r\n      });\r\n  }\r\n\r\n  private handleUserResponse(response: ResponseGlobalServer): void {\r\n    let usersData = (response.data as User[]) || [];\r\n    // Filtrer l'utilisateur actuel\r\n    if (this.currentUserId !== null) {\r\n      usersData = usersData.filter(\r\n        (user) => String(user.id) !== String(this.currentUserId)\r\n      );\r\n    }\r\n    this._users.next(usersData);\r\n\r\n    if (response.pagination) {\r\n      this.pagination = response.pagination;\r\n      // Forcer la mise à jour du paginator si la vue a déjà été initialisée\r\n      if (\r\n        this.paginator &&\r\n        (this.paginator.length !== this.pagination.total ||\r\n          this.paginator.pageIndex !== this.pagination.current_page - 1)\r\n      ) {\r\n        // Il est un peu délicat de mettre à jour le paginator directement s'il est déjà rendu.\r\n        // Parfois, il suffit de s'assurer que les inputs [length] et [pageIndex] sont correctement liés.\r\n        // Pour forcer une réinitialisation, on pourrait reconstruire le DataSource si on utilisait MatTableDataSource\r\n        // Ici, avec un simple *ngFor, on s'assure que les propriétés du paginator sont mises à jour.\r\n      }\r\n    }\r\n  }\r\n\r\n  onPageChange(event: PageEvent): void {\r\n    this.pagination.current_page = event.pageIndex + 1;\r\n    this.pagination.per_page = event.pageSize;\r\n    this.fetchUsers(\r\n      this.pagination.current_page,\r\n      this.searchCtrl.value || undefined\r\n    );\r\n  }\r\n\r\n  onContactSelect(selectedUser: User): void {\r\n    if (selectedUser && selectedUser.id) {\r\n      this.dialogRef.close(selectedUser.id); // <<< CETTE LIGNE EST CRUCIALE\r\n    } else {\r\n      console.error(\r\n        'AddContactModalComponent: Selected user or user ID is invalid.',\r\n        selectedUser\r\n      );\r\n    }\r\n  }\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  private loadRecentContacts(): void {\r\n    // Récupérer les chats existants depuis ChatService\r\n    const existingChats = this.chatService.currentChatsValue;\r\n    const recentContactsMap = new Map<string, User>();\r\n\r\n    // Extraire les contacts depuis les chats existants en utilisant partnerId et first_name\r\n    existingChats.forEach((chat, index) => {\r\n      // Utiliser partnerId comme contact récent\r\n      if (chat.partnerId) {\r\n        const partnerIdStr = String(chat.partnerId);\r\n        const currentUserIdStr = String(this.currentUserId);\r\n\r\n        // Exclure l'utilisateur actuel\r\n        if (\r\n          partnerIdStr !== currentUserIdStr &&\r\n          !recentContactsMap.has(partnerIdStr)\r\n        ) {\r\n          // Créer un User à partir des informations du chat\r\n          const recentContact: User = {\r\n            id:\r\n              typeof chat.partnerId === 'string'\r\n                ? parseInt(chat.partnerId) || 0\r\n                : chat.partnerId,\r\n            first_name: chat.first_name || 'Contact',\r\n            last_name: '', // Pas disponible dans la structure Chat\r\n            email: '', // Pas disponible dans la structure Chat\r\n            confirmed: true, // Par défaut true pour les contacts existants\r\n            photo: chat.imageUrl || 'assets/img/avatars/noavatar.png'\r\n          };\r\n          recentContactsMap.set(partnerIdStr, recentContact);\r\n        }\r\n      }\r\n    });\r\n\r\n    const recentContactsArray = Array.from(recentContactsMap.values());\r\n    // Stocker tous les contacts récents\r\n    this.allRecentContacts = recentContactsArray;\r\n    this._recentContacts.next(recentContactsArray);\r\n\r\n    // Afficher seulement les 5 premiers par défaut\r\n    this.updateDisplayedRecentContacts();\r\n  }\r\n\r\n  private updateDisplayedRecentContacts(): void {\r\n    const displayed = this.allRecentContacts.slice(0, this.recentContactsLimit);\r\n    this._displayedRecentContacts.next(displayed);\r\n  }\r\n\r\n  loadMoreRecentContacts(): void {\r\n    this.recentContactsLimit += 5;\r\n    this.updateDisplayedRecentContacts();\r\n  }\r\n\r\n  get hasMoreRecentContacts(): boolean {\r\n    return this.recentContactsLimit < this.allRecentContacts.length;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    // destroyRef s'occupe de la désinscription des observables pipés avec takeUntilDestroyed\r\n  }\r\n}\r\n","<div class=\"flex flex-col gap-4 px-6 py-3 border-b border-divider\">\r\n   <div class=\"flex items-center gap-3 w-full\">\r\n  <mat-icon \r\n    svgIcon=\"mat:person_add\" \r\n    class=\"icon-2xl text-primary-600 flex-shrink-0\">\r\n  </mat-icon>\r\n  <h2 class=\"text-lg sm:text-xl font-medium capitalize truncate\" \r\n      rxTranslate=\"global.chats.add_new_discussion\">\r\n    Add New Contact\r\n  </h2>\r\n  <button \r\n    mat-icon-button \r\n    (click)=\"close()\" \r\n    class=\"ltr:right-12 rtl:left-12 top-2 absolute\"\r\n    aria-label=\"Close dialog\">\r\n    <mat-icon svgIcon=\"mat:close\"></mat-icon>\r\n  </button>\r\n</div>\r\n  <mat-form-field class=\"w-full\" subscriptSizing=\"dynamic\">\r\n    <mat-icon matIconPrefix svgIcon=\"mat:search\"></mat-icon>\r\n    <input\r\n      matInput\r\n      [formControl]=\"searchCtrl\"\r\n      [placeholder]=\"'global.chats.search_user' | translate\"\r\n      type=\"text\" />\r\n    <button\r\n      *ngIf=\"searchCtrl.value\"\r\n      matSuffix\r\n      mat-icon-button\r\n      aria-label=\"Clear\"\r\n      (click)=\"searchCtrl.setValue('')\">\r\n      <mat-icon svgIcon=\"mat:close\"></mat-icon>\r\n    </button>\r\n  </mat-form-field>\r\n</div>\r\n\r\n<div class=\"p-4\">\r\n  <!-- Section pour les contacts récents -->\r\n  <div *ngIf=\"showRecentContacts()\">\r\n    <div class=\"text-xs font-semibold text-secondary px-2 mb-2\">\r\n      <span rxTranslate=\"global.chats.recently_list\">Recently</span>\r\n    </div>\r\n\r\n    <div class=\"space-y-1\">\r\n      <div *ngIf=\"isLoading()\" class=\"flex justify-center items-center h-40\">\r\n        <mat-spinner diameter=\"40\"></mat-spinner>\r\n      </div>\r\n      <div *ngIf=\"!isLoading()\">\r\n        <div *ngIf=\"displayedRecentContacts$ | async as displayedRecentContacts\">\r\n          <ng-container *ngIf=\"displayedRecentContacts.length > 0; else noRecentContacts\">\r\n            <!-- Container avec scroll pour les contacts récents -->\r\n            <div class=\"max-h-80 overflow-y-auto\">\r\n              <div\r\n                *ngFor=\"let contact of displayedRecentContacts\"\r\n                (click)=\"onContactSelect(contact)\"\r\n                class=\"px-2 py-2 hover:bg-hover rounded transition duration-200 ease-out flex items-center gap-4 cursor-pointer select-none\"\r\n                matRipple>\r\n                <img\r\n                  [src]=\"contact.photo || 'assets/img/avatars/noavatar.png'\"\r\n                  alt=\"{{ contact.first_name }} avatar\"\r\n                  class=\"w-8 h-8 rounded-full flex-none\" />\r\n                <div class=\"flex-auto flex-col gap-2\">\r\n                  <div class=\"flex-auto text-base font-medium\">\r\n                    {{ contact.last_name }} {{ contact.first_name }} \r\n                  </div>\r\n                  <div class=\"flex-auto text-xs text-gray-500\">{{ contact.email || 'Recent contact' }}</div>\r\n                </div>\r\n                <mat-icon\r\n                  svgIcon=\"mat:chevron_right\"\r\n                  class=\"icon-sm flex-none\"></mat-icon>\r\n              </div>\r\n            </div>\r\n            \r\n            <!-- Bouton Load More -->\r\n              <a *ngIf=\"hasMoreRecentContacts\" (click)=\"loadMoreRecentContacts()\"\r\n                class=\"inline-block text-gray-600 dark:text-gray-300 font-medium text-xs mx-6 mt-3\" href=\"javascript:void(0);\">\r\n                <span>{{ 'global.expansion.Folded' | translate }}</span>\r\n                <mat-icon class=\"icon-xs align-middle select-none\" svgIcon=\"mat:expand_more\"></mat-icon>\r\n              </a>\r\n          </ng-container>\r\n          <ng-template #noRecentContacts>\r\n            <p class=\"p-6 text-center text-gray-500\">\r\n              {{ \"global.chats.no_recent_contacts\" | translate }}\r\n            </p>\r\n          </ng-template>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Section pour la recherche d'utilisateurs -->\r\n  <div *ngIf=\"!showRecentContacts()\">\r\n    <div class=\"text-xs font-semibold text-secondary px-2 mb-2\">\r\n      <span rxTranslate=\"home.title_bloc\">Contacts</span>\r\n    </div>\r\n\r\n    <div class=\"space-y-1\">\r\n      <div *ngIf=\"isLoading()\" class=\"flex justify-center items-center h-40\">\r\n        <mat-spinner diameter=\"40\"></mat-spinner>\r\n      </div>\r\n      <div *ngIf=\"!isLoading()\">\r\n        <div *ngIf=\"users$ | async as users\">\r\n          <ng-container *ngIf=\"users.length > 0; else noUsersFound\">\r\n            <div\r\n              *ngFor=\"let user of users\"\r\n              (click)=\"onContactSelect(user)\"\r\n              class=\"px-2 py-2 hover:bg-hover rounded transition duration-200 ease-out flex items-center gap-4 cursor-pointer select-none\"\r\n              matRipple>\r\n              <img\r\n                [src]=\"user.photo || 'assets/img/avatars/noavatar.png'\"\r\n                alt=\"{{ user.first_name }} avatar\"\r\n                class=\"w-8 h-8 rounded-full flex-none\" />\r\n              <div class=\"flex-auto flex-col gap-2\">\r\n                <div class=\"flex-auto text-base font-medium\">\r\n                  {{ user.last_name }} {{ user.first_name }} \r\n                </div>\r\n                <div class=\"flex-auto text-xs text-gray-500\">{{ user.email }}</div>\r\n              </div>\r\n              <mat-icon\r\n                svgIcon=\"mat:chevron_right\"\r\n                class=\"icon-sm flex-none\"></mat-icon>\r\n            </div>\r\n          </ng-container>\r\n          <ng-template #noUsersFound>\r\n            <p class=\"p-6 text-center text-gray-500\">\r\n              {{\r\n                (searchCtrl.value\r\n                  ? \"user.no_user_matching\"\r\n                  : \"user.no_user_matching\"\r\n                ) | translate\r\n              }}\r\n            </p>\r\n          </ng-template>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n  <!-- <mat-paginator *ngIf=\"!isLoading() && pagination.total > pagination.per_page\"\r\n                 [length]=\"pagination.total\"\r\n                 [pageSize]=\"pagination.per_page\"\r\n                 [pageIndex]=\"pagination.current_page - 1\"\r\n                 [pageSizeOptions]=\"[5, 10, 20]\"\r\n                 (page)=\"onPageChange($event)\"\r\n                 showFirstLastButtons\r\n                 class=\"paginator-compact\">\r\n  </mat-paginator> -->","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  DestroyRef,\n  inject,\n  OnInit,\n  OnDestroy,\n  ViewChild,\n  AfterViewInit,\n  signal,\n  effect\n} from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport {\n  map,\n  switchMap,\n  tap,\n  distinctUntilChanged,\n  filter,\n  take,\n  startWith\n} from 'rxjs/operators';\nimport { Observable, of } from 'rxjs';\nimport { fadeInUp400ms } from '@vex/animations/fade-in-up.animation';\nimport { FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { stagger20ms } from '@vex/animations/stagger.animation';\nimport { VexScrollbarComponent } from '@vex/components/vex-scrollbar/vex-scrollbar.component';\nimport { ChatService } from '../chat.service';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { AsyncPipe, NgFor, NgIf, DatePipe } from '@angular/common';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { Chat, ChatMessage, UserStub } from 'src/app/interfaces/Chat';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { FileSizePipe } from '../file-size.pipe'; // Votre pipe pour la taille des fichiers\nimport { MatTooltipModule } from '@angular/material/tooltip'; // Pour les tooltips\nimport { WebsocketService } from 'src/app/services/websocket.service';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { LanguageService } from 'src/app/services/language.service';\nimport { LoadingSpinnerComponent } from 'src/app/auth/components/loading-spinner/loading-spinner.component';\nimport {\n  FormlyFieldConfig,\n  FormlyFormOptions,\n  FormlyModule\n} from '@ngx-formly/core';\nimport { FormlyMaterialModule } from '@ngx-formly/material';\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport {\n  trigger,\n  state,\n  style,\n  transition,\n  animate\n} from '@angular/animations'; // Pour l'animation\nimport {\n  ChatMessageModel,\n  getChatMessageFormFields\n} from 'src/app/models/chat.model';\nimport { ChatFilePondTypeComponent } from 'src/app/formly-components';\n\nexport const slideInOutAnimation = trigger('slideInOut', [\n  state(\n    'out',\n    style({\n      'max-height': '0px',\n      opacity: '0',\n      visibility: 'hidden',\n      'margin-top': '0'\n    })\n  ),\n  state(\n    'in',\n    style({\n      'max-height': '500px', // Assez grand pour contenir le filepond\n      opacity: '1',\n      visibility: 'visible',\n      'margin-top': '0.5rem' // Ajoute un espace quand il est visible\n    })\n  ),\n  transition('out => in', animate('200ms ease-in-out')),\n  transition('in => out', animate('200ms ease-in-out'))\n]);\n@Component({\n  selector: 'vex-chat-conversation',\n  templateUrl: './chat-conversation.component.html',\n  styleUrls: ['./chat-conversation.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [fadeInUp400ms, stagger20ms, slideInOutAnimation],\n  standalone: true,\n  imports: [\n    MatButtonModule,\n    MatIconModule,\n    NgIf,\n    NgFor,\n    AsyncPipe,\n    MatMenuModule,\n    VexScrollbarComponent,\n    ReactiveFormsModule,\n    MatDividerModule,\n    MatProgressSpinnerModule,\n    FileSizePipe,\n    MatTooltipModule,\n    MatTooltipModule,\n    SharedModule,\n    TranslateModule,\n    LoadingSpinnerComponent,\n    FormlyModule,\n    FormlyMaterialModule, // NOUVEAU\n    MatFormFieldModule,\n    MatInputModule\n  ]\n})\nexport class ChatConversationComponent\n  implements OnInit, OnDestroy, AfterViewInit\n{\n  @ViewChild(ChatFilePondTypeComponent)\n  filePondComponent?: ChatFilePondTypeComponent;\n  @ViewChild(VexScrollbarComponent) scrollbar?: VexScrollbarComponent;\n  chat$: Observable<Chat | null> = this.chatService.currentChat$;\n  messages$: Observable<ChatMessage[]> = this.chatService.currentChatMessages$;\n  isPartnerOnline$!: Observable<boolean>;\n  isChatBlocked = signal(false);\n  isLoadingConversation = signal(false); // Pour le spinner de chargement\n  selectedFile: File | null = null;\n  selectedFilePreview: string | ArrayBuffer | null = null; // Pour la preview d'image avant envoi\n  isUploadingFile = signal(false); // Pour le spinner sur le bouton d'envoi\n  isAttachmentAreaVisible = signal(false);\n  \n  trackByIdFn(index: number, item: ChatMessage): string {\n    return item.id; // Crucial que item.id soit unique et toujours défini\n  }\n\n  private triggerFileBrowse: () => void = () => {};\n  private readonly destroyRef: DestroyRef = inject(DestroyRef);\n  private currentChatId: string | null = null;\n  private currentUserId: string | null = null;\n  private browseRequested = false;\n  form = new FormGroup({});\n  model: ChatMessageModel = {\n    message: null,\n    attachment: null\n  };\n  fields: FormlyFieldConfig[] = [];\n  options: FormlyFormOptions = {};\n\n  constructor(\n    private route: ActivatedRoute,\n    private chatService: ChatService,\n    private cd: ChangeDetectorRef,\n    private websocketService: WebsocketService,\n    public languageService: LanguageService,\n    public translateService: TranslateService\n  ) {\n    effect(() => {\n      // Ce code s'exécutera chaque fois que isAttachmentAreaVisible() ou isChatBlocked() change\n      const isVisible = this.isAttachmentAreaVisible();\n      const isBlocked = this.isChatBlocked();\n      // On reconstruit la configuration des champs pour forcer Formly à réagir\n      this.fields = getChatMessageFormFields(this);\n    });\n    this.onLinePartnerStatusChange();\n    this.initBlockStatusListener();\n    this.chat$\n      .pipe(\n        filter((chat) => !!chat),\n        takeUntilDestroyed(this.destroyRef)\n      )\n      .subscribe((chat) => {\n        this.isChatBlocked.set(chat!.is_blocked ?? false);\n        this.fields = getChatMessageFormFields(this);\n      });\n  }\n\n  isBlocked(): boolean {\n    return this.isChatBlocked();\n  }\n\n  ngOnInit() {\n    this.currentUserId = this.chatService.getCurrentUserId();\n    this.getChatMessageFormFields();\n    this.initChat();\n  }\n\n  onBrowseInit = (browseFn: () => void) => {\n    this.triggerFileBrowse = browseFn;\n\n    if (this.browseRequested) {\n      this.triggerFileBrowse();\n      this.browseRequested = false;\n    }\n  };\n\n  onLinePartnerStatusChange() {\n    this.isPartnerOnline$ = this.chat$.pipe(\n      // this.chat$ est this.chatService.currentChat$\n      switchMap((activeChat) => {\n        // Option 1: Utiliser activeChat.partnerId si votre backend l'envoie via /api/chats\n        if (activeChat && typeof activeChat.partnerId !== 'undefined') {\n          return this.websocketService.isUserOnline(activeChat.partnerId);\n        }\n        // Option 2: Essayer de le déduire de activeChat.participants\n        else if (\n          activeChat &&\n          activeChat.participants &&\n          activeChat.participants.length > 0\n        ) {\n          const currentUserId = this.chatService.getCurrentUserId();\n          const partner = activeChat.participants.find(\n            (p) => String(p.id) !== String(currentUserId)\n          );\n          if (partner && typeof partner.id !== 'undefined') {\n            return this.websocketService.isUserOnline(partner.id);\n          }\n        }\n        return of(false);\n      }),\n      startWith(false),\n      distinctUntilChanged(),\n      tap(),\n      takeUntilDestroyed(this.destroyRef)\n    );\n  }\n\n  toggleAttachmentArea(): void {\n    const wasVisible = this.isAttachmentAreaVisible();\n\n    if (wasVisible) {\n      // Si on ferme, on cache la zone et on réinitialise le formulaire\n      this.isAttachmentAreaVisible.set(false);\n      this.model.message = null;\n      this.browseRequested = false; // Sécurité\n    } else {\n      this.browseRequested = true;\n      this.isAttachmentAreaVisible.set(true);\n    }\n  }\n\n  getChatMessageFormFields() {\n    this.fields = getChatMessageFormFields(this);\n\n    this.translateService.onLangChange.subscribe(() => {\n      this.fields = getChatMessageFormFields(this);\n    });\n  }\n\n  ngAfterViewInit() {\n    this.scrollToBottom(true);\n  }\n\n  initChat() {\n    this.route.paramMap\n      .pipe(\n        map((paramMap) => paramMap.get('chatId')),\n        distinctUntilChanged(),\n        filter((chatId) => !!chatId),\n        switchMap((chatId) =>\n          this.chatService.initialChatsLoaded$.pipe(\n            filter((loaded) => loaded === true),\n            take(1),\n            tap(() => {\n              this.currentChatId = chatId!;\n              this.isLoadingConversation.set(true);\n              this.chatService.setActiveChat(chatId!);\n            })\n          )\n        ),\n        takeUntilDestroyed(this.destroyRef)\n      )\n      .subscribe();\n\n    this.messages$\n      .pipe(\n        takeUntilDestroyed(this.destroyRef),\n        tap(() => {\n          if (this.isLoadingConversation()) {\n            this.isLoadingConversation.set(false);\n          }\n        })\n      )\n      .subscribe((messages: ChatMessage[]) => {\n        this.cd.markForCheck(); // ou detectChanges()\n        this.scrollToBottom(true);\n      });\n  }\n\n  send() {\n    // Utiliser form.value pour obtenir les valeurs actuelles des contrôles\n    const messageContent = this.model.message?.trim() || null;\n    const fileToSend = this.model.attachment || null;\n\n    if (!messageContent && !fileToSend) {\n      return; // Ne rien envoyer si tout est vide\n    }\n\n    if (!this.currentChatId) {\n      console.error('currentChatId is null, cannot send message.');\n      return;\n    }\n\n    if (fileToSend) {\n      this.isAttachmentAreaVisible.set(false);\n    }\n\n    this.isUploadingFile.set(true);\n    this.cd.detectChanges();\n\n    this.chatService\n      .sendMessage(this.currentChatId, messageContent, fileToSend)\n      .subscribe({\n        next: (sentMessage) => {\n          this.model = {\n            message: null,\n            attachment: null\n          };\n          this.isUploadingFile.set(false);\n          this.cd.detectChanges();\n        },\n        error: (err) => {\n          console.error('Failed to send message/file:', err);\n          this.isUploadingFile.set(false);\n          this.cd.detectChanges();\n        }\n      });\n  }\n\n  scrollToBottom(force: boolean = false): void {\n    requestAnimationFrame(() => {\n      if (this.scrollbar && this.scrollbar.scrollbarRef) {\n        const scrollElement = this.scrollbar.scrollbarRef.getScrollElement();\n        const contentElement = this.scrollbar.scrollbarRef.getContentElement();\n\n        if (scrollElement && contentElement) {\n          const scrollBuffer = 100; // Augmenter le buffer pour être plus tolérant\n          const isEffectivelyAtBottom =\n            scrollElement.scrollHeight -\n              scrollElement.scrollTop -\n              scrollElement.clientHeight <\n            scrollBuffer;\n\n          if (force || isEffectivelyAtBottom) {\n            scrollElement.scrollTo({\n              top: contentElement.scrollHeight,\n              behavior: force ? 'auto' : 'smooth' // 'auto' pour les ajouts rapides, 'smooth' si déjà en bas\n            });\n          } else {\n          }\n        } else {\n          console.warn('Scrollbar elements not found for scrollToBottom');\n        }\n      } else {\n        // console.warn('Scrollbar component/ref not found for scrollToBottom');\n      }\n    });\n  }\n\n  getFileIcon(mimeType: string | undefined | null): string {\n    if (!mimeType) return 'mat:insert_drive_file';\n    if (mimeType.startsWith('image/')) return 'mat:image';\n    if (mimeType === 'application/pdf') return 'mat:picture_as_pdf';\n    if (mimeType.includes('word')) return 'mat:description';\n    if (mimeType.includes('excel') || mimeType.includes('spreadsheet'))\n      return 'mat:assessment';\n    if (mimeType.includes('presentation')) return 'mat:slideshow';\n    if (mimeType.includes('zip') || mimeType.includes('archive'))\n      return 'mat:archive';\n    return 'mat:insert_drive_file';\n  }\n\n  openImage(imageUrl: string | undefined): void {\n    if (imageUrl) {\n      window.open(imageUrl, '_blank');\n    }\n  }\n\n  openDrawer() {\n    this.chatService.setDrawerOpen(true);\n  }\n\n  private initBlockStatusListener(): void {\n    // Solution 1: Écouter les changements de statut de blocage depuis le WebSocket (utilisateur propre)\n    this.websocketService.blockStatusUpdate$\n      .pipe(takeUntilDestroyed(this.destroyRef))\n      .subscribe((blockStatusData: { is_blocked: boolean }) => {\n        this.handleBlockStatusUpdate(blockStatusData.is_blocked);\n      });\n\n    // Solution 2: Écouter les événements de blocage sur le canal du chat actif\n    this.chat$\n      .pipe(\n        filter((chat) => !!chat),\n        switchMap((chat) => {\n          if (!chat!.id || !this.currentUserId) {\n            return of(null);\n          }\n\n          // Écouter les événements de blocage spécifiques au chat\n          return new Observable((subscriber) => {\n            const channelName = `chat.${chat!.id}`;\n            const eventName = '.partner.block.status.updated';\n\n            this.websocketService.listenPrivateWebsocket(\n              eventName,\n              channelName,\n              (eventData: any) => {\n                if (eventData && typeof eventData.is_blocked !== 'undefined') {\n                  subscriber.next({ is_blocked: eventData.is_blocked });\n                }\n              }\n            );\n\n            return () => {\n              // Le cleanup sera géré par le système de WebSocket existant\n            };\n          });\n        }),\n        takeUntilDestroyed(this.destroyRef)\n      )\n      .subscribe((blockEvent: any) => {\n        if (blockEvent) {\n          this.handleBlockStatusUpdate(blockEvent.is_blocked);\n        }\n      });\n  }\n\n  private handleBlockStatusUpdate(isBlocked: boolean): void {\n    // Éviter les mises à jour inutiles si la valeur n'a pas changé\n    if (this.isChatBlocked() === isBlocked) {\n      return;\n    }\n\n    // Mettre à jour uniquement le signal local\n    this.isChatBlocked.set(isBlocked);\n\n    // Mettre à jour le chat actuel dans le service si nécessaire\n    const currentChat = (this.chatService as any)._currentChat.getValue();\n    if (currentChat && currentChat.is_blocked !== isBlocked) {\n      const updatedChat = { ...currentChat, is_blocked: isBlocked };\n      (this.chatService as any)._currentChat.next(updatedChat);\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.currentChatId) {\n    }\n  }\n\n  isImage(file: File): boolean {\n    return file.type.startsWith('image/');\n  }\n}\n","<div class=\"relative h-full flex flex-col overflow-hidden\">\n  <!-- Header de la conversation -->\n  <div class=\"px-6 bg-foreground border-b h-16 flex-none flex items-center relative\">\n    <button (click)=\"openDrawer()\" class=\"md:hidden sm:-ml-4 mr-2\" mat-icon-button type=\"button\">\n      <mat-icon svgIcon=\"mat:menu\"></mat-icon>\n    </button>\n\n    <ng-container *ngIf=\"chat$ | async as chat; else headerPlaceholder\">\n      <div class=\"flex items-center gap-3\">\n        <img class=\"hidden sm:block flex-none w-9 h-9 rounded-full object-cover\"\n          [src]=\"chat.imageUrl || 'assets/img/avatars/noavatar.png'\" alt=\"{{ chat.first_name }} avatar\" />\n        <div class=\"flex-1 truncate\">\n          <div class=\"font-semibold text-sm truncate\">{{ chat.first_name }}</div> <!-- Utiliser name ou first_name -->\n          <div class=\"flex items-center gap-1 truncate\">\n            <div class=\"h-1.5 w-1.5 rounded-full\" [class.bg-green-600]=\"isPartnerOnline$ | async\"\n              [class.bg-gray-400]=\"!(isPartnerOnline$ | async)\"></div>\n            <div class=\"text-xs text-gray-600 dark:text-gray-400 truncate\">\n              {{ ((isPartnerOnline$ | async) ? 'user.status.online' : 'user.status.offline') | translate }}\n\n\n            </div>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <ng-template #headerPlaceholder>\n      <div class=\"flex items-center gap-3 opacity-50 animate-pulse\">\n        <div class=\"hidden sm:block flex-none w-9 h-9 rounded-full bg-gray-300 dark:bg-gray-700\"></div>\n        <div class=\"flex-1 truncate\">\n          <div class=\"h-4 bg-gray-300 dark:bg-gray-700 rounded w-24 mb-1\"></div>\n          <div class=\"h-3 bg-gray-200 dark:bg-gray-600 rounded w-16\"></div>\n        </div>\n      </div>\n    </ng-template>\n\n    <span class=\"flex-1\"></span>\n  </div>\n\n  <!-- Corps principal: Spinner ou Messages -->\n  <div class=\"flex-1 relative overflow-hidden\">\n    <div *ngIf=\"isLoadingConversation()\"\n      class=\"absolute inset-0 flex flex-col items-center justify-center bg-background z-20\">\n      <vex-loading-spinner></vex-loading-spinner>\n      <p class=\"mt-3 text-gray-500 dark:text-gray-400\" rxTranslate=\"global.chats.loading_conversation\">Loading\n        conversation...</p>\n    </div>\n\n    <ng-container *ngIf=\"!isLoadingConversation()\">\n      <ng-container *ngIf=\"(messages$ | async) as messages\">\n        <ng-container *ngIf=\"messages.length > 0; else noMessagesTemplate\">\n          <vex-scrollbar class=\"h-full\"> <!-- Doit prendre toute la hauteur disponible -->\n            <div class=\"flex flex-col space-y-2 p-4 sm:p-8 justify-end min-h-full\"> <!-- min-h-full pour justify-end -->\n              <ng-container *ngFor=\"let message of messages; trackBy: trackByIdFn\">\n                <!-- Message du partenaire -->\n                <div *ngIf=\"message.from === 'partner'\" class=\"flex gap-2 w-full\">\n                  <img class=\"w-8 h-8 rounded-full self-end object-cover\"\n                    [src]=\"(chat$ | async)?.imageUrl || 'assets/img/avatars/noavatar.png'\" alt=\"Partner avatar\" />\n                  <div class=\"flex flex-col space-y-1 items-start\">\n                    <div\n                      class=\"px-4 py-3 rounded-xl bg-gray-200 dark:bg-gray-800 inline-flex items-center self-start max-w-[350px] gap-3 cursor-pointer\">\n                      <ng-container *ngIf=\"message.message_type === 'image' && message.file_url\">\n                        <img [src]=\"message.file_url\" alt=\"{{ message.file_name || 'Image' }}\"\n                          class=\"max-w-[200px] sm:max-w-xs max-h-64 rounded mb-1 cursor-pointer object-contain\"\n                          (click)=\"openImage(message.file_url)\">\n                      </ng-container>\n                      <!-- NOUVEAU: Affichage Fichier (non-image) -->\n                      <ng-container *ngIf=\"message.message_type === 'file' && message.file_url\">\n                        <a [href]=\"message.file_url\" target=\"_blank\" download=\"{{ message.file_name }}\"\n                          class=\"flex items-center p-3 rounded-xl bg-primary-500 hover:bg-primary-400 gap-3 cursor-pointer no-underline text-white mb-1\">\n                          <div\n                            class=\"flex-none h-10 w-10 rounded-lg bg-white dark:bg-primary-700 flex items-center justify-center shadow\">\n                            <mat-icon class=\"text-primary-600 dark:text-white scale-125\"\n                              svgIcon=\"mat:insert_drive_file\">{{\n                              getFileIcon(message.file_mime_type) }}</mat-icon>\n                          </div>\n                          <div class=\"flex-1 truncate min-w-0\">\n                            <div class=\"text-sm font-medium truncate\">\n                              {{ message.file_name || 'Attachment' }}\n                            </div>\n                            <div class=\"text-xs text-primary-100 dark:text-primary-200 truncate\">\n                              {{ message.file_size | fileSize }}\n                            </div>\n                          </div>\n                          <mat-icon class=\"flex-none\" svgIcon=\"mat:download\"></mat-icon>\n                        </a>\n                      </ng-container>\n                      <div *ngIf=\"message.message\"\n                        class=\"px-4 py-3 rounded-xl rounded-bl-none bg-gray-200 dark:bg-gray-800 inline-flex self-start max-w-[350px]\">\n                        {{\n                        message.message }}</div>\n                    </div>\n                    <div class=\"flex items-center\">\n                      <div class=\"text-xs font-medium\">\n                        {{ languageService.parseAndFormatDate(message.timestamp || \"\") }}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <!-- Message de \"moi\" -->\n                <div *ngIf=\"message.from === 'me'\" class=\"flex flex-col items-end w-full\">\n                  <div\n                    class=\"px-3 py-2 sm:px-4 sm:py-3 rounded-xl bg-primary-600 text-white inline-block self-end max-w-xs sm:max-w-md md:max-w-lg\">\n                    <ng-container *ngIf=\"message.message_type === 'image' && message.file_url\">\n                      <img [src]=\"message.file_url\" alt=\"{{ message.file_name || 'Image' }}\"\n                        class=\"max-w-[200px] sm:max-w-xs max-h-64 rounded mb-1 cursor-pointer object-contain\"\n                        (click)=\"openImage(message.file_url)\">\n                    </ng-container>\n                    <ng-container *ngIf=\"message.message_type === 'file' && message.file_url\">\n                      <a [href]=\"message.file_url\" target=\"_blank\" download=\"{{ message.file_name }}\"\n                        class=\"flex items-center p-2 bg-primary-500 hover:bg-primary-400 rounded mb-1 no-underline hover:no-underline text-white\">\n                        <mat-icon class=\"mr-2 flex-shrink-0\" svgIcon=\"mat:insert_drive_file\">{{\n                          getFileIcon(message.file_mime_type) }}</mat-icon>\n                        <span class=\"truncate text-sm\">{{ message.file_name || 'Attachment' }}</span>\n                      </a>\n                    </ng-container>\n                    <div *ngIf=\"message.message && message.message_type !== 'file' \" class=\"break-words text-sm\">{{\n                      message.message }}</div>\n                    <mat-progress-spinner *ngIf=\"message.isUploading\" diameter=\"16\" mode=\"indeterminate\"\n                      class=\"self-center mt-1 inline-block\"></mat-progress-spinner>\n                  </div>\n                  <div class=\"self-end flex items-center gap-1 mt-0.5\">\n                    <mat-icon class=\"icon-xs text-gray-500 dark:text-gray-400\" svgIcon=\"mat:done_all\"></mat-icon>\n                    <!-- TODO: Dynamiser statut du message -->\n                    <div class=\"text-xs font-medium text-gray-500 dark:text-gray-400\"> {{\n                      languageService.parseAndFormatDate(message.timestamp || \"\") }}</div>\n                  </div>\n                </div>\n              </ng-container>\n            </div>\n          </vex-scrollbar>\n        </ng-container>\n      </ng-container>\n\n      <ng-template #noMessagesTemplate>\n        <div class=\"flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 p-8\">\n          <mat-icon svgIcon=\"mat:chat_bubble_outline\" class=\"w-16 h-16 mb-4 opacity-50\"></mat-icon>\n          <p class=\"text-lg\" rxTranslate=\"global.chats.not_message\">No messages yet.</p>\n          <p class=\"text-sm\" rxTranslate=\"global.chats.start_conversation\">Start the conversation!</p>\n        </div>\n      </ng-template>\n    </ng-container>\n  </div>\n\n  <!--Footer message -->\n  <div class=\"flex-none bg-foreground border-t p-2\">\n    <ng-container *ngIf=\"!isChatBlocked(); else blockedForm\">\n      <formly-form [form]=\"form\" [model]=\"model\" [fields]=\"fields\" class=\"flex-auto h-full\">\n      </formly-form>\n    </ng-container>\n    <ng-template #blockedForm>\n      <div class=\"flex-1 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 p-4\">\n        <p class=\"text-sm\" rxTranslate=\"global.chats.block_message\">This user is suspended. You cannot send messages to\n          this user.</p>\n      </div>\n    </ng-template>\n  </div>\n</div>","// src/app/pages/apps/chat/chat-empty/chat-empty.component.ts\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from '@angular/core';\r\nimport { scaleFadeIn400ms } from '@vex/animations/scale-fade-in.animation';\r\nimport { ChatService } from '../chat.service'; // Correct\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\n\r\n@Component({\r\n  selector: 'vex-chat-empty',\r\n  templateUrl: './chat-empty.component.html',\r\n  // Pas de styleUrls ici, les styles sont probablement globaux ou dans le template\r\n  animations: [scaleFadeIn400ms],\r\n  changeDetection: ChangeDetectionStrategy.OnPush, // Ajouté pour la cohérence\r\n  standalone: true,\r\n  imports: [MatButtonModule, MatIconModule, SharedModule]\r\n})\r\nexport class ChatEmptyComponent implements OnInit {\r\n  constructor(\r\n    private chatService: ChatService,\r\n    private cd: ChangeDetectorRef // cd est injecté mais pas utilisé dans ce template simple\r\n  ) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  openDrawer() {\r\n    this.chatService.setDrawerOpen(true);\r\n  }\r\n\r\n  // closeDrawer() n'est pas pertinent ici car ce composant n'a pas de drawer à fermer lui-même.\r\n}","<button\r\n  (click)=\"openDrawer()\"\r\n  class=\"absolute top-0 ltr:left-0 ltr:ml-4 rtl:right-0 rtl:mr-4 mt-4 shadow block md:hidden\"\r\n  color=\"primary\"\r\n  mat-fab\r\n  type=\"button\">\r\n  <mat-icon svgIcon=\"mat:menu\"></mat-icon>\r\n</button>\r\n\r\n<div\r\n  @scaleFadeIn\r\n  class=\"w-full h-full p-12 flex flex-col items-center justify-center\">\r\n  <svg\r\n    viewBox=\"0 0 432.68 384.05\"\r\n    width=\"100%\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    xmlns:xlink=\"http://www.w3.org/1999/xlink\">\r\n    <defs>\r\n      <linearGradient\r\n        gradientUnits=\"userSpaceOnUse\"\r\n        id=\"linear-gradient\"\r\n        x1=\"355.23\"\r\n        x2=\"378.79\"\r\n        y1=\"172.71\"\r\n        y2=\"172.71\">\r\n        <stop offset=\"0\" stop-color=\"#e5c5d5\" />\r\n        <stop offset=\"0.42\" stop-color=\"#ead4d1\" />\r\n        <stop offset=\"1\" stop-color=\"#f0e9cb\" />\r\n      </linearGradient>\r\n      <linearGradient\r\n        gradientUnits=\"userSpaceOnUse\"\r\n        id=\"linear-gradient-2\"\r\n        x1=\"374\"\r\n        x2=\"359.59\"\r\n        y1=\"164.44\"\r\n        y2=\"160.85\">\r\n        <stop offset=\"0\" stop-opacity=\"0\" />\r\n        <stop offset=\"0.99\" />\r\n      </linearGradient>\r\n      <linearGradient\r\n        id=\"linear-gradient-3\"\r\n        x1=\"311.63\"\r\n        x2=\"377.86\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"217.67\"\r\n        y2=\"290.28\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-4\"\r\n        x1=\"359.06\"\r\n        x2=\"281.46\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"183.34\"\r\n        y2=\"220.85\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-5\"\r\n        x1=\"329.39\"\r\n        x2=\"340.12\"\r\n        xlink:href=\"#linear-gradient\"\r\n        y1=\"134.53\"\r\n        y2=\"134.53\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-6\"\r\n        x1=\"338.66\"\r\n        x2=\"297.66\"\r\n        xlink:href=\"#linear-gradient\"\r\n        y1=\"134.69\"\r\n        y2=\"129.1\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-7\"\r\n        x1=\"159.94\"\r\n        x2=\"169.82\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"257.05\"\r\n        y2=\"-24.82\" />\r\n      <linearGradient\r\n        gradientUnits=\"userSpaceOnUse\"\r\n        id=\"linear-gradient-8\"\r\n        x1=\"206.01\"\r\n        x2=\"202.42\"\r\n        y1=\"179.18\"\r\n        y2=\"74.65\">\r\n        <stop offset=\"0.02\" stop-color=\"#fff\" stop-opacity=\"0\" />\r\n        <stop offset=\"0.58\" stop-color=\"#fff\" stop-opacity=\"0.39\" />\r\n        <stop offset=\"0.68\" stop-color=\"#fff\" stop-opacity=\"0.68\" />\r\n        <stop offset=\"1\" stop-color=\"#fff\" />\r\n      </linearGradient>\r\n      <linearGradient\r\n        id=\"linear-gradient-9\"\r\n        x1=\"212.98\"\r\n        x2=\"168.69\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"159.3\"\r\n        y2=\"346.02\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-10\"\r\n        x1=\"193.71\"\r\n        x2=\"212.46\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"259.62\"\r\n        y2=\"163.87\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-11\"\r\n        x1=\"205.4\"\r\n        x2=\"210.48\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"212.6\"\r\n        y2=\"314.94\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-12\"\r\n        x1=\"195.06\"\r\n        x2=\"207.16\"\r\n        xlink:href=\"#linear-gradient\"\r\n        y1=\"266.51\"\r\n        y2=\"266.51\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-13\"\r\n        x1=\"203.64\"\r\n        x2=\"215.42\"\r\n        xlink:href=\"#linear-gradient\"\r\n        y1=\"266.34\"\r\n        y2=\"266.34\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-14\"\r\n        x1=\"207.62\"\r\n        x2=\"207.22\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"170.06\"\r\n        y2=\"140.53\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-15\"\r\n        x1=\"342.49\"\r\n        x2=\"340\"\r\n        xlink:href=\"#linear-gradient\"\r\n        y1=\"108.25\"\r\n        y2=\"131.59\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-16\"\r\n        x1=\"340.04\"\r\n        x2=\"346.18\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"102.97\"\r\n        y2=\"117.48\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-17\"\r\n        x1=\"323.17\"\r\n        x2=\"371.17\"\r\n        xlink:href=\"#linear-gradient\"\r\n        y1=\"181.01\"\r\n        y2=\"181.01\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-18\"\r\n        x1=\"201.47\"\r\n        x2=\"206.86\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"263.23\"\r\n        y2=\"218.94\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-19\"\r\n        x1=\"200.14\"\r\n        x2=\"208.3\"\r\n        xlink:href=\"#linear-gradient\"\r\n        y1=\"165.2\"\r\n        y2=\"165.2\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-20\"\r\n        x1=\"198.55\"\r\n        x2=\"208.23\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"160.2\"\r\n        y2=\"179.35\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-21\"\r\n        x1=\"192.02\"\r\n        x2=\"216.6\"\r\n        xlink:href=\"#linear-gradient\"\r\n        y1=\"147.57\"\r\n        y2=\"147.57\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-22\"\r\n        x1=\"203.73\"\r\n        x2=\"204.02\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"131.16\"\r\n        y2=\"144.47\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-23\"\r\n        x1=\"216.19\"\r\n        x2=\"220.16\"\r\n        xlink:href=\"#linear-gradient\"\r\n        y1=\"148.53\"\r\n        y2=\"148.53\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-24\"\r\n        x1=\"188.68\"\r\n        x2=\"193.09\"\r\n        xlink:href=\"#linear-gradient\"\r\n        y1=\"147.92\"\r\n        y2=\"147.92\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-25\"\r\n        x1=\"203.28\"\r\n        x2=\"229.27\"\r\n        xlink:href=\"#linear-gradient\"\r\n        y1=\"185.86\"\r\n        y2=\"185.86\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-26\"\r\n        x1=\"183.58\"\r\n        x2=\"214.3\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"207.1\"\r\n        y2=\"246.59\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-27\"\r\n        x1=\"251.01\"\r\n        x2=\"457.48\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"191.29\"\r\n        y2=\"184.11\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-28\"\r\n        x1=\"242.87\"\r\n        x2=\"254.63\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"341.17\"\r\n        y2=\"281.84\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-29\"\r\n        x1=\"181.22\"\r\n        x2=\"205.05\"\r\n        xlink:href=\"#linear-gradient\"\r\n        y1=\"186.28\"\r\n        y2=\"186.28\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-30\"\r\n        x1=\"333.43\"\r\n        x2=\"322.51\"\r\n        xlink:href=\"#linear-gradient\"\r\n        y1=\"122.82\"\r\n        y2=\"135.59\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-31\"\r\n        x1=\"361.88\"\r\n        x2=\"342.16\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"154.07\"\r\n        y2=\"160.5\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-32\"\r\n        x1=\"330.75\"\r\n        x2=\"299.23\"\r\n        xlink:href=\"#linear-gradient-8\"\r\n        y1=\"163.51\"\r\n        y2=\"153.73\" />\r\n      <linearGradient\r\n        id=\"linear-gradient-33\"\r\n        x1=\"344.9\"\r\n        x2=\"300.42\"\r\n        xlink:href=\"#linear-gradient-2\"\r\n        y1=\"160.92\"\r\n        y2=\"182.86\" />\r\n    </defs>\r\n    <path\r\n      d=\"M159.13,28c-11.33,13.37-18,30.64-31.27,42.05C115.8,80.37,99.77,84.6,85.9,92.37a91,91,0,0,0-28,134.39c5.59,7.37,12.46,14.15,15.29,23,5.38,16.71-5.38,35.19-1,52.18,2.42,9.34,9.09,16.9,15.56,24.06,13.51,15,28.14,30.69,47.62,36,24.17,6.59,50.45-4.37,74.74,1.8,11.5,2.92,21.69,9.49,32.6,14.15,39.71,17,89.74,5.58,118.19-26.92,5.92-6.75,11.07-14.39,18.47-19.48,17.85-12.29,42.67-6.18,62.87-14.05,23.34-9.1,36.16-38.81,26.75-62-5.71-14.09-17.86-24.77-23.85-38.74-17.29-40.3,22.16-88.77,4.49-128.91-13.11-29.78-51.05-39-83.58-38.17-18.33.46-37.21,2.8-54.6-3C259.94,29.28,211-33.25,159.13,28Z\"\r\n      fill=\"#5c77ff\"\r\n      opacity=\"0.18\"\r\n      style=\"isolation: isolate\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M147.06,312c-7.48,0-16.09.54-20.58,6.52l29.24,6.94c1.76.41,3.68.93,4.74,2.4,1.79,2.49.11,6,.83,9,1.24,5.14,8.17,5.84,13.44,5.43l46.71-3.68c11.66-.92,24.18-1.64,34.21,4.36,4.71,2.82,8.54,7,13.37,9.58,10.36,5.58,23.26,3,34.06-1.65s20.83-11.4,32.26-14.2c9.46-2.32,19.41-1.85,28.93-3.9a55.85,55.85,0,0,0,26-13.51c-.58.54-25.67-5.42-28.76-5.54-7.23-.28-14.47.41-21.71.39-21.07-.06-42.16-.85-63.22-1.16Q211.85,312,147.06,312Z\"\r\n      fill=\"#5c77ff\"\r\n      opacity=\"0.18\"\r\n      style=\"isolation: isolate\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M358.48,159.7a64.91,64.91,0,0,0,6.54,6.93.5.5,0,0,0,.26.15.45.45,0,0,0,.31-.09l.84-.45a29,29,0,0,0,9.72-1.41,2.29,2.29,0,0,1,1.83,0,1.59,1.59,0,0,1,.6.75,3.06,3.06,0,0,1-2.06,4,4,4,0,0,1-.75,4.43c-.87.85-2.09,1.26-3,2-2.25,1.88-2.27,5.26-3.47,7.94a3.16,3.16,0,0,1-1.09,1.43c-1.2.77-2.78,0-4-.82a45.18,45.18,0,0,1-5.13-4.15,7.48,7.48,0,0,1-1.89-2.37,8.36,8.36,0,0,1-.52-2.45l-1.44-13.19a1.47,1.47,0,0,1,.06-.78,1.32,1.32,0,0,1,.72-.54C357.05,160.69,357.37,159.61,358.48,159.7Z\"\r\n      fill=\"url(#linear-gradient)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M365.79,164.49a20.33,20.33,0,0,1-1.3,2.14,9.45,9.45,0,0,0-1.09,1.58A6.39,6.39,0,0,0,363,171a2.72,2.72,0,0,0,.71,2.18,2.41,2.41,0,0,0,1.17.4,17.1,17.1,0,0,0,5.15,0,5.19,5.19,0,0,0,2.1-.71,5.67,5.67,0,0,0,1.57-1.83,118.67,118.67,0,0,0,8-14.7,1.26,1.26,0,0,0,.13-.43,1.1,1.1,0,0,0-.59-.92,5.62,5.62,0,0,0-2.55-.76,32.4,32.4,0,0,0-5-.22,4.42,4.42,0,0,0-1.62.28C371.22,154.67,366.9,162.49,365.79,164.49Z\"\r\n      fill=\"#5c77ff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M365.79,164.49a20.33,20.33,0,0,1-1.3,2.14,9.45,9.45,0,0,0-1.09,1.58A6.39,6.39,0,0,0,363,171a2.72,2.72,0,0,0,.71,2.18,2.41,2.41,0,0,0,1.17.4,17.1,17.1,0,0,0,5.15,0,5.19,5.19,0,0,0,2.1-.71,5.67,5.67,0,0,0,1.57-1.83,118.67,118.67,0,0,0,8-14.7,1.26,1.26,0,0,0,.13-.43,1.1,1.1,0,0,0-.59-.92,5.62,5.62,0,0,0-2.55-.76,32.4,32.4,0,0,0-5-.22,4.42,4.42,0,0,0-1.62.28C371.22,154.67,366.9,162.49,365.79,164.49Z\"\r\n      fill=\"url(#linear-gradient-2)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M367.08,165.43a17.87,17.87,0,0,1-1.29,2.14,9.53,9.53,0,0,0-1.09,1.59,6.37,6.37,0,0,0-.39,2.82,2.69,2.69,0,0,0,.71,2.18,2.48,2.48,0,0,0,1.17.4,17.36,17.36,0,0,0,5.14,0,5.18,5.18,0,0,0,2.11-.71A6,6,0,0,0,375,172a118.61,118.61,0,0,0,8-14.7,1.36,1.36,0,0,0,.14-.43,1.1,1.1,0,0,0-.59-.92,5.79,5.79,0,0,0-2.55-.77,32.52,32.52,0,0,0-5-.21,4.26,4.26,0,0,0-1.62.28C372.52,155.62,368.19,163.43,367.08,165.43Z\"\r\n      fill=\"#5c77ff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M380.66,254.64a606.84,606.84,0,0,1-45.27,48.1,3,3,0,0,1-2.26,1.12,2.81,2.81,0,0,1-1.32-.74,35.61,35.61,0,0,1-8.48-10.54,1.22,1.22,0,0,1,.31-1.77Q341.51,272,358.73,252.5a3.27,3.27,0,0,0,.89-1.46,3.36,3.36,0,0,0-.8-2.36,155.83,155.83,0,0,1-15.08-29.2,3.12,3.12,0,0,1-.3-1.86,3,3,0,0,1,.9-1.32c3.64-3.59,14.8-11.88,19-5.63,2.59,3.87,4.1,9,5.88,13.28q2.94,7,5.62,14.18Q377.92,246.32,380.66,254.64Z\"\r\n      fill=\"#3e3e54\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M380.66,254.64a606.84,606.84,0,0,1-45.27,48.1,3,3,0,0,1-2.26,1.12,2.81,2.81,0,0,1-1.32-.74,35.61,35.61,0,0,1-8.48-10.54,1.22,1.22,0,0,1,.31-1.77Q341.51,272,358.73,252.5a3.27,3.27,0,0,0,.89-1.46,3.36,3.36,0,0,0-.8-2.36,155.83,155.83,0,0,1-15.08-29.2,3.12,3.12,0,0,1-.3-1.86,3,3,0,0,1,.9-1.32c3.64-3.59,14.8-11.88,19-5.63,2.59,3.87,4.1,9,5.88,13.28q2.94,7,5.62,14.18Q377.92,246.32,380.66,254.64Z\"\r\n      fill=\"url(#linear-gradient-3)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M328.61,231.43c1.45,10.89,6.6,21,8.06,31.9.49,3.6.56,7.25,1.16,10.83.82,5,2.63,9.71,3.55,14.65,1.43,7.63.74,15.58,2.67,23.1a3.5,3.5,0,0,0,1,2,3.74,3.74,0,0,0,2.43.57l8.58.05a297.28,297.28,0,0,0-1.94-50.7c-.42-3.39-.9-6.79-1.12-10.2-.83-13,2.2-26.21.15-39.11a174,174,0,0,1-23.06.52c-1.71-.08-3.13-.69-3.56.89-.29,1,.9,4,1.06,5.17C328.07,224.51,328.15,228,328.61,231.43Z\"\r\n      fill=\"#3e3e54\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M364.16,211.33a4.55,4.55,0,0,1-1.62,1.49c-3.46,2.22-7,4.49-11.09,5.11-1.8.27-3.65.21-5.45.51-2.13.36-4.14,1.24-6.25,1.75a18.81,18.81,0,0,1-9.71-.26,17.29,17.29,0,0,1-3.52-1.42,11.18,11.18,0,0,1-1.66-1.07,5.55,5.55,0,0,1-1.8-2.3,8.14,8.14,0,0,1-.29-3.58v0c.72-10.23,2.21-21-2-30.34l-1.54.25a1.7,1.7,0,0,1-.22,0h0l-.16,0-.71.11A92.76,92.76,0,0,1,314.37,161c-.27-4.16-.22-8.56,1.85-12.18a16.62,16.62,0,0,1,7.52-6.4,18.88,18.88,0,0,1,5.32-1.5,56.13,56.13,0,0,1,10.61,0l7.09.45a6.71,6.71,0,0,1,2.39.45,5.33,5.33,0,0,1,1.66,1.33c3.68,4.06,4.77,10,8.28,14.12,0,0,0,0,0,0,.23.28.47.55.73.81.06.06.13.12.18.18l0,0a1,1,0,0,1,.37.86.19.19,0,0,1,0,.09v0a1.5,1.5,0,0,1-.42.59c-1.14,1.12-2.28,2.23-3.4,3.35.07.82.1,1.67.12,2.54.1,3.26,0,6.78.61,9.81q3.46,16.35,6.92,32.72A4.46,4.46,0,0,1,364.16,211.33Z\"\r\n      fill=\"#5c77ff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M356.44,186.91a19.28,19.28,0,0,1-7,6c-3.22,1.59-6.8,2.24-10.29,3.08-2.12.51-4.42,1.23-5.63,3.06a9.26,9.26,0,0,0-1,4.95c-.07,4-.16,8-.23,12.06,0,1.23-.12,2.63-1.08,3.42a2.46,2.46,0,0,1-1.1.5,4.17,4.17,0,0,1-1.89-.14,6.79,6.79,0,0,1-3.29-2.35,9.92,9.92,0,0,1-1.82-4,12.71,12.71,0,0,1-.27-1.95c.72-10.23,2.21-21-2-30.34,5.27-7.66,7.7-3.33,13.61.53a22.83,22.83,0,0,0,4.14,2.06,18.2,18.2,0,0,0,8.06,1.61c3.16-.26,6-1.85,8.91-3.16C359.89,180.24,357.73,185.13,356.44,186.91Z\"\r\n      fill=\"url(#linear-gradient-4)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M330.4,136c-.3,1.49-1,4.9-1,4.9a5.37,5.37,0,0,0,1.81,2,9.9,9.9,0,0,0,4.42,1.75c1.24.17,2.72,0,3.35-1.1a3.89,3.89,0,0,0,.4-1.52l.68-5.89a6.11,6.11,0,0,0,0-1.54,4.44,4.44,0,0,0-.6-1.48c-1.21-2-6.2-10.79-7.28-8.4S330.81,134,330.4,136Z\"\r\n      fill=\"url(#linear-gradient-5)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M334.33,135.3a14.85,14.85,0,0,0,5.22,5.81,17.87,17.87,0,0,1,.59-4.77c.35-1.31.85-2.73.32-4a4.45,4.45,0,0,0-1-1.43c-1.44-1.44-4.57-3.77-6.81-3.08-.82.25-.63.38-.43,1.26.15.69.32,1.38.52,2.06A22.73,22.73,0,0,0,334.33,135.3Z\"\r\n      fill=\"url(#linear-gradient-6)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M213.25,104.58a3.75,3.75,0,0,1-3.75-3.74V72.71a3.75,3.75,0,1,1,7.49,0v28.13A3.75,3.75,0,0,1,213.25,104.58Z\"\r\n      fill=\"#5c77ff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <ellipse cx=\"167.16\" cy=\"195.4\" fill=\"#5c77ff\" rx=\"79.51\" ry=\"95.74\" />\r\n    <ellipse\r\n      cx=\"162.27\"\r\n      cy=\"190.69\"\r\n      fill=\"url(#linear-gradient-7)\"\r\n      rx=\"72.12\"\r\n      ry=\"80.79\" />\r\n    <path\r\n      d=\"M206.62,101.33c-43.91,0-79.5,42.87-79.5,95.75s35.59,95.74,79.5,95.74,79.51-42.87,79.51-95.74S250.54,101.33,206.62,101.33Zm-2.5,176.51c-41.14,0-74.5-37.47-74.5-83.67S163,110.5,204.12,110.5s74.51,37.46,74.51,83.67S245.27,277.84,204.12,277.84Z\"\r\n      fill=\"url(#linear-gradient-8)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M172,205.71c1.82.1,1.42-3.36,1.58-5.18.52-5.92-.15-11.91.44-17.82s2.74-12.08,7.55-15.58c1.45-1,3.14-1.87,4.21-3.3,1.26-1.67,1.47-3.89,2.2-5.85,2-5.47,8.37-8.59,14.18-8s10.95,4.32,14.46,9c2,2.62,3.59,5.63,6.24,7.56,1.38,1,3,1.67,4.29,2.76a12.69,12.69,0,0,1,3.75,7c1.2,5.2.79,10.62,1.07,16s1.39,10.93,5,14.86c1.9,2.06,4.37,3.53,6.28,5.58s3.23,5.08,2.11,7.65-3.83,3.54-6.25,4.63c-9.71,4.34-17.93,12.09-28.28,14.5-9.28,2.16-19.13-.34-27.58-4.74S167.62,224,160,218.28C145.47,207.54,160,205,172,205.71Z\"\r\n      fill=\"url(#linear-gradient-9)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M176.77,224.52c-3.4-6.55-9.06-13.48-16.42-12.82-1.86.17-3.67.85-5.54,1-3.74.23-7.22-1.75-10.84-2.73s-8.36-.42-9.86,3c-.93,2.14-.24,4.61.53,6.81,6,17,16.65,32.53,31.44,42.76s33.78,14.78,51.29,10.67c7.55-1.78,14.67-5.07,21.51-8.73,5.76-3.08,11.45-6.5,16-11.21,8.12-8.47,11.69-20.2,15-31.46,1-3.51,1.85-7.87-.83-10.36a7.34,7.34,0,0,0-4.82-1.66,14,14,0,0,0-10.2,4c-1.1,1.1-2.08,2.42-3.54,2.95-1.91.7-4-.18-6-.44-9.85-1.27-15.5,11.43-24.75,15.07-4.68,1.84-9.82,1.07-14.59,2.44-4.39,1.26-8.16,5.18-12.65,5.9C183.68,241.1,180.13,231,176.77,224.52Z\"\r\n      fill=\"#fff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M176.77,224.52c-3.4-6.55-9.06-13.48-16.42-12.82-1.86.17-3.67.85-5.54,1-3.74.23-7.22-1.75-10.84-2.73s-8.36-.42-9.86,3c-.93,2.14-.24,4.61.53,6.81,6,17,16.65,32.53,31.44,42.76s33.78,14.78,51.29,10.67c7.55-1.78,14.67-5.07,21.51-8.73,5.76-3.08,11.45-6.5,16-11.21,8.12-8.47,11.69-20.2,15-31.46,1-3.51,1.85-7.87-.83-10.36a7.34,7.34,0,0,0-4.82-1.66,14,14,0,0,0-10.2,4c-1.1,1.1-2.08,2.42-3.54,2.95-1.91.7-4-.18-6-.44-9.85-1.27-15.5,11.43-24.75,15.07-4.68,1.84-9.82,1.07-14.59,2.44-4.39,1.26-8.16,5.18-12.65,5.9C183.68,241.1,180.13,231,176.77,224.52Z\"\r\n      fill=\"url(#linear-gradient-10)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M175.34,224.93c-1.44-.22-2.68,1.29-2.73,2.75a7.86,7.86,0,0,0,1.43,4.08l5.7,9.88c-6.36,1-11.93-3.8-17.31-7.33-1.86-1.21-4.7-2.16-6-.36-.92,1.27-.28,3.15.89,4.18a14.56,14.56,0,0,0,4.19,2.09c5.06,2.11,9,6.36,13.93,8.7,3.24,1.52,6.8,2.18,10.19,3.33,3.22,1.09,6.63,3,7.43,6.34.59,2.47-.45,5-.44,7.56s2.06,5.53,4.47,4.74c1.54-.51,2.23-2.25,2.73-3.79l3.66-11.3c4,2.65,3.61,9.49,7.91,11.55l1.05-7.21a5.3,5.3,0,0,1,.54-2,4.54,4.54,0,0,1,3.15-1.84c2.47-.5,5.07-.3,7.46-1.09,3.45-1.15,5.88-4.16,8.57-6.61,3.12-2.85,6.76-5.06,10.06-7.71a48,48,0,0,0,14.18-19c-2.33-.78-4.84.86-6.24,2.88s-2.12,4.46-3.53,6.49a11.62,11.62,0,0,1-10.64,4.8,6.32,6.32,0,0,1,1.85-6.9,8.8,8.8,0,0,0,1.44-1.21c1.71-2.06-.64-5.4-3.31-5.64s-5.1,1.36-7.37,2.8a81.28,81.28,0,0,1-14.37,7.24c-3.54,1.37-7.29,2.51-11.08,2.21-5.8-.45-10.74-4-16.43-4.91-2.2-.34-5.25.84-7.12-.1S177.74,225.29,175.34,224.93Z\"\r\n      fill=\"url(#linear-gradient-11)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M196.66,268a10,10,0,0,0-1.58,3.74,7.49,7.49,0,0,0,1.1,4.14c.58,1.1,1.48,2.3,2.71,2.22a3.16,3.16,0,0,0,1.29-.48,7.91,7.91,0,0,0,2.06-1.55c1.4-1.58,1.64-3.86,1.58-6s-.35-4.27.23-6.29c.73-2.55,2.79-4.65,3.11-7.28-1.41-.39-4.17-1.79-5.59-1.54s-1.17,2.12-1.37,3.23A28.74,28.74,0,0,1,196.66,268Z\"\r\n      fill=\"url(#linear-gradient-12)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M205.69,260.1a14.24,14.24,0,0,1,.82,2.38,14,14,0,0,1,.24,2.42l.49,10.47a6.07,6.07,0,0,0,.7,3.1c.91,1.4,2.8,1.81,4.45,1.61a2.71,2.71,0,0,0,1.47-.54,2.78,2.78,0,0,0,.68-1,8.7,8.7,0,0,0,.81-2.53c.33-2.31-.6-4.61-1.64-6.7s-2.22-4.19-2.45-6.52c-.19-1.84.25-3.71.06-5.55-.16-1.57-.78-3.11-.66-4.68a30.65,30.65,0,0,0-3.42.62c-.9.22-2.68.43-3.4,1C203,255,205.24,259,205.69,260.1Z\"\r\n      fill=\"url(#linear-gradient-13)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M189.17,150.1a15.25,15.25,0,0,1-3.38-10.53,16.22,16.22,0,0,1,4.49-10.15c2-2.06,4.69-3.65,7.51-3.37,1.06-1.46,3.17-1.88,4.93-2.27a17.55,17.55,0,0,1,9.24.3,13,13,0,0,1,7.22,5.62,19.54,19.54,0,0,1,2.19,8.59,46,46,0,0,0,1,8.87c.79,2.88,2.48,5.67,5.16,7a2.57,2.57,0,0,1,1.11.76c.52.76,0,1.8-.72,2.42a6.56,6.56,0,0,1-5.5,1.54l.86,1.89a.45.45,0,0,1-.19.72,5.15,5.15,0,0,1-5.19.11,8,8,0,0,1-.11,2.24,13.45,13.45,0,0,1-5.77-2.06c0,1.21-1.32,2.07-2.52,2a8.44,8.44,0,0,1-3.35-1.31,2,2,0,0,0-1-.33c-.73,0-1.22.7-1.78,1.16a4.38,4.38,0,0,1-3.76.66,11.54,11.54,0,0,1-3.54-1.73c.18.72-.58,1.41-1.32,1.41a3.09,3.09,0,0,1-1.95-.95,7.76,7.76,0,0,1-2.59-4.28,4.81,4.81,0,0,1-1.6,1.38,1.64,1.64,0,0,1-1.94-.34c-.55-.71-.17-1.72.23-2.52l1.39-2.81C189,152.67,190.2,151.36,189.17,150.1Z\"\r\n      fill=\"#3e3e54\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M228,157.33a6.52,6.52,0,0,1-5.49,1.54l.87,1.89a.57.57,0,0,1,.07.44.63.63,0,0,1-.27.29,5.2,5.2,0,0,1-5.19.1,8.39,8.39,0,0,1-.11,2.24,13.45,13.45,0,0,1-5.77-2.06c.05,1.21-1.31,2.06-2.53,2a8,8,0,0,1-3.34-1.31,2.12,2.12,0,0,0-1-.33c-.73,0-1.22.71-1.78,1.17a4.38,4.38,0,0,1-3.76.66,11.65,11.65,0,0,1-3.54-1.73c.18.72-.57,1.4-1.32,1.41a3.09,3.09,0,0,1-1.95-.95,7.7,7.7,0,0,1-2.59-4.29,4.73,4.73,0,0,1-1.6,1.39,1.67,1.67,0,0,1-2-.34c-.54-.71-.15-1.73.24-2.52.47-.94.92-1.87,1.39-2.81.72-1.45,1.9-2.76.87-4a14.83,14.83,0,0,1-2.85-5.5,15.89,15.89,0,0,1-.53-5,16.27,16.27,0,0,1,4.49-10.15c2-2,4.68-3.64,7.51-3.36,1.05-1.46,3.17-1.88,4.93-2.27a17.56,17.56,0,0,1,9.24.3,13,13,0,0,1,7.22,5.62,19.53,19.53,0,0,1,2.18,8.59,52.45,52.45,0,0,0,.88,8.22c0,.23.1.44.16.65.8,2.88,2.49,5.68,5.17,7a2.93,2.93,0,0,1,1.12.76C229.21,155.67,228.64,156.71,228,157.33Z\"\r\n      fill=\"url(#linear-gradient-14)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M352,128.59a14.52,14.52,0,0,1-3.65,7.2c-2,1.9-5,2.9-7.51,1.91a11,11,0,0,1-4.3-3.7,21.37,21.37,0,0,1-2.89-4.35,13.85,13.85,0,0,1-2.92-2.37,5.3,5.3,0,0,1-1.76-3.87c.12-1.45,1.66-2.8,3-2.24,1.32-1.89,1.55-4.34,2.6-6.4a9.8,9.8,0,0,1,7.68-5.1,12,12,0,0,1,8.87,3A5.46,5.46,0,0,1,353,115.2c.51,1.81.2,4.27,0,6.13A49.34,49.34,0,0,1,352,128.59Z\"\r\n      fill=\"url(#linear-gradient-15)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M355.16,107.8c-3.29.34-6.26-1.81-9-3.71s-6.05-3.73-9.19-2.67a5.92,5.92,0,0,0-2.28,1.43,5.89,5.89,0,0,1-1.48,1.3,7.81,7.81,0,0,1-1.3.38c-2.61.78-3.59,4-3.81,6.68a33.31,33.31,0,0,0,0,5.19c.15,1.88.62,4,2.25,4.95.89.51,2.09.64,2.64,1.51.23.36.41.89.84.91a.78.78,0,0,0,.56-.25c1.68-1.47.83-4.2,1.24-6.4a1.76,1.76,0,0,1,.27-.7,2.5,2.5,0,0,1,1-.66,5.92,5.92,0,0,0,2.79-3.18,14.79,14.79,0,0,0,6.45,4.16,7.74,7.74,0,0,1,2.33,1,14.23,14.23,0,0,1,1.58,1.71c2.18,2.24,6.19,1.92,8.45-.24a9.18,9.18,0,0,0,2.12-8.7,2.89,2.89,0,0,1-2.82,0c.26.15,2.55-3.4,2-4S356,107.71,355.16,107.8Z\"\r\n      fill=\"#3e3e54\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M355.16,107.8c-3.29.34-6.26-1.81-9-3.71s-6.05-3.73-9.19-2.67a5.92,5.92,0,0,0-2.28,1.43,5.89,5.89,0,0,1-1.48,1.3,7.81,7.81,0,0,1-1.3.38c-2.61.78-3.59,4-3.81,6.68a33.31,33.31,0,0,0,0,5.19c.15,1.88.62,4,2.25,4.95.89.51,2.09.64,2.64,1.51.23.36.41.89.84.91a.78.78,0,0,0,.56-.25c1.68-1.47.83-4.2,1.24-6.4a1.76,1.76,0,0,1,.27-.7,2.5,2.5,0,0,1,1-.66,5.92,5.92,0,0,0,2.79-3.18,14.79,14.79,0,0,0,6.45,4.16,7.74,7.74,0,0,1,2.33,1,14.23,14.23,0,0,1,1.58,1.71c2.18,2.24,6.19,1.92,8.45-.24a9.18,9.18,0,0,0,2.12-8.7,2.89,2.89,0,0,1-2.82,0c.26.15,2.55-3.4,2-4S356,107.71,355.16,107.8Z\"\r\n      fill=\"url(#linear-gradient-16)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M329.88,170.55a113.12,113.12,0,0,0,9.61,8.69,3,3,0,0,0,1.06.62,3,3,0,0,0,1.59-.19c1.15-.37,2.29-.75,3.43-1.14A65.93,65.93,0,0,0,355,174.8c3-1.57,5.51-6.65,8.37-6.59.06.58-.42,1.37-.36,1.95a.84.84,0,0,0,.18.52.77.77,0,0,0,.39.17c2,.41,3.93-.82,5.82-1.62a1.68,1.68,0,0,1,.95-.19c.8.15,1,1.3.58,2a11.18,11.18,0,0,1-1.7,1.74c-1.48,1.6-1.42,4.08-2.45,6a5.8,5.8,0,0,1-4.34,3,13,13,0,0,0-1.54.18,6.82,6.82,0,0,0-2.29,1.31,66.44,66.44,0,0,1-12.3,6.68,25.26,25.26,0,0,1-5.37,2,38.79,38.79,0,0,0-4.3.81c-1.28.42-2.5,1.18-3.85,1.1-1.93-.13-3.27-1.92-4.34-3.54-2-3.08-4.62-6.65-5.27-10.37-.31-1.76,1.32-3,2.4-4.24Z\"\r\n      fill=\"url(#linear-gradient-17)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M346.08,321.55a2,2,0,0,0,.3,1.13,1.62,1.62,0,0,0,.67.45,9,9,0,0,0,3.06.51q10.25.48,20.5.16a16,16,0,0,0-9.34-5.27c-1.69-.29-3.43-.31-5.1-.73a1,1,0,0,1-.43-.2,1,1,0,0,1-.19-.52l-.42-2.68A.63.63,0,0,0,355,314a.65.65,0,0,0-.47-.13l-4.69-.08c-.92,0-2.22-.24-3,.34s-.72,1.9-.76,2.82Q346,319.27,346.08,321.55Z\"\r\n      fill=\"#3e3e54\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M317.43,298.65a2.08,2.08,0,0,0-.7,1,2,2,0,0,0,.18,1.14c1.77,4.66,5.27,8.41,8.7,12,2.76,2.92,5.58,5.89,9.11,7.81,1.68-4.94-.09-10.58-3.42-14.6a2.6,2.6,0,0,1-.78-1.55,6.15,6.15,0,0,1,.56-1.55,3.58,3.58,0,0,0-1-3,22.72,22.72,0,0,0-5.82-5.75c-1.64-1-2-.23-3.28,1Z\"\r\n      fill=\"#3e3e54\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M186.62,169.87a8,8,0,0,0-3.34,2.42,8.38,8.38,0,0,0-1.15,3.61c-1.95,13.2-.91,26.63.13,39.93l1.46,18.6c.27,3.52.6,7.2,2.51,10.17a14.46,14.46,0,0,0,5.42,4.69c7.21,3.84,15.86,3.24,24,2.55a15.78,15.78,0,0,0,5.25-1.05,11.45,11.45,0,0,0,5.36-6c1.94-4.29,2.27-9.12,2.38-13.84.29-12.55-.85-25.13-.07-37.67.44-7,1.29-14.69-2.84-20.34a17.86,17.86,0,0,0-10.57-6.39C206.1,164.52,195,166,186.62,169.87Z\"\r\n      fill=\"#fff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M179.81,229.27a32.43,32.43,0,0,0,.77,7.8,21.62,21.62,0,0,0,2.07,5.7A19.93,19.93,0,0,0,192.2,251a38.85,38.85,0,0,0,12.47,2.8,35.79,35.79,0,0,0,13.21-1,17.83,17.83,0,0,0,10.44-7.75c2.59-4.48,2.52-10,2.26-15.13-.29-5.54-.75-11.19-2.9-16.31a4.09,4.09,0,0,0-1-1.56,3,3,0,0,0-3.67.16,9,9,0,0,0-2.31,3.2L214,228.55a6.24,6.24,0,0,1-1.45,2.08c-1.36,1.12-3.4.88-5,.22a18.15,18.15,0,0,1-7.17-5.82c-1.93-2.44-3.52-5.13-5.37-7.63a11.84,11.84,0,0,0-2.5-2.64,11.16,11.16,0,0,0-6.05-1.65c-2.19-.09-2.7.24-3.55,2.3A39.18,39.18,0,0,0,179.81,229.27Z\"\r\n      fill=\"#3e3e54\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M179.81,229.27a32.43,32.43,0,0,0,.77,7.8,21.62,21.62,0,0,0,2.07,5.7A19.93,19.93,0,0,0,192.2,251a38.85,38.85,0,0,0,12.47,2.8,35.79,35.79,0,0,0,13.21-1,17.83,17.83,0,0,0,10.44-7.75c2.59-4.48,2.52-10,2.26-15.13-.29-5.54-.75-11.19-2.9-16.31a4.09,4.09,0,0,0-1-1.56,3,3,0,0,0-3.67.16,9,9,0,0,0-2.31,3.2L214,228.55a6.24,6.24,0,0,1-1.45,2.08c-1.36,1.12-3.4.88-5,.22a18.15,18.15,0,0,1-7.17-5.82c-1.93-2.44-3.52-5.13-5.37-7.63a11.84,11.84,0,0,0-2.5-2.64,11.16,11.16,0,0,0-6.05-1.65c-2.19-.09-2.7.24-3.55,2.3A39.18,39.18,0,0,0,179.81,229.27Z\"\r\n      fill=\"url(#linear-gradient-18)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M183.75,171.82c-1.64.74-2.65,2.4-3.46,4a45.17,45.17,0,0,0-4.75,19.72c0,1.54.12,3.25,1.22,4.33,1.47,1.45,3.87,1.1,5.85.54,2.81-.79,5.92-2.21,6.65-5,.87-3.35-2.27-7.89-3.21-11.08C185.69,183.13,182.71,172.29,183.75,171.82Z\"\r\n      fill=\"#fff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M200.41,167.69a6.2,6.2,0,0,0,.55,2.14,4.21,4.21,0,0,0,2.51,1.95,2.29,2.29,0,0,0,.86.11,2.1,2.1,0,0,0,.69-.2,4.71,4.71,0,0,0,1.77-1.42,7.48,7.48,0,0,0,1.24-3.48,36.4,36.4,0,0,0,.24-6.35,1.86,1.86,0,0,0-.55-1.54,1.9,1.9,0,0,0-.78-.22,28.53,28.53,0,0,0-3.06-.17,13.47,13.47,0,0,0-3.11.15c-.48.11-.42.31-.47.79s-.08,1-.11,1.53c-.06,1.06-.07,2.12,0,3.17S200.27,166.52,200.41,167.69Z\"\r\n      fill=\"url(#linear-gradient-19)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M200.34,167.38a3,3,0,0,1,.47-1.18,1.82,1.82,0,0,1,1.28-.56,27.58,27.58,0,0,1,7.7,0,2.26,2.26,0,0,1,1.74.88,3.94,3.94,0,0,1,.39,2.1,76.85,76.85,0,0,1-.76,11.76c-.29,1.84-.78,3.88-2.09,4.75s-2.58.35-3.85-.08l-3.43-1.19a3.67,3.67,0,0,1-1-.44c-1.55-1.14-1.71-4.49-1.67-6.51A44.91,44.91,0,0,1,200.34,167.38Z\"\r\n      fill=\"#5c77ff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M200.34,167.38a3,3,0,0,1,.47-1.18,1.82,1.82,0,0,1,1.28-.56,27.58,27.58,0,0,1,7.7,0,2.26,2.26,0,0,1,1.74.88,3.94,3.94,0,0,1,.39,2.1,76.85,76.85,0,0,1-.76,11.76c-.29,1.84-.78,3.88-2.09,4.75s-2.58.35-3.85-.08l-3.43-1.19a3.67,3.67,0,0,1-1-.44c-1.55-1.14-1.71-4.49-1.67-6.51A44.91,44.91,0,0,1,200.34,167.38Z\"\r\n      fill=\"url(#linear-gradient-20)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M201.24,168.65a2.87,2.87,0,0,1,.47-1.18,1.85,1.85,0,0,1,1.27-.56,27.66,27.66,0,0,1,7.71,0,2.31,2.31,0,0,1,1.74.88,4,4,0,0,1,.39,2.1,76.85,76.85,0,0,1-.77,11.76c-.28,1.85-.78,3.88-2.09,4.75-1.16.78-2.58.36-3.85-.08l-3.42-1.19a3.53,3.53,0,0,1-1-.44c-1.55-1.14-1.71-4.49-1.67-6.51A44.28,44.28,0,0,1,201.24,168.65Z\"\r\n      fill=\"#5c77ff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M193.43,152.55a17.4,17.4,0,0,0,2.78,3.57c1.46,1.56,3,3.16,5.09,3.72a10.32,10.32,0,0,0,5.87-.57,15.06,15.06,0,0,0,2.43-1,15.7,15.7,0,0,0,4.9-4.77,10.47,10.47,0,0,0,1.36-2.24,9.71,9.71,0,0,0,.63-2.94,28.6,28.6,0,0,0,0-4.44,9.07,9.07,0,0,0-1.71-5.31,7.66,7.66,0,0,0-2.61-1.92c-3.95-1.91-8.55-1.77-12.92-1.33-2,.21-4.12.54-5.55,1.94-1.87,1.83-1.85,4.07-1.64,6.43C192.38,146.79,191.89,149.68,193.43,152.55Z\"\r\n      fill=\"url(#linear-gradient-21)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M222.24,146.51c-1.53,0-3.13-.11-3.34.2a1.78,1.78,0,0,1-2.31.25c0-.78,0-1.56,0-2.35A1.7,1.7,0,0,1,214.4,143a9.46,9.46,0,0,1-5.38.81,20.55,20.55,0,0,1-4.75-.75,13.43,13.43,0,0,1-8.47-9.4c-.11,1.8-1.82,3.37-2.49,5a18.8,18.8,0,0,0-.71,3.2,7.17,7.17,0,0,1-1.2,2.89,4.1,4.1,0,0,1-2.58,1.68,4.34,4.34,0,0,0-2.5-1.83,15.89,15.89,0,0,1-.53-5,16.27,16.27,0,0,1,4.49-10.15c2-2,4.68-3.64,7.51-3.36,1.05-1.46,3.17-1.88,4.93-2.27a17.56,17.56,0,0,1,9.24.3,13,13,0,0,1,7.22,5.62,19.53,19.53,0,0,1,2.18,8.59A52.45,52.45,0,0,0,222.24,146.51Z\"\r\n      fill=\"#3e3e54\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M222.24,146.51c-1.53,0-3.13-.11-3.34.2a1.78,1.78,0,0,1-2.31.25c0-.78,0-1.56,0-2.35A1.7,1.7,0,0,1,214.4,143a9.46,9.46,0,0,1-5.38.81,20.55,20.55,0,0,1-4.75-.75,13.43,13.43,0,0,1-8.47-9.4c-.11,1.8-1.82,3.37-2.49,5a18.8,18.8,0,0,0-.71,3.2,7.17,7.17,0,0,1-1.2,2.89,4.1,4.1,0,0,1-2.58,1.68,4.34,4.34,0,0,0-2.5-1.83,15.89,15.89,0,0,1-.53-5,16.27,16.27,0,0,1,4.49-10.15c2-2,4.68-3.64,7.51-3.36,1.05-1.46,3.17-1.88,4.93-2.27a17.56,17.56,0,0,1,9.24.3,13,13,0,0,1,7.22,5.62,19.53,19.53,0,0,1,2.18,8.59A52.45,52.45,0,0,0,222.24,146.51Z\"\r\n      fill=\"url(#linear-gradient-22)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M218.14,151a2.89,2.89,0,0,0,1.61-1.12,3,3,0,0,0,.41-1.67,2.61,2.61,0,0,0-.9-2.12,1.72,1.72,0,0,0-2.67,1,3.8,3.8,0,0,0-.06,1.12,11.92,11.92,0,0,1-.3,2.6c-.11.56,0,.51.57.46A5.62,5.62,0,0,0,218.14,151Z\"\r\n      fill=\"url(#linear-gradient-23)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M189.8,150.2a4.24,4.24,0,0,1-1.12-2.86,3.23,3.23,0,0,1,.3-1.56,2.44,2.44,0,0,1,.86-1,1.78,1.78,0,0,1,2.3.19,2.12,2.12,0,0,1,.34.69,10.1,10.1,0,0,1,.36,2.32c.06.73.12,1.46.17,2.18.05.57.27,1-.29,1.13C191.59,151.59,190.66,150.63,189.8,150.2Z\"\r\n      fill=\"url(#linear-gradient-24)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M230.66,193.24a13.27,13.27,0,0,1,3,4,6.51,6.51,0,0,1,.31,4.84,4.35,4.35,0,0,1-3.69,2.91A6.29,6.29,0,0,1,227,204a25.29,25.29,0,0,1-6.6-4.88,1.84,1.84,0,0,1-.59-1,1.91,1.91,0,0,1,.57-1.35c1.47-1.88,3.06-5,5-6.36,1.14-.85,1.11-.64,2.41.33A26.32,26.32,0,0,1,230.66,193.24Z\"\r\n      fill=\"#fff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M206.81,184.08a6.69,6.69,0,0,1-1.33-1.43c-1.17-1.87-.36-4.45-1.36-6.43-.37-.73-1-1.48-.79-2.27.27-1,1.69-1.19,2.74-1a13.14,13.14,0,0,1,4.75,1.88,5.41,5.41,0,0,0,1.81-2.51c1.25,1.34.63,3.5,1,5.3s2,3.31,3.42,4.59l10.46,9.16a3.15,3.15,0,0,1,.35,5.43c-1.14,1.35-2.38,3.2-4.12,2.37-2-.93-4-3.56-5.65-5Z\"\r\n      fill=\"url(#linear-gradient-25)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M181.21,214.19l21.25,40.75,8.11-2.57s-10.53-52-16.44-54.88c-1.45-.7-4.87.44-8.6,2.49A10.63,10.63,0,0,0,181.21,214.19Z\"\r\n      fill=\"#3e3e54\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M181.21,214.19l21.25,40.75,8.11-2.57s-10.53-52-16.44-54.88c-1.45-.7-4.87.44-8.6,2.49A10.63,10.63,0,0,0,181.21,214.19Z\"\r\n      fill=\"url(#linear-gradient-26)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M219.85,198.19s-5.22.42-6,3.75-14.26,52.58-14.26,52.58l10,2.5s19.15-41.63,20-47.46S219.85,198.19,219.85,198.19Z\"\r\n      fill=\"#3e3e54\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M219.85,198.19s-5.22.42-6,3.75-14.26,52.58-14.26,52.58l10,2.5s19.15-41.63,20-47.46S219.85,198.19,219.85,198.19Z\"\r\n      fill=\"#3e3e54\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M191.78,279.55a6.16,6.16,0,0,0,1.61,4.33,5,5,0,0,0,5.43.74,7.56,7.56,0,0,0,3.75-4.27,16.11,16.11,0,0,0,.85-5.73,3.87,3.87,0,0,0-.3-1.79,3.48,3.48,0,0,0-1.42-1.29c-1.87-1.08-5.71-2.46-7.37-.78C192.49,272.62,191.7,277.06,191.78,279.55Z\"\r\n      fill=\"#5c77ff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M208.72,282.62a7.55,7.55,0,0,0,6.64,3.88,4.23,4.23,0,0,0,2.73-1.09,5.36,5.36,0,0,0,1.15-4.31,10.62,10.62,0,0,0-.67-3.15,16.51,16.51,0,0,0-3.69-5.09.51.51,0,0,0-.31-.21.59.59,0,0,0-.34.14,16.16,16.16,0,0,1-3.37,2.09c-2.09.82-3.61-.66-3.59,2.18A11.15,11.15,0,0,0,208.72,282.62Z\"\r\n      fill=\"#5c77ff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M191.78,279.55a6.16,6.16,0,0,0,1.61,4.33,5,5,0,0,0,5.43.74,7.56,7.56,0,0,0,3.75-4.27,16.11,16.11,0,0,0,.85-5.73,3.87,3.87,0,0,0-.3-1.79,3.48,3.48,0,0,0-1.42-1.29c-1.87-1.08-5.71-2.46-7.37-.78C192.49,272.62,191.7,277.06,191.78,279.55Z\"\r\n      fill=\"#3e3e54\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M208.72,282.62a7.55,7.55,0,0,0,6.64,3.88,4.23,4.23,0,0,0,2.73-1.09,5.36,5.36,0,0,0,1.15-4.31,10.62,10.62,0,0,0-.67-3.15,16.51,16.51,0,0,0-3.69-5.09.51.51,0,0,0-.31-.21.59.59,0,0,0-.34.14,16.16,16.16,0,0,1-3.37,2.09c-2.09.82-3.61-.66-3.59,2.18A11.15,11.15,0,0,0,208.72,282.62Z\"\r\n      fill=\"#3e3e54\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M302,265.4c-13.78,24.63-33.71,40.35-49.53,51.31a3.73,3.73,0,0,1-2.13.67,3.58,3.58,0,0,1-1.25-.22,3.74,3.74,0,0,1-.88-6.61c15.15-10.49,34.23-25.53,47.25-48.8,14.78-26.42,19.36-59.48,13.61-98.26-5.31-35.84-25.64-61.73-60.43-76.94A155,155,0,0,0,197,74.28a3.75,3.75,0,0,1,.19-7.5,160.31,160.31,0,0,1,54.27,12.8c36.92,16.07,59.41,44.71,65.07,82.81C322.47,202.85,317.59,237.52,302,265.4Z\"\r\n      fill=\"#5c77ff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M298.4,266c-13.71,24.5-33.53,40.2-49.32,51.15a3.74,3.74,0,0,1-.88-6.61c15.15-10.49,34.23-25.53,47.25-48.8,14.78-26.42,19.36-59.48,13.61-98.26-5.31-35.84-25.64-61.73-60.43-76.94A155,155,0,0,0,197,74.28a3.75,3.75,0,0,1-2-6.84,161.68,161.68,0,0,1,52.88,12.75c36.92,16,59.42,44.7,65.08,82.81C318.88,203.45,314,238.11,298.4,266Z\"\r\n      fill=\"url(#linear-gradient-27)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M296.56,351.75l-.05.06a3.74,3.74,0,0,1-2.89,1.36,3.68,3.68,0,0,1-2.39-.86l-41.6-34.39-57.89,22.51a3.74,3.74,0,0,1-2.71-7l62-24.1,45,37.19A3.75,3.75,0,0,1,296.56,351.75Z\"\r\n      fill=\"#5c77ff\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M296.56,351.75l-.05.06a3.74,3.74,0,0,1-2.89,1.36,3.68,3.68,0,0,1-2.39-.86l-41.6-34.39-57.89,22.51a3.72,3.72,0,0,1-4.29-1.17,3.77,3.77,0,0,1,1.58-1.18L251,314l45,37.2A3.29,3.29,0,0,1,296.56,351.75Z\"\r\n      fill=\"url(#linear-gradient-28)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M201.81,175.78a1.9,1.9,0,0,1-1.76-1.14c-.12-.34-.09-.72-.22-1.07s-.49-.66-.83-.51a.72.72,0,0,0-.31.29c-.76,1.11-.51,2.6-.82,3.92a8.06,8.06,0,0,1-1.33,2.65,37.29,37.29,0,0,1-11.32,10.18,9.63,9.63,0,0,0-3.19,2.55,5.53,5.53,0,0,0-.26,5.31,2.47,2.47,0,0,0,2.65,1.59,12.64,12.64,0,0,0,6.64-2.27,32.93,32.93,0,0,0,9.4-8.78,14.5,14.5,0,0,1,1.68-2.12,12.85,12.85,0,0,0,2.41-2.3,5.58,5.58,0,0,0,.13-4.31,14.1,14.1,0,0,1-.71-3.34c0-.46.14-1-.43-1S202.4,175.81,201.81,175.78Z\"\r\n      fill=\"url(#linear-gradient-29)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M331.86,123a.78.78,0,0,0-1,0,1.16,1.16,0,0,0-.34,1,2.31,2.31,0,0,0,.41,1c.28.42.91,1.36,1.47,1.42s.78-.28.63-.76-.7-.67-.85-1.14S332.27,123.35,331.86,123Z\"\r\n      fill=\"url(#linear-gradient-30)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M360.4,159.3v0a1.5,1.5,0,0,1-.42.59c-1.14,1.12-2.28,2.23-3.4,3.35.07.82-3.36-8.38-4-13.67,1,.23,2.4,3.26,3.12,4.11,1.07,1.26,2.24,2.43,3.39,3.61,0,0,0,0,0,0l.39.39a6.05,6.05,0,0,1,.52.6l0,0a1.82,1.82,0,0,1,.33.83S360.4,159.26,360.4,159.3Z\"\r\n      fill=\"url(#linear-gradient-31)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M319.25,181.43a1.7,1.7,0,0,1-.22,0A.18.18,0,0,1,319.25,181.43Z\"\r\n      fill=\"none\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M329.06,141a2.8,2.8,0,0,1-.9,1.73c-2.3,2.37-5.45,3.09-7.3,6.15a20.61,20.61,0,0,0-2,5.31,56,56,0,0,0-2,9.49,18.44,18.44,0,0,0,1.37,9.5c.92,2,2.31,3.78,2.47,5.92a2.37,2.37,0,0,1-.2,1.27,2.76,2.76,0,0,1-1.18,1l-.45.2-.71.11A92.76,92.76,0,0,1,314.37,161c-.27-4.16-.22-8.56,1.85-12.18a16.62,16.62,0,0,1,7.52-6.4A18.88,18.88,0,0,1,329.06,141Z\"\r\n      fill=\"url(#linear-gradient-32)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <path\r\n      d=\"M329.57,157.21l3.82,7.54a22.06,22.06,0,0,1,1.65,3.88c.71,2.53.5,5.28,1.47,7.71-.47-1.17-3.75-2.61-4.69-3.63-2.16-2.34-.2-1.66.12-4.06.19-1.4-1.41-3.73-1.78-5.17A19.78,19.78,0,0,1,329.57,157.21Z\"\r\n      fill=\"url(#linear-gradient-33)\"\r\n      transform=\"translate(-39.46 -1.67)\" />\r\n    <rect\r\n      fill=\"#fff\"\r\n      height=\"29.86\"\r\n      rx=\"5.46\"\r\n      width=\"65.33\"\r\n      x=\"305.12\"\r\n      y=\"59.33\" />\r\n    <polygon\r\n      fill=\"#fff\"\r\n      points=\"305.39 68.9 305.39 100.05 312.81 72.88 305.39 68.9\" />\r\n    <rect\r\n      fill=\"#fff\"\r\n      height=\"29.86\"\r\n      rx=\"5.46\"\r\n      transform=\"translate(268.39 198.87) rotate(-180)\"\r\n      width=\"65.33\"\r\n      x=\"121.26\"\r\n      y=\"85.34\" />\r\n    <polygon\r\n      fill=\"#fff\"\r\n      points=\"146.86 93.24 146.86 124.38 139.44 97.22 146.86 93.24\" />\r\n    <text\r\n      fill=\"#5c77ff\"\r\n      font-family=\"Arial-Black, Arial Black\"\r\n      font-size=\"12.75\"\r\n      font-weight=\"800\"\r\n      transform=\"translate(331.85 76.41)\">\r\n      . . .\r\n    </text>\r\n    <text\r\n      fill=\"#5c77ff\"\r\n      font-family=\"Arial-Black, Arial Black\"\r\n      font-size=\"12.75\"\r\n      font-weight=\"800\"\r\n      transform=\"translate(103.69 99.89)\">\r\n      . . .\r\n    </text>\r\n  </svg>\r\n\r\n  <h2 class=\"display-1\" rxTranslate=\"global.chats.start_conversation\">Start a conversation</h2>\r\n</div>\r\n","import {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  DestroyRef,\r\n  inject,\r\n  OnInit,\r\n  OnDestroy,\r\n  signal\r\n} from '@angular/core';\r\nimport { fadeInUp400ms } from '@vex/animations/fade-in-up.animation';\r\nimport { BehaviorSubject, Observable, of } from 'rxjs';\r\nimport {\r\n  catchError,\r\n  debounceTime,\r\n  distinctUntilChanged,\r\n  filter,\r\n  finalize,\r\n  startWith,\r\n  switchMap,\r\n  tap\r\n} from 'rxjs/operators';\r\nimport { trackById } from '@vex/utils/track-by';\r\nimport { stagger80ms } from '@vex/animations/stagger.animation';\r\nimport {\r\n  ActivatedRoute,\r\n  NavigationEnd,\r\n  Router,\r\n  RouterLink,\r\n  RouterLinkActive,\r\n  RouterOutlet\r\n} from '@angular/router';\r\nimport { ChatService } from './chat.service'; // Correct\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { AsyncPipe, NgClass, NgFor, NgIf } from '@angular/common';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatSidenavModule } from '@angular/material/sidenav';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDividerModule } from '@angular/material/divider';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\r\nimport { VexLayoutService } from '@vex/services/vex-layout.service';\r\nimport { Chat } from 'src/app/interfaces/Chat';\r\nimport { MatDialog, MatDialogModule } from '@angular/material/dialog';\r\nimport { User } from 'src/app/interfaces/User';\r\nimport { AddContactModalComponent } from '../apps/chat/add-contact-modal/add-contact-modal.component';\r\nimport { LanguageService } from 'src/app/services/language.service';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { WebsocketService } from 'src/app/services/websocket.service';\r\nimport { Notifications } from 'src/app/interfaces/Notifications';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport {\r\n  FormsModule,\r\n  ReactiveFormsModule,\r\n  UntypedFormControl\r\n} from '@angular/forms';\r\nimport { LoadingSpinnerComponent } from 'src/app/auth/components/loading-spinner/loading-spinner.component';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Component({\r\n  selector: 'vex-chat',\r\n  templateUrl: './chat.component.html',\r\n  styleUrls: ['./chat.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  animations: [fadeInUp400ms, stagger80ms],\r\n  standalone: true,\r\n  imports: [\r\n    MatSidenavModule,\r\n    MatMenuModule,\r\n    MatIconModule,\r\n    NgClass,\r\n    NgIf,\r\n    NgFor,\r\n    MatRippleModule,\r\n    RouterLinkActive,\r\n    RouterLink,\r\n    RouterOutlet,\r\n    AsyncPipe,\r\n    MatButtonModule,\r\n    MatDividerModule,\r\n    MatInputModule,\r\n    MatDialogModule,\r\n    SharedModule,\r\n    TranslateModule,\r\n    MatProgressSpinnerModule,\r\n    ReactiveFormsModule,\r\n    FormsModule,\r\n    MatInputModule,\r\n    LoadingSpinnerComponent\r\n  ]\r\n})\r\nexport class ChatComponent implements OnInit, OnDestroy {\r\n  chats$!: Observable<Chat[]>;\r\n  mobileQuery$ = this.layoutService.ltMd$;\r\n  drawerOpen$ = this.chatService.drawerOpen$;\r\n  allUsers: User[] = [];\r\n  isLoading = signal<boolean>(false);\r\n  limit = environment.pageSize;\r\n  displayedChats$ = new BehaviorSubject<Chat[]>([]);\r\n  displayedChats: Chat[] = []; // Propriété directe comme alternative\r\n  totalChatsCount = 0;\r\n  allFilteredChats: Chat[] = [];\r\n  private readonly destroyRef: DestroyRef = inject(DestroyRef);\r\n  searchCtrl = new UntypedFormControl();\r\n  trackById = trackById;\r\n\r\n  constructor(\r\n    private cd: ChangeDetectorRef,\r\n    private router: Router,\r\n    private layoutService: VexLayoutService,\r\n    public chatService: ChatService,\r\n    private route: ActivatedRoute,\r\n    public dialog: MatDialog,\r\n    public languageService: LanguageService,\r\n    private websocketService: WebsocketService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.searchChats();\r\n    this.chatService.loadInitialChats();\r\n    // Logique pour gérer l'ouverture/fermeture du drawer en fonction de la taille de l'écran\r\n    this.router.events\r\n      .pipe(\r\n        filter(\r\n          (event): event is NavigationEnd => event instanceof NavigationEnd\r\n        ),\r\n        startWith(null), // Déclenche immédiatement avec la valeur actuelle\r\n        switchMap(() => this.mobileQuery$),\r\n        takeUntilDestroyed(this.destroyRef)\r\n      )\r\n      .subscribe((isMobile) => {\r\n        if (isMobile) {\r\n          this.closeDrawer();\r\n        } else {\r\n          this.openDrawer();\r\n        }\r\n      });\r\n\r\n    // Logique pour marquer un chat comme lu lors de la navigation\r\n    this.router.events\r\n      .pipe(\r\n        filter(\r\n          (event): event is NavigationEnd => event instanceof NavigationEnd\r\n        ),\r\n        startWith(null),\r\n        takeUntilDestroyed(this.destroyRef)\r\n      )\r\n      .subscribe(() => {\r\n        const urlSegments = this.router.url.split('/');\r\n        const chatIdIndex = urlSegments.indexOf('chat') + 1;\r\n\r\n        if (chatIdIndex > 0 && chatIdIndex < urlSegments.length) {\r\n          const currentChatId = urlSegments[chatIdIndex];\r\n          if (currentChatId && currentChatId !== 'empty') {\r\n            // Utiliser la nouvelle méthode getter\r\n            const chat = this.chatService.currentChatsValue.find(\r\n              (c) => c.id === currentChatId\r\n            );\r\n            if (chat && chat.unreadCount > 0) {\r\n              this.chatService.markMessagesAsRead(currentChatId);\r\n              this.markAsReadchat(chat);\r\n            }\r\n          }\r\n        }\r\n      });\r\n    // ChatComponent.ts - ngOnInit\r\n    this.route.data.subscribe((routeData) => {\r\n      const resolvedObject = routeData['usersData']; // Exemple de clé\r\n\r\n      if (\r\n        resolvedObject &&\r\n        resolvedObject.data &&\r\n        Array.isArray(resolvedObject.data)\r\n      ) {\r\n        this.allUsers = resolvedObject.data; // <<<< ACCÉDER À resolvedObject.data\r\n      } else {\r\n        console.warn(\r\n          'ChatComponent: Users data not found or not an array in resolved route data object.',\r\n          resolvedObject\r\n        );\r\n        this.allUsers = []; // Assurer que allUsers est toujours un tableau\r\n      }\r\n    });\r\n  }\r\n\r\n  searchChats() {\r\n    this.isLoading.set(true);\r\n\r\n    // Créer un observable combiné qui écoute les changements de recherche ET les chats du service\r\n    const searchChats$ = this.searchCtrl.valueChanges.pipe(\r\n      startWith(''),\r\n      debounceTime(300),\r\n      distinctUntilChanged(),\r\n      tap(() => {\r\n        this.isLoading.set(true);\r\n        this.limit = 5; // Reset limit on new search\r\n      }),\r\n      switchMap((searchTerm) => {\r\n        if (!searchTerm || searchTerm.trim() === '') {\r\n          // Si pas de recherche, utiliser directement les chats du service\r\n          return this.chatService.chats$;\r\n        } else {\r\n          // Si recherche, utiliser l'API de recherche\r\n          return this.chatService.getChats(searchTerm).pipe(\r\n            catchError((error) => {\r\n              this.isLoading.set(false);\r\n              return of([]);\r\n            })\r\n          );\r\n        }\r\n      }),\r\n      tap(() => this.isLoading.set(false)),\r\n      takeUntilDestroyed(this.destroyRef)\r\n    );\r\n\r\n    this.chats$ = searchChats$;\r\n\r\n    this.chats$.subscribe((chats) => {\r\n      this.allFilteredChats = chats;\r\n      this.totalChatsCount = chats.length;\r\n      this.updateDisplayedChats(chats);\r\n      // Forcer la détection de changements car le composant utilise OnPush\r\n      this.cd.markForCheck();\r\n    });\r\n  }\r\n\r\n  markAsReadchat(chat: Chat) {\r\n    this.chatService.markAsReadChat(chat).subscribe({\r\n      next: (response) => {\r\n        let notifications: Notifications[] = [];\r\n        this.websocketService.unreadCountNotificationSubject.next(\r\n          response.unreadnotificationcount as number\r\n        );\r\n        notifications = response.recent_unread_list as Notifications[];\r\n        this.websocketService.addNotificationToList(notifications);\r\n      },\r\n      error: (err) => {\r\n        console.error('Erreur lors du marquage comme lue', err);\r\n      }\r\n    });\r\n  }\r\n\r\n  openAddContactModal(): void {\r\n    // ... (ouverture de la modale) ...\r\n    const dialogRef = this.dialog.open(AddContactModalComponent, {\r\n      width: '650px',\r\n      disableClose: true\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((selectedUserId) => {\r\n      if (selectedUserId) {\r\n        // selectedUserId ne doit pas être undefined, null, ou une chaîne vide\r\n        this.chatService\r\n          .findOrCreateConversationWithUser(selectedUserId)\r\n          .subscribe({\r\n            next: (newOrExistingChat) => {\r\n              if (newOrExistingChat && newOrExistingChat.id) {\r\n                this.router.navigate(['/index/chat', newOrExistingChat.id]); // Adaptez le chemin\r\n                this.closeDrawer();\r\n                // Le chat est déjà ajouté à la liste dans ChatService.findOrCreateConversationWithUser\r\n              } else {\r\n                console.error(\r\n                  'ChatComponent: Received invalid chat object from service.',\r\n                  newOrExistingChat\r\n                );\r\n              }\r\n            },\r\n            error: (err) => {\r\n              console.error('ChatComponent: Error starting chat:', err);\r\n            }\r\n          });\r\n      } else if (typeof selectedUserId !== 'undefined') {\r\n        // Si c'est défini mais \"falsy\" (ex: 0 si ID est number)\r\n        console.warn(\r\n          'ChatComponent: dialogRef.afterClosed() received a \"falsy\" but defined value:',\r\n          selectedUserId\r\n        );\r\n      } else {\r\n        console.log(\r\n          'ChatComponent: Dialog closed without selecting a user (received undefined).'\r\n        );\r\n      }\r\n    });\r\n    // ... (reste de la méthode)\r\n  }\r\n\r\n  trackByIdChat(index: number, chat: Chat): string {\r\n    return chat.id;\r\n  }\r\n\r\n  drawerChange(drawerOpen: boolean) {\r\n    this.chatService.setDrawerOpen(drawerOpen);\r\n  }\r\n\r\n  openDrawer() {\r\n    this.chatService.setDrawerOpen(true);\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  closeDrawer() {\r\n    this.chatService.setDrawerOpen(false);\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  private updateDisplayedChats(allChats: Chat[]) {\r\n    const displayedChats = allChats.slice(0, this.limit);\r\n    // Mettre à jour les deux : l'observable ET la propriété directe\r\n    this.displayedChats$.next(displayedChats);\r\n    this.displayedChats = displayedChats;\r\n\r\n    // Forcer la détection de changements après mise à jour des chats affichés\r\n    this.cd.markForCheck();\r\n  }\r\n\r\n  loadMoreChats() {\r\n    this.limit += 5;\r\n    this.updateDisplayedChats(this.allFilteredChats);\r\n  }\r\n\r\n  get hasMoreChats(): boolean {\r\n    return this.limit < this.totalChatsCount;\r\n  }\r\n\r\n  ngOnDestroy() {}\r\n}\r\n","<mat-drawer-container class=\"overflow-hidden h-full w-full\">\r\n  <mat-drawer (openedChange)=\"drawerChange($event)\" [mode]=\"(mobileQuery$ | async) ? 'over' : 'side'\"\r\n    [opened]=\"!!(drawerOpen$ | async)\" class=\"drawer\" position=\"start\">\r\n    <div class=\"h-full flex flex-col\">\r\n      <div class=\"flex-none py-4 bg-gray-50 dark:bg-gray-900 space-y-4 border-b\">\r\n        <div class=\"flex items-center mx-4\">\r\n          <div class=\"flex-1 text-3xl font-semibold\" rxTranslate=\"global.chats.title\">Chats</div>\r\n\r\n          <button [matMenuTriggerFor]=\"newChatMenu\" color=\"primary\" mat-raised-button type=\"button\">\r\n            <mat-icon svgIcon=\"mat:add_circle\"></mat-icon>\r\n            <span rxTranslate=\"global.chats.submit\">New Chat</span>\r\n          </button>\r\n\r\n          <mat-menu #newChatMenu=\"matMenu\" xPosition=\"after\" yPosition=\"below\">\r\n            <button mat-menu-item (click)=\"openAddContactModal()\">\r\n              <mat-icon matMenuItemIcon svgIcon=\"mat:add_circle\"></mat-icon>\r\n              <span rxTranslate=\"global.chats.add_contact\">Add Contact</span>\r\n            </button>\r\n            <mat-divider></mat-divider>\r\n          </mat-menu>\r\n        </div>\r\n        <div class=\"flex px-4\">\r\n          <mat-form-field appearance=\"outline\" class=\"vex-mat-dense-xs flex-1 bg-foreground\" subscriptSizing=\"dynamic\">\r\n            <mat-icon class=\"icon-sm\" matIconPrefix svgIcon=\"mat:search\"></mat-icon>\r\n            <input matInput [formControl]=\"searchCtrl\" [placeholder]=\"'global.chats.search' | translate\" type=\"text\" />\r\n          </mat-form-field>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"flex-1 min-h-0\" data-simplebar>\r\n        <div class=\"pt-2\">\r\n          <div class=\"flex items-center px-4 pb-2 gap-2\">\r\n            <button\r\n              class=\"text-primary-600 bg-primary-100 dark:text-primary-200 dark:bg-primary-700/20 font-semibold text-sm px-4 py-2 rounded-lg hover:bg-primary-200 hover:dark:bg-primary-700/30 transition flex-1 text-center relative\"\r\n              matRipple type=\"button\">\r\n              <span rxTranslate=\"global.chats.all_conversation\">All Conversation </span>\r\n            </button>\r\n          </div>\r\n\r\n          <div class=\"space-y-1\">\r\n            <!-- Spinner pendant le chargement -->\r\n            <div *ngIf=\"isLoading()\" class=\"flex justify-center items-center h-64\">\r\n              <vex-loading-spinner></vex-loading-spinner>\r\n            </div>\r\n\r\n            <div *ngIf=\"searchCtrl.value !== 0\">\r\n              <ng-container *ngIf=\"!isLoading()\">\r\n                <!-- Liste des discussions -->\r\n                <ng-container *ngIf=\"displayedChats.length > 0\">\r\n                  <ng-container *ngFor=\"let chat of displayedChats; trackBy: trackByIdChat\">\r\n                    <a #rla=\"routerLinkActive\" [ngClass]=\"{\r\n             'text-primary-600 bg-primary-50 dark:text-primary-200 dark:bg-primary-700/20': rla.isActive\r\n           }\" [routerLink]=\"['./', chat.id]\"\r\n                      class=\"relative text-sm mx-2 px-3 py-2 rounded hover:bg-primary-100 hover:dark:bg-primary-700/10 flex items-center gap-3 transition ease-out\"\r\n                      matRipple routerLinkActive>\r\n\r\n                      <div *ngIf=\"rla.isActive\"\r\n                        class=\"w-1 bg-primary-600 absolute left-0 top-0 bottom-0 rounded-full my-1\"></div>\r\n\r\n                      <div class=\"relative flex-none\">\r\n                        <img class=\"h-10 w-10 rounded-full select-none\"\r\n                          [src]=\"chat.imageUrl || 'assets/img/avatars/noavatar.png'\" />\r\n                        <div *ngIf=\"chat.unreadCount && chat.unreadCount > 0 && !rla.isActive\"\r\n                          class=\"absolute -top-1.5 -right-1.5 min-w-[20px] h-[20px] px-1.5 text-xs font-bold bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center leading-none shadow-md\">\r\n                          {{ chat.unreadCount > 99 ? '99+' : chat.unreadCount }}\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div class=\"flex-1 select-none truncate\">\r\n                        <div class=\"truncate flex mb-0.5\">\r\n                          <div class=\"font-medium flex-1\">{{ chat.first_name }}</div>\r\n                          <div class=\"flex-none text-xs text-gray-500\">\r\n                            {{ languageService.formatDateByLang(chat.timestamp)}}\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"text-xs text-gray-500 truncate\">\r\n                          {{ chat.lastMessage }}\r\n                        </div>\r\n                      </div>\r\n                    </a>\r\n                  </ng-container>\r\n                  <!-- Bouton Show More -->\r\n                  <a *ngIf=\"hasMoreChats\" (click)=\"loadMoreChats()\"\r\n                    class=\"inline-block text-gray-600 dark:text-gray-300 font-medium text-xs mx-6 mt-3\"\r\n                    href=\"javascript:void(0);\">\r\n                    <span>Show more</span>\r\n                    <mat-icon class=\"icon-xs align-middle select-none\" svgIcon=\"mat:expand_more\"></mat-icon>\r\n                  </a>\r\n                </ng-container>\r\n              </ng-container>\r\n              <ng-container *ngIf=\"(displayedChats$ | async)?.length === 0 && !isLoading()\">\r\n                <div class=\"flex-auto flex flex-col items-center justify-center p-gutter\">\r\n                  <img class=\"m-12 max-h-36\" src=\"../../../../../../assets/img/illustrations/idea.svg\" />\r\n                  <h2 class=\"headline m-0 text-center\">\r\n                    <span rxTranslate=\"global.chats.no_chat_matching\">Aucun resultat disponible</span>\r\n                  </h2>\r\n                </div>\r\n              </ng-container>\r\n\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </mat-drawer>\r\n\r\n  <mat-drawer-content class=\"relative\">\r\n    <router-outlet></router-outlet>\r\n  </mat-drawer-content>\r\n</mat-drawer-container>","import { ChatComponent } from './chat.component';\r\nimport { ChatConversationComponent } from './chat-conversation/chat-conversation.component';\r\nimport { ChatEmptyComponent } from './chat-empty/chat-empty.component';\r\nimport { VexRoutes } from '@vex/interfaces/vex-route.interface';\r\nimport { usersResolver } from '../users/users.resolver';\r\n\r\nconst routes: VexRoutes = [\r\n  {\r\n    path: '',\r\n    component: ChatComponent,\r\n    resolve: {\r\n              usersData: usersResolver\r\n            },\r\n    data: {\r\n      scrollDisabled: true,\r\n      toolbarShadowEnabled: false,\r\n      footerVisible: false\r\n    },\r\n    children: [\r\n      {\r\n        path: '',\r\n        pathMatch: 'full',\r\n        component: ChatEmptyComponent\r\n      },\r\n      {\r\n        path: ':chatId',\r\n        component: ChatConversationComponent\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\nexport default routes;\r\n","// Créez un pipe ex: src/app/pipes/file-size.pipe.ts\r\nimport { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'fileSize',\r\n  standalone: true\r\n})\r\nexport class FileSizePipe implements PipeTransform {\r\n  transform(sizeInBytes: number | undefined | null): string {\r\n    if (sizeInBytes === null || typeof sizeInBytes === 'undefined') {\r\n      return '';\r\n    }\r\n    const units = ['B', 'KB', 'MB', 'GB', 'TB'];\r\n    let i = 0;\r\n    let size = sizeInBytes;\r\n    while (size >= 1024 && i < units.length - 1) {\r\n      size /= 1024;\r\n      i++;\r\n    }\r\n    return `${size.toFixed(1)} ${units[i]}`;\r\n  }\r\n}","// Create a new file: custom-paginator-intl.ts\r\nimport { MatPaginatorIntl } from '@angular/material/paginator';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable()\r\nexport class CustomPaginatorIntl extends MatPaginatorIntl {\r\n  constructor(private translate: TranslateService) {\r\n    super();\r\n    \r\n    this.getTranslations();\r\n    this.translate.onLangChange.subscribe(() => this.getTranslations());\r\n  }\r\n\r\n  private getTranslations() {\r\n    this.translate.get([\r\n      'paginator.items_per_page',\r\n      'paginator.next_page',\r\n      'paginator.previous_page',\r\n      'paginator.first_page',\r\n      'paginator.last_page'\r\n    ]).subscribe(translations => {\r\n      this.itemsPerPageLabel = translations['paginator.items_per_page'];\r\n      this.nextPageLabel = translations['paginator.next_page'];\r\n      this.previousPageLabel = translations['paginator.previous_page'];\r\n      this.firstPageLabel = translations['paginator.first_page'];\r\n      this.lastPageLabel = translations['paginator.last_page'];\r\n      this.changes.next(); // Important to trigger update\r\n    });\r\n\r\n    this.getRangeLabel = (page: number, pageSize: number, length: number) => {\r\n      if (length === 0 || pageSize === 0) {\r\n        return this.translate.instant('paginator.range', { start: 0, end: 0, length: 0 });\r\n      }\r\n      const start = page * pageSize + 1;\r\n      const end = Math.min((page + 1) * pageSize, length);\r\n      return this.translate.instant('paginator.range', { start, end, length });\r\n    };\r\n  }\r\n}"],"names":["animate","style","transition","trigger","scaleFadeInAnimation","duration","transform","opacity","scaleFadeIn400ms","MatProgressBarModule","MatProgressSpinnerModule","SharedModule","LoadingSpinnerComponent","selectors","standalone","features","i0","ɵɵStandaloneFeature","decls","vars","consts","template","LoadingSpinnerComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","i1","MatProgressSpinner","i2","default","styles","environment","PaginationStandard","current_page","pageSize","total","total_user_blocked","ChatMessageModel","constructor","chat","message","attachment","getChatMessageFormFields","component","fieldGroupClassName","fieldGroup","key","type","className","hide","isAttachmentAreaVisible","props","browse","onBrowseInit","bind","disabled","isBlocked","placeholder","translateService","instant","onAdd","toggleAttachmentArea","onSend","send","isUploading","isUploadingFile","isSendDisabled","model","trim","DestroyRef","inject","signal","MAT_DIALOG_DATA","MatDialogModule","BehaviorSubject","of","debounceTime","distinctUntilChanged","switchMap","catchError","tap","filter","AsyncPipe","NgFor","NgIf","MatListModule","MatIconModule","MatButtonModule","MatPaginator","MatPaginatorIntl","MatPaginatorModule","MatFormFieldModule","MatInputModule","FormControl","ReactiveFormsModule","takeUntilDestroyed","TranslateModule","CustomPaginatorIntl","MatRippleModule","ɵɵlistener","AddContactModalComponent_button_11_Template_button_click_0_listener","ɵɵrestoreView","_r4","ctx_r3","ɵɵnextContext","ɵɵresetView","searchCtrl","setValue","AddContactModalComponent_div_13_div_6_div_1_ng_container_1_div_2_Template_div_click_0_listener","restoredCtx","_r16","contact_r14","$implicit","ctx_r15","onContactSelect","ɵɵadvance","ɵɵpropertyInterpolate1","first_name","ɵɵproperty","photo","ɵɵsanitizeUrl","ɵɵtextInterpolate2","last_name","ɵɵtextInterpolate","email","AddContactModalComponent_div_13_div_6_div_1_ng_container_1_a_3_Template_a_click_0_listener","_r18","ctx_r17","loadMoreRecentContacts","ɵɵpipeBind1","ɵɵelementContainerStart","ɵɵtemplate","AddContactModalComponent_div_13_div_6_div_1_ng_container_1_div_2_Template","AddContactModalComponent_div_13_div_6_div_1_ng_container_1_a_3_Template","ɵɵelementContainerEnd","displayedRecentContacts_r8","ctx_r9","hasMoreRecentContacts","ɵɵtextInterpolate1","AddContactModalComponent_div_13_div_6_div_1_ng_container_1_Template","AddContactModalComponent_div_13_div_6_div_1_ng_template_2_Template","ɵɵtemplateRefExtractor","length","_r11","AddContactModalComponent_div_13_div_6_div_1_Template","ctx_r6","displayedRecentContacts$","AddContactModalComponent_div_13_div_5_Template","AddContactModalComponent_div_13_div_6_Template","ctx_r1","isLoading","AddContactModalComponent_div_14_div_6_div_1_ng_container_1_div_1_Template_div_click_0_listener","_r30","user_r28","ctx_r29","AddContactModalComponent_div_14_div_6_div_1_ng_container_1_div_1_Template","users_r23","ctx_r25","value","AddContactModalComponent_div_14_div_6_div_1_ng_container_1_Template","AddContactModalComponent_div_14_div_6_div_1_ng_template_2_Template","_r26","AddContactModalComponent_div_14_div_6_div_1_Template","ctx_r21","users$","AddContactModalComponent_div_14_div_5_Template","AddContactModalComponent_div_14_div_6_Template","ctx_r2","AddContactModalComponent","dialogRef","data","usersService","authService","chatService","_users","asObservable","_recentContacts","recentContacts$","_displayedRecentContacts","showRecentContacts","recentContactsLimit","allRecentContacts","pagination","per_page","destroyRef","currentUserId","user","id","ngOnInit","chats$","pipe","chats","loadRecentContacts","subscribe","currentChatsValue","valueChanges","searchTerm","set","searchUsers","error","response","handleUserResponse","ngAfterViewInit","fetchUsers","page","getUsers","next","console","usersData","String","paginator","pageIndex","onPageChange","event","undefined","selectedUser","close","existingChats","recentContactsMap","Map","forEach","index","partnerId","partnerIdStr","currentUserIdStr","has","recentContact","parseInt","confirmed","imageUrl","recentContactsArray","Array","from","values","updateDisplayedRecentContacts","displayed","slice","ngOnDestroy","ɵɵdirectiveInject","MatDialogRef","UsersService","i3","AuthService","i4","ChatService","viewQuery","AddContactModalComponent_Query","provide","useClass","AddContactModalComponent_Template","AddContactModalComponent_Template_button_click_5_listener","AddContactModalComponent_button_11_Template","AddContactModalComponent_div_13_Template","AddContactModalComponent_div_14_Template","i5","MatIcon","i6","MatIconButton","i7","i8","MatFormField","MatPrefix","MatSuffix","i9","MatInput","i10","DefaultValueAccessor","NgControlStatus","FormControlDirective","i11","i12","TranslatePipe","i13","MatRipple","changeDetection","effect","map","take","startWith","Observable","fadeInUp400ms","FormGroup","stagger20ms","VexScrollbarComponent","MatMenuModule","MatDividerModule","FileSizePipe","MatTooltipModule","FormlyModule","FormlyMaterialModule","state","ChatFilePondTypeComponent","chat_r8","ɵɵclassProp","ctx_r0","isPartnerOnline$","ChatConversationComponent_ng_container_11_ng_container_1_ng_container_1_ng_container_3_div_1_ng_container_5_Template_img_click_1_listener","_r23","message_r15","openImage","file_url","ɵɵpropertyInterpolate","file_name","ctx_r19","getFileIcon","file_mime_type","file_size","ChatConversationComponent_ng_container_11_ng_container_1_ng_container_1_ng_container_3_div_1_ng_container_5_Template","ChatConversationComponent_ng_container_11_ng_container_1_ng_container_1_ng_container_3_div_1_ng_container_6_Template","ChatConversationComponent_ng_container_11_ng_container_1_ng_container_1_ng_container_3_div_1_div_7_Template","tmp_0_0","ctx_r16","chat$","message_type","languageService","parseAndFormatDate","timestamp","ChatConversationComponent_ng_container_11_ng_container_1_ng_container_1_ng_container_3_div_2_ng_container_2_Template_img_click_1_listener","_r34","ctx_r32","ChatConversationComponent_ng_container_11_ng_container_1_ng_container_1_ng_container_3_div_2_ng_container_2_Template","ChatConversationComponent_ng_container_11_ng_container_1_ng_container_1_ng_container_3_div_2_ng_container_3_Template","ChatConversationComponent_ng_container_11_ng_container_1_ng_container_1_ng_container_3_div_2_div_4_Template","ChatConversationComponent_ng_container_11_ng_container_1_ng_container_1_ng_container_3_div_2_mat_progress_spinner_5_Template","ChatConversationComponent_ng_container_11_ng_container_1_ng_container_1_ng_container_3_div_1_Template","ChatConversationComponent_ng_container_11_ng_container_1_ng_container_1_ng_container_3_div_2_Template","ChatConversationComponent_ng_container_11_ng_container_1_ng_container_1_ng_container_3_Template","messages_r12","ctx_r13","trackByIdFn","ChatConversationComponent_ng_container_11_ng_container_1_ng_container_1_Template","ChatConversationComponent_ng_container_11_ng_container_1_Template","ChatConversationComponent_ng_container_11_ng_template_3_Template","ctx_r4","messages$","ctx_r5","form","fields","slideInOutAnimation","visibility","ChatConversationComponent","item","route","cd","websocketService","currentChat$","currentChatMessages$","isChatBlocked","isLoadingConversation","selectedFile","selectedFilePreview","triggerFileBrowse","currentChatId","browseRequested","options","browseFn","isVisible","onLinePartnerStatusChange","initBlockStatusListener","is_blocked","getCurrentUserId","initChat","activeChat","isUserOnline","participants","partner","find","p","wasVisible","onLangChange","scrollToBottom","paramMap","get","chatId","initialChatsLoaded$","loaded","setActiveChat","messages","markForCheck","messageContent","fileToSend","detectChanges","sendMessage","sentMessage","err","force","requestAnimationFrame","scrollbar","scrollbarRef","scrollElement","getScrollElement","contentElement","getContentElement","scrollBuffer","isEffectivelyAtBottom","scrollHeight","scrollTop","clientHeight","scrollTo","top","behavior","warn","mimeType","startsWith","includes","window","open","openDrawer","setDrawerOpen","blockStatusUpdate$","blockStatusData","handleBlockStatusUpdate","subscriber","channelName","eventName","listenPrivateWebsocket","eventData","blockEvent","currentChat","_currentChat","getValue","updatedChat","isImage","file","ActivatedRoute","ChangeDetectorRef","WebsocketService","LanguageService","TranslateService","ChatConversationComponent_Query","ChatConversationComponent_Template_button_click_2_listener","ChatConversationComponent_ng_container_4_Template","ChatConversationComponent_ng_template_6_Template","ChatConversationComponent_div_10_Template","ChatConversationComponent_ng_container_11_Template","ChatConversationComponent_ng_container_13_Template","ChatConversationComponent_ng_template_14_Template","_r2","_r7","FormlyForm","animation","ChatEmptyComponent","ChatEmptyComponent_Template","ChatEmptyComponent_Template_button_click_0_listener","ɵɵnamespaceSVG","ɵɵnamespaceHTML","MatFabButton","encapsulation","trackById","stagger80ms","NavigationEnd","RouterLink","RouterLinkActive","RouterOutlet","NgClass","MatSidenavModule","FormsModule","UntypedFormControl","unreadCount","ChatComponent_div_33_ng_container_1_ng_container_1_ng_container_1_div_3_Template","ChatComponent_div_33_ng_container_1_ng_container_1_ng_container_1_div_6_Template","ɵɵpureFunction1","_c0","_r9","isActive","_c1","formatDateByLang","lastMessage","ChatComponent_div_33_ng_container_1_ng_container_1_a_2_Template_a_click_0_listener","_r14","loadMoreChats","ChatComponent_div_33_ng_container_1_ng_container_1_ng_container_1_Template","ChatComponent_div_33_ng_container_1_ng_container_1_a_2_Template","displayedChats","trackByIdChat","hasMoreChats","ChatComponent_div_33_ng_container_1_ng_container_1_Template","ChatComponent_div_33_ng_container_1_Template","ChatComponent_div_33_ng_container_2_Template","tmp_1_0","displayedChats$","ChatComponent","router","layoutService","dialog","mobileQuery$","ltMd$","drawerOpen$","allUsers","limit","totalChatsCount","allFilteredChats","searchChats","loadInitialChats","events","isMobile","closeDrawer","urlSegments","url","split","chatIdIndex","indexOf","c","markMessagesAsRead","markAsReadchat","routeData","resolvedObject","isArray","searchChats$","getChats","updateDisplayedChats","markAsReadChat","notifications","unreadCountNotificationSubject","unreadnotificationcount","recent_unread_list","addNotificationToList","openAddContactModal","width","disableClose","afterClosed","selectedUserId","findOrCreateConversationWithUser","newOrExistingChat","navigate","log","drawerChange","drawerOpen","allChats","Router","VexLayoutService","MatDialog","ChatComponent_Template","ChatComponent_Template_mat_drawer_openedChange_1_listener","$event","ChatComponent_Template_button_click_15_listener","ChatComponent_div_32_Template","ChatComponent_div_33_Template","_r0","MatDrawer","MatDrawerContainer","MatDrawerContent","MatMenu","MatMenuItem","MatMenuTrigger","MatButton","MatDivider","i14","i15","i16","i17","usersResolver","routes","path","resolve","scrollDisabled","toolbarShadowEnabled","footerVisible","children","pathMatch","sizeInBytes","units","i","size","toFixed","pure","translate","getTranslations","translations","itemsPerPageLabel","nextPageLabel","previousPageLabel","firstPageLabel","lastPageLabel","changes","getRangeLabel","start","end","Math","min","ɵɵinject","factory","ɵfac"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}