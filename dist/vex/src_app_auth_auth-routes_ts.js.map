{"version":3,"file":"src_app_auth_auth-routes_ts.js","mappings":";;;;;;;;;;;;;;;;AACsD;AACU;AACf;AAEjD,MAAMG,SAAS,GAAc,CAC3B;EACEC,IAAI,EAAE,EAAE;EACRC,SAAS,EAAEH,0DAAa;EACxBI,WAAW,EAAE,CAACN,8DAAW,CAAC;EAC1BO,OAAO,EAAE;IACPC,YAAY,EAAEP,wEAAgBA;GAC/B;EACDQ,QAAQ,EAAE,CACR;IACEL,IAAI,EAAE,EAAE;IACRM,UAAU,EAAE,OAAO;IACnBC,SAAS,EAAE;GACZ,EACD;IACEP,IAAI,EAAE,OAAO;IACbQ,aAAa,EAAEA,CAAA,KACb,qaAAiC,CAACC,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,cAAc;GACjE,EACD;IACEX,IAAI,EAAE,UAAU;IAChBQ,aAAa,EAAEA,CAAA,KACb,kTAAuC,CAACC,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACE,iBAAiB;GAC1E,EACD;IACEZ,IAAI,EAAE,iBAAiB;IACvBQ,aAAa,EAAEA,CAAA,KACb,6cAAqD,CAACC,IAAI,CACvDC,CAAC,IAAKA,CAAC,CAACG,uBAAuB;GAErC,EACD;IACEb,IAAI,EAAE,gBAAgB;IACtBQ,aAAa,EAAEA,CAAA,KACb,0UAAmD,CAACC,IAAI,CACrDC,CAAC,IAAKA,CAAC,CAACI,sBAAsB;GAEpC,EACD;IACEd,IAAI,EAAE,8BAA8B;IACpCQ,aAAa,EAAEA,CAAA,KACb,8TAA+C,CAACC,IAAI,CACjDC,CAAC,IAAKA,CAAC,CAACK,oBAAoB;GAElC,EACD;IACEf,IAAI,EAAE,gBAAgB;IACtBQ,aAAa,EAAEA,CAAA,KACb,sMAAgD,CAACC,IAAI,CAClDC,CAAC,IAAKA,CAAC,CAACM,iBAAiB;GAE/B,EACD;IACEhB,IAAI,EAAE,cAAc;IACpBQ,aAAa,EAAEA,CAAA,KACb,wPAAqE,CAACC,IAAI,CACvEC,CAAC,IAAKA,CAAC,CAACO,6BAA6B;GAE3C;CAEJ,CACF;AAED,iEAAelB,SAAS;;;;;;;;;;;;;;;;;;;;;;;;;ACnE+C;AACxB;AACR;AACoB;AACJ;AAEA;AAC0C;AAC7C;;;;;;;;;;;ICsBhD2B,4DAAA,iBACgC;IADFA,wDAAA,mBAAAG,yDAAA;MAAAH,2DAAA,CAAAK,GAAA;MAAA,MAAAC,MAAA,GAAAN,2DAAA;MAAA,OAASA,yDAAA,CAAAM,MAAA,CAAAG,QAAA,EAAU;IAAA,EAAC;IAEhDT,uDAAA,mBAAoG;IACpGA,4DAAA,eAAyD;IAAAA,oDAAA,cAAO;IAAAA,0DAAA,EAAO;;;ADPvE,MAAO5B,aAAa;EAMxByC,YACmBC,MAAc,EACdC,aAA+B;IAD/B,KAAAD,MAAM,GAANA,MAAM;IACN,KAAAC,aAAa,GAAbA,aAAa;IALhC,KAAAC,YAAY,GAAY,KAAK;IAC7B,KAAAC,WAAW,GAAW,QAAQ;IAM5B,IAAI,CAACC,MAAM,GAAG,IAAI,CAACH,aAAa,CAACI,MAAM,CAAEC,MAAM,IAAKA,MAAM,CAACC,OAAO,CAACC,KAAK,CAAC;IACzE,IAAI,CAACC,SAAS,GAAG,IAAI,CAACR,aAAa,CAACS,OAAO,CAACC,IAAI,CAC9C/B,yCAAG,CAAE0B,MAAM,IAAKA,MAAM,CAACC,OAAO,CAACK,QAAQ,CAAC,CACzC;EACH;EAEAC,QAAQA,CAAA;IACN,IAAI,CAACC,iBAAiB,EAAE;EAC1B;EAEAnB,QAAQA,CAAA;IACN,IAAI,CAACK,MAAM,CAACe,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC9C,IAAI,CAAC,MAAK;MAC5C+C,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;IAC1B,CAAC,CAAC;EACJ;EAEAC,KAAKA,CAAA;IACH,IAAI,CAACnB,MAAM,CAACe,QAAQ,CAAC,CAAC,IAAI,CAACZ,WAAW,CAAC,CAAC;EAC1C;EAEAW,iBAAiBA,CAAA;IACf;IACA,IAAI,CAACZ,YAAY,GAAG,IAAI,CAACF,MAAM,CAACoB,GAAG,CAACC,QAAQ,CAAC,cAAc,CAAC;IAC5D,IAAI,CAACnB,YAAY,GAAG,IAAI,CAACA,YAAY,IAAI,KAAK;IAC9C,IAAI,CAACC,WAAW,GAAG,IAAI,CAACD,YAAY,GAAG,cAAc,GAAG,IAAI,CAACC,WAAW;EAC1E;;;uBAnCW7C,aAAa,EAAA4B,+DAAA,CAAAqC,mDAAA,GAAArC,+DAAA,CAAAuC,4EAAA;IAAA;EAAA;;;YAAbnE,aAAa;MAAAqE,SAAA;MAAAC,UAAA;MAAAC,QAAA,GAAA3C,iEAAA;MAAA6C,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,uBAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UC3B1BlD,4DAAA,aAC6H;UAIzHA,wDAAA,mBAAAoD,4CAAA;YAAA,OAASD,GAAA,CAAAlB,KAAA,EAAO;UAAA,EAAC;UACjBjC,4DAAA,WAA6B;UAC3BA,uDAAA,aAA2E;;UAC3EA,4DAAA,YAAkH;UAChHA,oDAAA,GACF;;UAAAA,0DAAA,EAAK;UAKTA,uDAAA,aAEM;UACNA,4DAAA,aAA6C;UAC3CA,uDAAA,4BAA6C;UAC7CA,4DAAA,iBACyC;UADjCA,wDAAA,mBAAAqD,gDAAA;YAAA,OAASF,GAAA,CAAAlB,KAAA,EAAO;UAAA,EAAC;UAEvBjC,uDAAA,mBAAwC;UAC1CA,0DAAA,EAAS;UAETA,4DAAA,iBACgB;UADRA,wDAAA,mBAAAsD,gDAAA;YAAA,OAASH,GAAA,CAAAlB,KAAA,EAAO;UAAA,EAAC;UAEvBjC,uDAAA,oBAA8F;UAC9FA,4DAAA,gBAAsC;UAAAA,oDAAA,cAAM;UAAAA,0DAAA,EAAO;UAGrDA,wDAAA,KAAAwD,gCAAA,qBAIS;UAEXxD,0DAAA,EAAM;UAGRA,uDAAA,qBAA+B;;;UAjCsBA,uDAAA,GAAyB;UAAzBA,wDAAA,QAAAA,yDAAA,OAAAmD,GAAA,CAAA5B,SAAA,GAAAvB,2DAAA,CAAyB;UAEtEA,uDAAA,GACF;UADEA,gEAAA,MAAAA,yDAAA,OAAAmD,GAAA,CAAAjC,MAAA,OACF;UAqBOlB,uDAAA,IAAmB;UAAnBA,wDAAA,UAAAmD,GAAA,CAAAnC,YAAA,CAAmB;;;qBDb5BvB,yDAAY,EAAAqE,iDAAA,EAAAA,sDAAA,EACZtE,yDAAY,EACZI,iEAAa,EAAAqE,2DAAA,EACbtE,qEAAe,EAAAwE,+DAAA,EAAAA,sEAAA,EACftE,+DAAY,EAAAyE,4EAAA,EACZxE,yGAAwB,EACxBC,+DAAc;MAAAyE,MAAA;MAAAC,aAAA;IAAA;EAAA;;;;;;;;;;;;;;;;;;;;;AEnBO;AACc;AACU;AACvB;AAC6B;AAEhD,MAAMvG,WAAW,GAAkBA,CACxC4G,IAA4B,EAC5BC,KAA0B,KACxB;EACF,MAAMC,WAAW,GAAGN,qDAAM,CAACG,+DAAW,CAAC;EACvC,MAAM/D,MAAM,GAAG4D,qDAAM,CAACpC,mDAAM,CAAC;EAE7B,OAAO0C,WAAW,CAACC,YAAY,EAAE,CAACxD,IAAI,CACpC/B,mDAAG,CAAEwF,QAAQ,IAAI;IACf;IACA,IAAIA,QAAQ,CAACC,MAAM,EAAE;MACnBrE,MAAM,CAACe,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;MAC1B,OAAO,KAAK;;IAGd;IACA,OAAO,IAAI;EACb,CAAC,CAAC,EACF8C,0DAAU,CAAC,MAAK;IACd;IACA,OAAOC,wCAAE,CAAC,IAAI,CAAC;EACjB,CAAC,CAAC,CACH;AACH,CAAC","sources":["./src/app/auth/auth-routes.ts","./src/app/auth/auth.component.ts","./src/app/auth/auth.component.html","./src/app/guards/no-auth.guard.ts"],"sourcesContent":["import { VexRoutes } from '@vex/interfaces/vex-route.interface';\nimport { noAuthGuard } from '../guards/no-auth.guard';\nimport { settingsResolver } from '../services/SettingsResolver';\nimport { AuthComponent } from './auth.component';\n\nconst authRoute: VexRoutes = [\n  {\n    path: '',\n    component: AuthComponent,\n    canActivate: [noAuthGuard],\n    resolve: {\n      settingsData: settingsResolver\n    },\n    children: [\n      {\n        path: '',\n        redirectTo: 'login',\n        pathMatch: 'full'\n      },\n      {\n        path: 'login',\n        loadComponent: () =>\n          import('./login/login.component').then((m) => m.LoginComponent)\n      },\n      {\n        path: 'register',\n        loadComponent: () =>\n          import('./register/register.component').then((m) => m.RegisterComponent)\n      },\n      {\n        path: 'forgot-password',\n        loadComponent: () =>\n          import('./forgot-password/forgot-password.component').then(\n            (m) => m.ForgotPasswordComponent\n          )\n      },\n      {\n        path: 'reset-password',\n        loadComponent: () =>\n          import('./reset-password/reset-password.component').then(\n            (m) => m.ResetPasswordComponent\n          )\n      },\n      {\n        path: 'email/verify/:id/:hash/:uuid',\n        loadComponent: () =>\n          import('./email-verify/email-verify.component').then(\n            (m) => m.EmailVerifyComponent\n          )\n      },\n      {\n        path: 'not-found-auth',\n        loadComponent: () =>\n          import('./errors/error-404/error-404.component').then(\n            (m) => m.Error404Component\n          )\n      },\n      {\n        path: 'link-expired',\n        loadComponent: () =>\n          import('./email-not-verify-expiry/email-not-verify-expiry.component').then(\n            (m) => m.EmailNotVerifyExpiryComponent\n          )\n      }\n    ]\n  }\n];\n\nexport default authRoute;\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\r\nimport { ActivatedRoute, Router, RouterOutlet } from '@angular/router';\r\nimport { CommonModule } from '@angular/common';\r\nimport { map, Observable } from 'rxjs';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { VexConfigService } from '@vex/config/vex-config.service';\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { ChangeLanguagueComponent } from '../shared/change-languague/change-languague.component';\r\nimport { CdkTableModule } from \"@angular/cdk/table\";\r\n\r\n@Component({\r\n  selector: 'vex-auth',\r\n  standalone: true,\r\n  templateUrl: './auth.component.html',\r\n  styleUrls: ['./auth.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n  imports: [\r\n    CommonModule,\r\n    RouterOutlet,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    SharedModule,\r\n    ChangeLanguagueComponent,\r\n    CdkTableModule\r\n  ]\r\n})\r\nexport class AuthComponent implements OnInit {\r\n  readonly title$: Observable<string>;\r\n  readonly imageUrl$: Observable<string | File | null>;\r\n  isAdminLogin: boolean = false;\r\n  redirectUrl: string = '/login';\r\n\r\n  constructor(\r\n    private readonly router: Router,\r\n    private readonly configService: VexConfigService\r\n  ) {\r\n    this.title$ = this.configService.select((config) => config.sidenav.title);\r\n    this.imageUrl$ = this.configService.config$.pipe(\r\n      map((config) => config.sidenav.imageUrl)\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getAdminAuthority();\r\n  }\r\n\r\n  register(): void {\r\n    this.router.navigate(['/register']).then(() => {\r\n      window.location.reload();\r\n    });\r\n  }\r\n\r\n  login(): void {\r\n    this.router.navigate([this.redirectUrl]);\r\n  }\r\n\r\n  getAdminAuthority(): void {\r\n    // Vérifier si c'est un login admin via les données de la route\r\n    this.isAdminLogin = this.router.url.includes('/admin/login');\r\n    this.isAdminLogin = this.isAdminLogin ?? false;\r\n    this.redirectUrl = this.isAdminLogin ? '/admin/login' : this.redirectUrl;\r\n  }\r\n}\r\n","<div\r\n  class=\"toolbar text-default w-full px-2 sm:px-4 md:px-6 flex flex-col sm:flex-row items-center justify-between py-2 gap-2\">\r\n  <!-- Logo et titre - Responsive et centré sur mobile -->\r\n  <div\r\n    class=\"sidenav-toolbar flex items-center cursor-pointer w-full sm:w-auto justify-center sm:justify-start mb-2 sm:mb-0\"\r\n    (click)=\"login()\">\r\n    <a class=\"flex items-center\">\r\n      <img alt=\"Logo\" class=\"w-6 sm:w-8 select-none\" [src]=\"imageUrl$ | async\" />\r\n      <h1 class=\"text-xl sm:text-2xl font-bold tracking-wide ltr:pl-2 sm:ltr:pl-4 rtl:pr-2 sm:rtl:pr-4 m-0 select-none\">\r\n        {{ title$ | async }}\r\n      </h1>\r\n    </a>\r\n  </div>\r\n\r\n  <!-- Conteneur pour les boutons et le sélecteur de langue -->\r\n  <div class=\"flex flex-col sm:flex-row items-center gap-2 sm:gap-4 w-full sm:w-auto\">\r\n\r\n  </div>\r\n  <div class=\"flex items-end justify-end pt-4\">\r\n    <vex-change-languague></vex-change-languague>\r\n    <button (click)=\"login()\" class=\"ltr:ml-1 rtl:mr-1 flex-none sm:hidden bg-white text-primary-600\" mat-mini-fab\r\n      matTooltip=\"Add Contact\" type=\"button\">\r\n      <mat-icon svgIcon=\"mat:lock\"></mat-icon>\r\n    </button>\r\n\r\n    <button (click)=\"login()\" class=\"ltr:ml-4 rtl:mr-4 flex-none hidden sm:inline-block hover:border-primary-600\" color=\"primary\" mat-stroked-button\r\n      type=\"button\">\r\n      <mat-icon class=\"ltr:mr-2 rtl:ml-2 ltr:-ml-1 rtl:-mr-1 icon-sm\" svgIcon=\"mat:lock\"></mat-icon>\r\n      <span rxTranslate=\"auth.signin.title\">Log In</span>\r\n    </button>\r\n\r\n    <button *ngIf=\"!isAdminLogin\" (click)=\"register()\" class=\"ltr:ml-4 rtl:mr-4 flex-none hidden sm:inline-block\" color=\"primary\"\r\n      mat-flat-button type=\"button\">\r\n      <mat-icon class=\"ltr:mr-2 rtl:ml-2 ltr:-ml-1 rtl:-mr-1 icon-sm\" svgIcon=\"mat:person_add\"></mat-icon>\r\n      <span class=\"text-white\" rxTranslate=\"auth.signup.title\">Sign Up</span>\r\n    </button>\r\n\r\n  </div>\r\n</div>\r\n\r\n<router-outlet></router-outlet>","import {\r\n  CanActivateFn,\r\n  ActivatedRouteSnapshot,\r\n  RouterStateSnapshot,\r\n  Router\r\n} from '@angular/router';\r\nimport { inject } from '@angular/core';\r\nimport { map, catchError } from 'rxjs/operators';\r\nimport { of } from 'rxjs';\r\nimport { AuthService } from '../services/auth-service';\r\n\r\nexport const noAuthGuard: CanActivateFn = (\r\n  next: ActivatedRouteSnapshot,\r\n  state: RouterStateSnapshot\r\n) => {\r\n  const authService = inject(AuthService);\r\n  const router = inject(Router);\r\n\r\n  return authService.authenticate().pipe(\r\n    map((response) => {\r\n      // Si l'utilisateur est déjà authentifié, rediriger vers la page d'accueil\r\n      if (response.status) {\r\n        router.navigate(['index']);\r\n        return false;\r\n      }\r\n\r\n      // Autoriser l'accès à la route pour les utilisateurs non authentifiés\r\n      return true;\r\n    }),\r\n    catchError(() => {\r\n      // En cas d'erreur, autoriser l'accès (utilisateur non authentifié)\r\n      return of(true);\r\n    })\r\n  );\r\n};"],"names":["noAuthGuard","settingsResolver","AuthComponent","authRoute","path","component","canActivate","resolve","settingsData","children","redirectTo","pathMatch","loadComponent","then","m","LoginComponent","RegisterComponent","ForgotPasswordComponent","ResetPasswordComponent","EmailVerifyComponent","Error404Component","EmailNotVerifyExpiryComponent","RouterOutlet","CommonModule","map","MatButtonModule","MatIconModule","SharedModule","ChangeLanguagueComponent","CdkTableModule","i0","ɵɵelementStart","ɵɵlistener","AuthComponent_button_17_Template_button_click_0_listener","ɵɵrestoreView","_r2","ctx_r1","ɵɵnextContext","ɵɵresetView","register","ɵɵelement","ɵɵtext","ɵɵelementEnd","constructor","router","configService","isAdminLogin","redirectUrl","title$","select","config","sidenav","title","imageUrl$","config$","pipe","imageUrl","ngOnInit","getAdminAuthority","navigate","window","location","reload","login","url","includes","ɵɵdirectiveInject","i1","Router","i2","VexConfigService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","AuthComponent_Template","rf","ctx","AuthComponent_Template_div_click_1_listener","AuthComponent_Template_button_click_11_listener","AuthComponent_Template_button_click_13_listener","ɵɵtemplate","AuthComponent_button_17_Template","ɵɵadvance","ɵɵproperty","ɵɵpipeBind1","ɵɵsanitizeUrl","ɵɵtextInterpolate1","i3","NgIf","AsyncPipe","i4","MatIcon","i5","MatButton","MatMiniFabButton","i6","default","styles","encapsulation","inject","catchError","of","AuthService","next","state","authService","authenticate","response","status"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}