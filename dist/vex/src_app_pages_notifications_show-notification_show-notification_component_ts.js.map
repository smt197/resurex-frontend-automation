{"version":3,"file":"src_app_pages_notifications_show-notification_show-notification_component_ts.js","mappings":"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","sources":["./src/app/pages/notifications/show-notification/show-notification.component.ts","./src/app/pages/notifications/show-notification/show-notification.component.html","./node_modules/rxjs/dist/esm/internal/operators/timeout.js"],"sourcesContent":["import { Component, OnInit, OnDestroy, ChangeDetectorRef } from '@angular/core';\r\nimport { Router, NavigationEnd, Event as RouterEvent } from '@angular/router';\r\nimport { ShowCardInformation } from 'src/app/interfaces/ShowCardInformation';\r\nimport { FormlyFieldConfig } from '@ngx-formly/core';\r\nimport { Subscription, combineLatest, of, Subject } from 'rxjs';\r\nimport { switchMap, take, filter, startWith, takeUntil, timeout, catchError } from 'rxjs/operators';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ShowDynamicCardComponent } from '../../show-dynamic-card/show-dynamic-card.component'; // Ajustez le chemin\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { getUserFormlyFields } from 'src/app/models/user.model'; // Ajustez le chemin\r\nimport { TranslateService, LangChangeEvent } from '@ngx-translate/core';\r\nimport { getSettingFormlyFields } from 'src/app/interfaces/setting'; // Ajustez le chemin\r\n\r\n@Component({\r\n  selector: 'app-show-notification',\r\n  templateUrl: './show-notification.component.html',\r\n  styleUrls: ['./show-notification.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    CommonModule,\r\n    ShowDynamicCardComponent,\r\n    MatProgressSpinnerModule,\r\n    MatIconModule,\r\n    MatButtonModule\r\n  ]\r\n})\r\nexport class ShowNotificationComponent implements OnInit, OnDestroy {\r\n  notificationCardData: ShowCardInformation[] | null = null;\r\n  isLoading: boolean = true;\r\n  errorMessage: string | null = null;\r\n\r\n  private destroy$ = new Subject<void>();\r\n  private currentModelData: any = null;\r\n  private currentEntityType: string | null = null;\r\n  private translationProcessingSubscription: Subscription | null = null;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private cdRef: ChangeDetectorRef,\r\n    private translate: TranslateService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.router.events.pipe(\r\n      filter((event: RouterEvent): event is NavigationEnd => event instanceof NavigationEnd),\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(() => {\r\n      this.loadDataForCurrentNavigation();\r\n    });\r\n\r\n    // Déclencher pour la navigation initiale\r\n    setTimeout(() => {\r\n        this.loadDataForCurrentNavigation();\r\n    }, 0);\r\n  }\r\n\r\n  private loadDataForCurrentNavigation(): void {\r\n    if (this.translationProcessingSubscription && !this.translationProcessingSubscription.closed) {\r\n        this.translationProcessingSubscription.unsubscribe();\r\n    }\r\n\r\n    this.isLoading = true;\r\n    this.notificationCardData = null;\r\n    this.errorMessage = null;\r\n    this.cdRef.detectChanges();\r\n\r\n    const navigation = this.router.getCurrentNavigation();\r\n    if (history.state && (history.state.modelTypeData !== undefined || history.state.modelData !== undefined)) {\r\n      this.currentModelData = history.state.modelTypeData || history.state.modelData;\r\n      this.currentEntityType = history.state.entityType;\r\n    } else if (navigation?.extras?.state && (navigation.extras.state['modelData'] !== undefined || navigation.extras.state['modelTypeData'] !== undefined)) {\r\n      this.currentModelData = navigation.extras.state['modelData'] || navigation.extras.state['modelTypeData'];\r\n      this.currentEntityType = navigation.extras.state['entityType'];\r\n    } else {\r\n      this.currentModelData = null;\r\n      this.currentEntityType = null;\r\n    }\r\n\r\n    if (!this.currentModelData) {\r\n      this.showError(\"Données de notification non disponibles\");\r\n      return;\r\n    }\r\n    if (!this.currentEntityType) {\r\n      this.showError(\"Type d'entité de notification non disponible\");\r\n      return;\r\n    }\r\n\r\n    this.initTranslationsAndProcess();\r\n  }\r\n\r\n  private initTranslationsAndProcess(): void {\r\n    const currentLang = this.translate.currentLang || this.translate.defaultLang;\r\n    if (!currentLang) {\r\n        this.showError(\"Erreur de configuration de la langue.\");\r\n        return;\r\n    }\r\n\r\n    const langAndTranslationsReady$ = combineLatest([\r\n      this.translate.getTranslation(currentLang).pipe(\r\n        take(1),\r\n        catchError(() => {\r\n          this.showError(`Erreur chargement traductions initiales (${currentLang})`);\r\n          return of(null); // Permet à combineLatest de continuer, mais sera filtré\r\n        }),\r\n        filter(translations => !!translations)\r\n      ),\r\n      this.translate.onLangChange.pipe(\r\n        startWith(null as unknown as LangChangeEvent),\r\n        switchMap((event: LangChangeEvent | null) => {\r\n          const langToLoad = event ? event.lang : currentLang;\r\n          return this.translate.getTranslation(langToLoad).pipe(\r\n            catchError(() => {\r\n              this.showError(`Erreur chargement traductions (${langToLoad})`);\r\n              return of(null);\r\n            }),\r\n            filter(translations => !!translations)\r\n          );\r\n        })\r\n      )\r\n    ]).pipe(\r\n      take(1), // Se complète après la première émission valide des deux sources\r\n      timeout(10000),\r\n      catchError(() => {\r\n          this.showError(\"Timeout lors du chargement des traductions ou des données.\");\r\n          return of(null); // Pour que le subscribe soit atteint\r\n      })\r\n    );\r\n\r\n    this.translationProcessingSubscription = langAndTranslationsReady$\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (result) => {\r\n          if (!this.isLoading) return; // Si une erreur a déjà mis isLoading à false\r\n\r\n          if (!result || !result[0] || !result[1]) { // Si l'un des flux de traduction a émis null (erreur)\r\n              if (!this.errorMessage) { // Ne pas écraser un message d'erreur déjà défini par catchError\r\n                  this.showError(\"Problème de chargement des traductions.\");\r\n              }\r\n              return;\r\n          }\r\n\r\n          setTimeout(() => { // Pour le cycle de détection de changement\r\n              if (this.currentModelData && this.currentEntityType) {\r\n                const formlyConfig = this.getAdaptedFormlyConfig(this.currentEntityType);\r\n                if (formlyConfig) {\r\n                  this.processReceivedData(this.currentModelData, formlyConfig);\r\n                } else {\r\n                  this.showError(`Configuration Formly non trouvée pour le type: ${this.currentEntityType}`);\r\n                }\r\n              } else {\r\n                  this.showError(\"Données ou type d'entité perdus avant le traitement.\");\r\n              }\r\n          }, 0);\r\n        },\r\n        error: (err) => { // Devrait être attrapé par le catchError du pipe, mais par sécurité\r\n          this.showError(\"Erreur critique lors de la préparation des données.\");\r\n        }\r\n    });\r\n  }\r\n\r\n  private getAdaptedFormlyConfig(entityType: string): FormlyFieldConfig[] | null {\r\n    let rawFields: FormlyFieldConfig[] = [];\r\n    switch (entityType?.toLowerCase()) {\r\n      case 'user':\r\n        rawFields = getUserFormlyFields(this.translate).flatMap(f => f.fieldGroup ?? [f]);\r\n        break;\r\n      case 'setting':\r\n      case 'settings':\r\n        rawFields = getSettingFormlyFields(this.translate).flatMap(f => f.fieldGroup ?? [f]);\r\n        break;\r\n      default:\r\n        // Si le type est inconnu, on retourne null pour que processReceivedData puisse afficher une erreur\r\n        return null;\r\n    }\r\n\r\n    // Si le type est connu mais qu'il n'y a pas de champs, retourner un tableau vide est acceptable\r\n    if (rawFields.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // Adapter les champs pour l'affichage (readonly, hide, etc.)\r\n    return rawFields.map(field => ({\r\n        ...field,\r\n        props: { ...field.props, readonly: true },\r\n        expressions: {\r\n            ...field.expressions,\r\n            hide: (fld: FormlyFieldConfig) => {\r\n                const modelValue = fld.model?.[fld.key as string];\r\n                const isHiddenByDefault = typeof field.expressions?.hide === 'function'\r\n                    ? field.expressions.hide(fld)\r\n                    : field.expressions?.hide;\r\n                if (isHiddenByDefault) return true;\r\n                return (modelValue === null || modelValue === undefined || modelValue === '') &&\r\n                       (typeof modelValue !== 'boolean' && typeof modelValue !== 'number');\r\n            }\r\n        }\r\n    }));\r\n  }\r\n\r\n  private processReceivedData(modelData: any, formlyConfig: FormlyFieldConfig[]): void {\r\n    try {\r\n      this.notificationCardData = this.transformModelToCardData(modelData, formlyConfig);\r\n      this.errorMessage = null;\r\n    } catch (error) {\r\n      this.showError(\"Erreur lors de la transformation des données pour l'affichage\");\r\n      return;\r\n    }\r\n\r\n    if (!this.notificationCardData || this.notificationCardData.length === 0) {\r\n      // Géré par le template si pas d'erreur\r\n    }\r\n    \r\n    this.isLoading = false;\r\n    this.cdRef.detectChanges();\r\n  }\r\n\r\n  private showError(message: string): void {\r\n    const needsUpdate = this.isLoading || this.errorMessage !== message || this.notificationCardData !== null;\r\n    this.errorMessage = message;\r\n    this.isLoading = false;\r\n    this.notificationCardData = null;\r\n    if (needsUpdate) {\r\n        this.cdRef.detectChanges();\r\n    }\r\n  }\r\n\r\n  private transformModelToCardData(model: any, formlyFields: FormlyFieldConfig[]): ShowCardInformation[] {\r\n    let titleKey = 'NOTIFICATION_DETAIL.GENERIC_TITLE';\r\n    let descriptionKey = 'NOTIFICATION_DETAIL.GENERIC_DESCRIPTION';\r\n    let icon = 'notifications_active';\r\n\r\n    if (this.currentEntityType) {\r\n      switch (this.currentEntityType.toLowerCase()) {\r\n        case 'user':\r\n          titleKey = 'NOTIFICATION_DETAIL.USER_TITLE';\r\n          descriptionKey = 'NOTIFICATION_DETAIL.USER_DESCRIPTION';\r\n          icon = 'account_circle';\r\n          break;\r\n        case 'setting':\r\n        case 'settings':\r\n          titleKey = 'NOTIFICATION_DETAIL.SETTINGS_TITLE';\r\n          descriptionKey = 'NOTIFICATION_DETAIL.SETTINGS_DESCRIPTION';\r\n          icon = 'settings';\r\n          break;\r\n      }\r\n    }\r\n\r\n    return [{\r\n      title: this.translate.instant(titleKey),\r\n      description: this.translate.instant(descriptionKey),\r\n      icon: icon,\r\n      form: formlyFields,\r\n      model: { ...model },\r\n      isExpanded: true,\r\n      editing: false,\r\n      type: `${this.currentEntityType || 'unknown'}NotificationDetailView`,\r\n      isLoading: false,\r\n    }];\r\n  }\r\n\r\n  goBack(): void {\r\n    this.router.navigate(['/index/notifications']);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n}","<div class=\"page-container p-4 md:p-6\"> <!-- Ajoutez vos classes de layout VEX si besoin -->\r\n  <div class=\"flex items-center mb-6\">\r\n     <button mat-icon-button (click)=\"goBack()\" aria-label=\"Retour à la liste des notifications\" class=\"mr-2\">\r\n         <mat-icon>arrow_back</mat-icon>\r\n     </button>\r\n     <!-- Changement du titre si vous le souhaitez pour correspondre au contenu -->\r\n     <h1 class=\"text-2xl font-semibold\">Autres Notifications</h1>\r\n  </div>\r\n\r\n  <!-- SECTION POUR LE CHARGEMENT -->\r\n  <div *ngIf=\"isLoading\" class=\"flex justify-center items-center py-10\">\r\n    <mat-spinner diameter=\"50\"></mat-spinner>\r\n    <p class=\"ml-4\">Chargement des détails...</p>\r\n  </div>\r\n\r\n  <!-- SECTION POUR LES ERREURS (affichée si !isLoading ET errorMessage existe) -->\r\n  <div *ngIf=\"errorMessage && !isLoading\" class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\r\n    <strong class=\"font-bold\">Erreur !</strong>\r\n    <span class=\"block sm:inline\">{{ errorMessage }}</span>\r\n  </div>\r\n\r\n  <!-- SECTION POUR LES DONNÉES (affichée si !isLoading ET PAS d'errorMessage ET données existent) -->\r\n  <div *ngIf=\"notificationCardData && notificationCardData.length > 0 && !isLoading && !errorMessage\">\r\n    <vex-show-dynamic-card\r\n      [data]=\"notificationCardData\"\r\n      [showEditButton]=\"false\">\r\n      <!-- Vous pourriez vouloir ajouter un titre au-dessus ou un header spécifique ici -->\r\n    </vex-show-dynamic-card>\r\n  </div>\r\n\r\n  <!-- SECTION POUR AUCUNE DONNÉE (affichée si !isLoading ET PAS d'errorMessage ET PAS de données) -->\r\n  <div *ngIf=\"!notificationCardData && !isLoading && !errorMessage\" class=\"text-center py-10\">\r\n     <p>Aucun détail de notification à afficher.</p>\r\n  </div>\r\n</div>","import { asyncScheduler } from '../scheduler/async';\nimport { isValidDate } from '../util/isDate';\nimport { operate } from '../util/lift';\nimport { innerFrom } from '../observable/innerFrom';\nimport { createErrorClass } from '../util/createErrorClass';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { executeSchedule } from '../util/executeSchedule';\nexport const TimeoutError = createErrorClass((_super) => function TimeoutErrorImpl(info = null) {\n    _super(this);\n    this.message = 'Timeout has occurred';\n    this.name = 'TimeoutError';\n    this.info = info;\n});\nexport function timeout(config, schedulerArg) {\n    const { first, each, with: _with = timeoutErrorFactory, scheduler = schedulerArg !== null && schedulerArg !== void 0 ? schedulerArg : asyncScheduler, meta = null, } = (isValidDate(config) ? { first: config } : typeof config === 'number' ? { each: config } : config);\n    if (first == null && each == null) {\n        throw new TypeError('No timeout provided.');\n    }\n    return operate((source, subscriber) => {\n        let originalSourceSubscription;\n        let timerSubscription;\n        let lastValue = null;\n        let seen = 0;\n        const startTimer = (delay) => {\n            timerSubscription = executeSchedule(subscriber, scheduler, () => {\n                try {\n                    originalSourceSubscription.unsubscribe();\n                    innerFrom(_with({\n                        meta,\n                        lastValue,\n                        seen,\n                    })).subscribe(subscriber);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                }\n            }, delay);\n        };\n        originalSourceSubscription = source.subscribe(createOperatorSubscriber(subscriber, (value) => {\n            timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n            seen++;\n            subscriber.next((lastValue = value));\n            each > 0 && startTimer(each);\n        }, undefined, undefined, () => {\n            if (!(timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.closed)) {\n                timerSubscription === null || timerSubscription === void 0 ? void 0 : timerSubscription.unsubscribe();\n            }\n            lastValue = null;\n        }));\n        !seen && startTimer(first != null ? (typeof first === 'number' ? first : +first - scheduler.now()) : each);\n    });\n}\nfunction timeoutErrorFactory(info) {\n    throw new TimeoutError(info);\n}\n"],"names":["NavigationEnd","combineLatest","of","Subject","switchMap","take","filter","startWith","takeUntil","timeout","catchError","CommonModule","ShowDynamicCardComponent","MatProgressSpinnerModule","MatIconModule","MatButtonModule","getUserFormlyFields","getSettingFormlyFields","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r1","errorMessage","ɵɵproperty","ctx_r2","notificationCardData","ShowNotificationComponent","constructor","router","cdRef","translate","isLoading","destroy$","currentModelData","currentEntityType","translationProcessingSubscription","ngOnInit","events","pipe","event","subscribe","loadDataForCurrentNavigation","setTimeout","closed","unsubscribe","detectChanges","navigation","getCurrentNavigation","history","state","modelTypeData","undefined","modelData","entityType","extras","showError","initTranslationsAndProcess","currentLang","defaultLang","langAndTranslationsReady$","getTranslation","translations","onLangChange","langToLoad","lang","next","result","formlyConfig","getAdaptedFormlyConfig","processReceivedData","error","err","rawFields","toLowerCase","flatMap","f","fieldGroup","length","map","field","props","readonly","expressions","hide","fld","modelValue","model","key","isHiddenByDefault","transformModelToCardData","message","needsUpdate","formlyFields","titleKey","descriptionKey","icon","title","instant","description","form","isExpanded","editing","type","goBack","navigate","ngOnDestroy","complete","ɵɵdirectiveInject","i1","Router","ChangeDetectorRef","i2","TranslateService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","ShowNotificationComponent_Template","rf","ctx","ɵɵlistener","ShowNotificationComponent_Template_button_click_2_listener","ɵɵtemplate","ShowNotificationComponent_div_7_Template","ShowNotificationComponent_div_8_Template","ShowNotificationComponent_div_9_Template","ShowNotificationComponent_div_10_Template","i3","NgIf","i4","MatProgressSpinner","i5","MatIcon","i6","MatIconButton","styles","asyncScheduler","isValidDate","operate","innerFrom","createErrorClass","createOperatorSubscriber","executeSchedule","TimeoutError","_super","TimeoutErrorImpl","info","name","config","schedulerArg","first","each","with","_with","timeoutErrorFactory","scheduler","meta","TypeError","source","subscriber","originalSourceSubscription","timerSubscription","lastValue","seen","startTimer","delay","value","now"],"sourceRoot":"webpack:///","x_google_ignoreList":[2]}