{"version":3,"file":"common.js","mappings":"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","sources":["./src/@vex/components/vex-secondary-toolbar/vex-secondary-toolbar.component.ts","./src/app/pages/dashboard/dashboard-analytics/dashboard.service.ts","./src/app/pages/document/document.service.ts","./src/app/pages/ui/confirm-dialog-component/confirm-dialog-component.component.ts","./src/app/pages/ui/confirm-dialog-component/confirm-dialog-component.component.html","./src/app/services/FormUtilsService.ts","./src/app/services/form-data-builder.service.ts"],"sourcesContent":["import { Component, Input } from '@angular/core';\r\nimport { VexConfigService } from '../../config/vex-config.service';\r\nimport { map } from 'rxjs/operators';\r\nimport { Observable } from 'rxjs';\r\nimport { AsyncPipe, NgClass, NgIf } from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'vex-secondary-toolbar',\r\n  template: `\r\n    <div class=\"secondary-toolbar-placeholder\">&nbsp;</div>\r\n\r\n    <div\r\n      [ngClass]=\"{ fixed: fixed$ | async, 'w-full': !(fixed$ | async) }\"\r\n      class=\"secondary-toolbar py-1 z-40 border-t flex\">\r\n      <div\r\n        class=\"px-6 flex items-center flex-auto\"\r\n        [class.container]=\"isVerticalLayout$ | async\">\r\n        <h1\r\n          *ngIf=\"current\"\r\n          class=\"subheading-2 font-medium m-0 ltr:pr-3 rtl:pl-3 ltr:border-r rtl:border-l ltr:mr-3 rtl:ml-3 flex-none\">\r\n          {{ current }}\r\n        </h1>\r\n\r\n        <ng-content></ng-content>\r\n      </div>\r\n    </div>\r\n  `,\r\n  styleUrls: ['./vex-secondary-toolbar.component.scss'],\r\n  standalone: true,\r\n  imports: [NgClass, NgIf, AsyncPipe]\r\n})\r\nexport class VexSecondaryToolbarComponent {\r\n  @Input() current?: string;\r\n\r\n  fixed$ = this.configService.config$.pipe(\r\n    map((config) => config.toolbar.fixed)\r\n  );\r\n\r\n  isVerticalLayout$: Observable<boolean> = this.configService\r\n    .select((config) => config.layout)\r\n    .pipe(map((layout) => layout === 'vertical'));\r\n\r\n  constructor(private readonly configService: VexConfigService) {}\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { map, Observable } from 'rxjs';\r\nimport { ResponseGlobalServer } from 'src/app/interfaces/Response-globalServer';\r\nimport { UserStatsWithHistory } from 'src/app/interfaces/UserStats';\r\nimport { environment } from 'src/environments/environment';\r\n\r\nexport interface CountResponse {\r\n  count: number;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root' // The service is provided in the root injector (app-wide singleton)\r\n})\r\nexport class DashboardService {\r\n  private apiUrl = environment.apiUrl; // Base API URL from environment configuration\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  /**\r\n   * Fetches the list of users from the server.\r\n   * @returns An Observable containing the response from the server.\r\n   */\r\n  getUserStats(): Observable<UserStatsWithHistory> {\r\n    // Changer le type de retour\r\n    return this.http.get<UserStatsWithHistory>(`${this.apiUrl}/users/stats`);\r\n  }\r\n  getAllLogs(\r\n    page: number = 1,\r\n    perPage: number = 5,\r\n    search: string = '',\r\n    sortBy: string = 'created_at',\r\n    sortOrder: 'asc' | 'desc' = 'desc',\r\n    dateDebut?: string,\r\n    dateFin?: string\r\n  ): Observable<ResponseGlobalServer> {\r\n    const params = new URLSearchParams({\r\n      page: page.toString(),\r\n      per_page: perPage.toString(),\r\n      search,\r\n      sort_by: sortBy,\r\n      sort_order: sortOrder\r\n    });\r\n    if (dateDebut) params.append('date_debut', dateDebut);\r\n    if (dateFin) params.append('date_fin', dateFin);\r\n\r\n    return this.http.get<ResponseGlobalServer>(\r\n      `${this.apiUrl}/activity-logs?${params.toString()}`\r\n    );\r\n  }\r\n\r\n  getRolesCount(): Observable<CountResponse> {\r\n    return this.http.get<CountResponse>(`${this.apiUrl}/roles/count`);\r\n  }\r\n\r\n  getPermissionsCount(): Observable<CountResponse> {\r\n    return this.http.get<CountResponse>(`${this.apiUrl}/permissions/count`);\r\n  }\r\n\r\n  // AJOUT : Méthode pour obtenir le nombre total de rôles\r\n  // getRolesCount(): Observable<number> {\r\n  //   return this.http\r\n  //     .get<{ count: number }>(`${this.apiUrl}/roles/count`)\r\n  //     .pipe(map((response) => response.count));\r\n  // }\r\n\r\n  // // AJOUT : Méthode pour obtenir le nombre total de permissions\r\n  // getPermissionsCount(): Observable<number> {\r\n  //   return this.http\r\n  //     .get<{ count: number }>(`${this.apiUrl}/permissions/count`)\r\n  //     .pipe(map((response) => response.count));\r\n  // }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Subject } from 'rxjs';\r\nimport { Document } from 'src/app/interfaces/Document';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DocumentService {\r\n  private activeJobsCountSubject = new BehaviorSubject<number>(0);\r\n  public activeJobsCount$ = this.activeJobsCountSubject.asObservable();\r\n\r\n  private jobFinishedSubject = new Subject<void>();\r\n  public jobFinished$ = this.jobFinishedSubject.asObservable();\r\n\r\n  private jobCreatedSubject = new Subject<void>();\r\n  public jobCreated$ = this.jobCreatedSubject.asObservable();\r\n\r\n  private documentCreatedSubject = new Subject<Document>();\r\n  public documentCreated$ = this.documentCreatedSubject.asObservable();\r\n\r\n  constructor() {}\r\n\r\n  updateActiveJobsCount(count: number): void {\r\n    this.activeJobsCountSubject.next(count);\r\n  }\r\n  notifyJobFinished(): void {\r\n    this.jobFinishedSubject.next();\r\n  }\r\n  notifyJobCreated(): void {\r\n    this.jobCreatedSubject.next();\r\n  }\r\n  notifyDocumentCreated(document: Document): void {\r\n    this.documentCreatedSubject.next(document);\r\n  }\r\n}\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MAT_DIALOG_DATA, MatDialogRef, MatDialogModule } from '@angular/material/dialog';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDividerModule } from '@angular/material/divider';\r\nimport { MatIconModule } from '@angular/material/icon';\r\n\r\n@Component({\r\n  selector: 'vex-confirm-dialog',\r\n  standalone: true,\r\n  imports: [\r\n    MatDialogModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatDividerModule\r\n  ],\r\n  templateUrl: './confirm-dialog-component.component.html',\r\n  styleUrl: './confirm-dialog-component.component.scss'\r\n})\r\nexport class ConfirmDialogComponent {\r\n  constructor(\r\n    public dialogRef: MatDialogRef<ConfirmDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { message: string }\r\n  ) {}\r\n\r\n  onConfirm(): void {\r\n    this.dialogRef.close(true);\r\n  }\r\n\r\n  onCancel(): void {\r\n    this.dialogRef.close(false);\r\n  }\r\n}","<div class=\"dialog-container bg-white dark:bg-gray-800 rounded-xl shadow-2xl overflow-hidden max-w-md w-full\">\r\n  <!-- Header with icon and title -->\r\n  <div class=\"dialog-header p-6 flex items-center gap-4 border-b border-gray-200 dark:border-gray-700\">\r\n    <!-- Vous pouvez changer l'icône en fonction du type de confirmation -->\r\n    <div class=\"icon-wrapper bg-primary-500/10 dark:bg-primary-500/20 text-primary-600 dark:text-primary-400 rounded-full p-3 flex items-center justify-center\">\r\n      <!-- Suggestion: utiliser une icône plus générique pour \"confirmation\" ou spécifique à l'action -->\r\n      <!-- 'lock_reset' est très spécifique au changement de mot de passe. -->\r\n      <!-- Pour une confirmation générique, peut-être 'help_outline' ou 'check_circle_outline' si c'est positif -->\r\n      <mat-icon class=\"text-2xl\">help_outline</mat-icon>\r\n      <!-- J'ai ajouté data.icon pour pouvoir passer une icône dynamiquement -->\r\n    </div>\r\n    <h2 mat-dialog-title class=\"headline m-0 text-xl md:text-2xl font-semibold text-gray-800 dark:text-gray-100\">\r\n      Confirmation\r\n      <!-- J'ai ajouté data.title pour un titre dynamique -->\r\n    </h2>\r\n  </div>\r\n\r\n  <!-- Content -->\r\n  <mat-dialog-content class=\"dialog-content p-6 text-gray-700 dark:text-gray-300\">\r\n    <p class=\"text-base md:text-lg leading-relaxed\">\r\n      <!-- Utiliser ngNonBindable si data.message peut contenir du HTML que vous NE VOULEZ PAS interpréter -->\r\n      <!-- Sinon, si c'est juste du texte, c'est bon. Pour la sécurité, si le message vient d'une source non fiable, nettoyez-le. -->\r\n      {{ data.message || 'Are you sure you want to proceed with this action?' }}\r\n    </p>\r\n    <!-- Si vous avez des détails supplémentaires, vous pouvez les ajouter ici -->\r\n    <!-- Exemple:\r\n    <ul *ngIf=\"data.details\" class=\"list-disc list-inside mt-4 space-y-1 text-sm\">\r\n      <li *ngFor=\"let detail of data.details\">{{ detail }}</li>\r\n    </ul>\r\n    -->\r\n  </mat-dialog-content>\r\n\r\n  <!-- Actions -->\r\n  <mat-dialog-actions align=\"end\" class=\"dialog-actions p-6 pt-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700\">\r\n    <button mat-stroked-button\r\n            class=\"px-5 py-2 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-150\"\r\n            (click)=\"onCancel()\">\r\n    Cancel \r\n    </button>\r\n    <button mat-flat-button\r\n            color=\"primary\"\r\n            class=\"px-6 py-2 rounded-md text-sm font-medium ml-3 transition-transform duration-150 hover:scale-105\"\r\n            (click)=\"onConfirm()\"\r\n            cdkFocusInitial> <!-- Pour mettre le focus sur ce bouton par défaut -->\r\n       Confirm\r\n    </button>\r\n  </mat-dialog-actions>\r\n</div>","import { Injectable } from '@angular/core';\r\nimport { FormlyFieldConfig } from '@ngx-formly/core';\r\nimport { UpdateData } from '../interfaces/User';\r\nimport { Roles } from '../interfaces/Roles';\r\nimport { Permissions } from '../interfaces/Permissions';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FormUtilsService {\r\n    // Maps pour stocker les références\r\n    private rolesMap = new Map<string, Roles>();\r\n    private permissionsMap = new Map<string, Permissions>();\r\n  \r\n    constructor() {}\r\n  \r\n    // Autres méthodes existantes du service FormUtilsService...\r\n    \r\n    /**\r\n     * Recherche un champ dans la configuration Formly par sa clé\r\n     */\r\n    findKeySelectField(\r\n      fields: FormlyFieldConfig[],\r\n      key: string\r\n    ): FormlyFieldConfig | null {\r\n      for (const field of fields) {\r\n        if (field.key === key) {\r\n          return field;\r\n        }\r\n  \r\n        if (field.fieldGroup) {\r\n          for (const groupField of field.fieldGroup) {\r\n            if (groupField.key === key) {\r\n              return groupField;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return null;\r\n    }\r\n  \r\n    /**\r\n     * Configure les champs select pour les rôles et permissions\r\n     */\r\n    configureSelectFields(fields: FormlyFieldConfig[], data: any): void {\r\n      const selectKeys = ['roles', 'permissions'];\r\n    \r\n      selectKeys.forEach((key) => {\r\n        const field = this.findKeySelectField(fields, key);\r\n    \r\n        if (field && field.props) {\r\n          const values = data[key];\r\n    \r\n          if (Array.isArray(values)) {\r\n            // Stocker les rôles/permissions par nom pour un accès facile\r\n            if (key === 'roles') {\r\n              this.rolesMap.clear(); // Nettoyer avant d'ajouter\r\n              values.forEach((role: Roles) => {\r\n                if (role && role.name) {\r\n                  this.rolesMap.set(role.name, role);\r\n                }\r\n              });\r\n            }\r\n            \r\n            if (key === 'permissions') {\r\n              this.permissionsMap.clear(); // Nettoyer avant d'ajouter\r\n              values.forEach((permission: Permissions) => {\r\n                if (permission && permission.name) {\r\n                  this.permissionsMap.set(permission.name, permission);\r\n                }\r\n              });\r\n            }\r\n            \r\n            // Configurer les options du select\r\n            field.props.options = values.map((item: any) => ({\r\n              label: item.display_name,\r\n              value: item // Stocker l'objet complet comme valeur\r\n            }));\r\n            \r\n            // S'assurer que c'est un select multiple\r\n            field.props['multiple'] = true;\r\n            \r\n            // Configuration pour afficher correctement les options sélectionnées\r\n            field.props['compareWith'] = (option: any, value: any) => {\r\n              return option && value && option.name === value.name;\r\n            };\r\n            \r\n            \r\n          } else {\r\n            console.error(`${key} n'est pas un tableau`);\r\n          }\r\n    \r\n          field.type = 'select';\r\n        }\r\n      });\r\n    }\r\n  \r\n    /**\r\n     * Récupère un rôle par son nom\r\n     */\r\n    getRoleByName(name: string): Roles | undefined {\r\n      return this.rolesMap.get(name);\r\n    }\r\n  \r\n    /**\r\n     * Récupère une permission par son nom\r\n     */\r\n    getPermissionByName(name: string): Permissions | undefined {\r\n      return this.permissionsMap.get(name);\r\n    }\r\n  \r\n    /**\r\n     * Récupère tous les rôles stockés\r\n     */\r\n    getAllRoles(): Roles[] {\r\n      return Array.from(this.rolesMap.values());\r\n    }\r\n  \r\n    /**\r\n     * Récupère toutes les permissions stockées\r\n     */\r\n    getAllPermissions(): Permissions[] {\r\n      return Array.from(this.permissionsMap.values());\r\n    }\r\n  \r\n    /**\r\n     * Ajoute les rôles et permissions à un FormData\r\n     */\r\n    \r\n  }","// src/app/services/form-data-builder.service.ts\r\nimport { Injectable } from '@angular/core';\r\nimport { UserCreateUpdateModel } from 'src/app/interfaces/User';\r\n\r\n/**\r\n * Service responsible for building FormData objects for various entities\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FormDataBuilderService {\r\n  /**\r\n   * Create FormData for any model (generic method)\r\n   */\r\n  createFormData(model: any): FormData {\r\n    const formData = new FormData();\r\n\r\n    for (const key in model) {\r\n      if (model.hasOwnProperty(key)) {\r\n        const value = model[key];\r\n\r\n        if (value === null || value === undefined) {\r\n          continue;\r\n        }\r\n\r\n        // Handle File or FileList\r\n        if (value instanceof File) {\r\n          formData.append(key, value);\r\n        } else if (value instanceof FileList || (Array.isArray(value) && value[0] instanceof File)) {\r\n          const files = Array.isArray(value) ? value : Array.from(value);\r\n          files.forEach((file: File) => {\r\n            formData.append(`${key}[]`, file);\r\n          });\r\n        }\r\n        // Handle Date\r\n        else if (value instanceof Date) {\r\n          const formattedDate = this.formatDateForLaravel(value);\r\n          if (formattedDate) {\r\n            formData.append(key, formattedDate);\r\n          }\r\n        }\r\n        // Handle arrays\r\n        else if (Array.isArray(value)) {\r\n          value.forEach((item) => {\r\n            if (typeof item === 'object' && item !== null) {\r\n              formData.append(`${key}[]`, JSON.stringify(item));\r\n            } else {\r\n              formData.append(`${key}[]`, item.toString());\r\n            }\r\n          });\r\n        }\r\n        // Handle booleans\r\n        else if (typeof value === 'boolean') {\r\n          formData.append(key, value ? '1' : '0');\r\n        }\r\n        // Handle objects\r\n        else if (typeof value === 'object' && value !== null) {\r\n          formData.append(key, JSON.stringify(value));\r\n        }\r\n        // Handle primitives (string, number)\r\n        else {\r\n          formData.append(key, value.toString());\r\n        }\r\n      }\r\n    }\r\n\r\n    return formData;\r\n  }\r\n\r\n  /**\r\n   * Create FormData for user creation or update\r\n   */\r\n  createUserFormData(user: UserCreateUpdateModel): FormData {\r\n    const formData = new FormData();\r\n\r\n    formData.append('first_name', user.first_name);\r\n    formData.append('last_name', user.last_name);\r\n    formData.append('email', user.email);\r\n    formData.append('phone', user.phone || '');\r\n    formData.append('is_blocked', user.is_blocked ? '1' : '0');\r\n    formData.append('otp_enabled', user.otp_enabled ? '1' : '0');\r\n\r\n    if (user.birthday) {\r\n      const formattedDate = this.formatDateForLaravel(user.birthday);\r\n      if (formattedDate) {\r\n        formData.append('birthday', formattedDate);\r\n      }\r\n    }\r\n\r\n    this.appendCountryData(formData, user.available_countries);\r\n    this.appendRolesData(formData, user.roles);\r\n    this.appendPermissionsData(formData, user.permissions);\r\n\r\n    if (user.photo instanceof File) {\r\n      formData.append('photo', user.photo);\r\n    }\r\n\r\n    return formData;\r\n  }\r\n\r\n  /**\r\n   * Append country data to FormData\r\n   */\r\n  private appendCountryData(formData: FormData, availableCountries: any): void {\r\n    if (availableCountries) {\r\n      if (Array.isArray(availableCountries) && availableCountries.length > 0) {\r\n        const country = availableCountries[0];\r\n        formData.append('country_id', country.id.toString());\r\n      } else if (typeof availableCountries === 'object' && availableCountries.id) {\r\n        formData.append('country_id', availableCountries.id.toString());\r\n      }\r\n    } else {\r\n      formData.append('country_id', '');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Append roles data to FormData\r\n   */\r\n  private appendRolesData(formData: FormData, roles: any[]): void {\r\n    if (roles && Array.isArray(roles)) {\r\n      roles.forEach((role) => {\r\n        formData.append('roles[]', role.name);\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Append permissions data to FormData\r\n   */\r\n  private appendPermissionsData(formData: FormData, permissions: any[]): void {\r\n    if (permissions && Array.isArray(permissions)) {\r\n      permissions.forEach((permission) => {\r\n        formData.append('permissions[]', permission.name);\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format date for Laravel backend (YYYY-MM-DD)\r\n   */\r\n  formatDateForLaravel(date: Date | string | null): string | null {\r\n    if (!date) return null;\r\n\r\n    // If already in correct format\r\n    if (typeof date === 'string' && /^\\d{4}-\\d{2}-\\d{2}$/.test(date)) {\r\n      return date;\r\n    }\r\n\r\n    // Convert from Date object or other string format\r\n    const jsDate = new Date(date);\r\n    if (isNaN(jsDate.getTime())) return null;\r\n\r\n    return jsDate.toISOString().split('T')[0]; // Extract YYYY-MM-DD\r\n  }\r\n}\r\n"],"names":["map","AsyncPipe","NgClass","NgIf","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","current","VexSecondaryToolbarComponent","constructor","configService","fixed$","config$","pipe","config","toolbar","fixed","isVerticalLayout$","select","layout","ɵɵdirectiveInject","i1","VexConfigService","selectors","inputs","standalone","features","ɵɵStandaloneFeature","ngContentSelectors","_c1","decls","vars","consts","template","VexSecondaryToolbarComponent_Template","rf","ctx","ɵɵtemplate","VexSecondaryToolbarComponent_h1_7_Template","ɵɵprojection","ɵɵproperty","ɵɵpureFunction2","_c0","ɵɵpipeBind1","ɵɵclassProp","styles","environment","DashboardService","http","apiUrl","getUserStats","get","getAllLogs","page","perPage","search","sortBy","sortOrder","dateDebut","dateFin","params","URLSearchParams","toString","per_page","sort_by","sort_order","append","getRolesCount","getPermissionsCount","ɵɵinject","HttpClient","factory","ɵfac","providedIn","BehaviorSubject","Subject","DocumentService","activeJobsCountSubject","activeJobsCount$","asObservable","jobFinishedSubject","jobFinished$","jobCreatedSubject","jobCreated$","documentCreatedSubject","documentCreated$","updateActiveJobsCount","count","next","notifyJobFinished","notifyJobCreated","notifyDocumentCreated","document","MAT_DIALOG_DATA","MatDialogModule","MatButtonModule","MatDividerModule","MatIconModule","ConfirmDialogComponent","dialogRef","data","onConfirm","close","onCancel","MatDialogRef","ConfirmDialogComponent_Template","ɵɵlistener","ConfirmDialogComponent_Template_button_click_11_listener","ConfirmDialogComponent_Template_button_click_13_listener","message","MatDialogTitle","MatDialogActions","MatDialogContent","i2","MatButton","i3","MatIcon","FormUtilsService","rolesMap","Map","permissionsMap","findKeySelectField","fields","key","field","fieldGroup","groupField","configureSelectFields","selectKeys","forEach","props","values","Array","isArray","clear","role","name","set","permission","options","item","label","display_name","value","option","console","error","type","getRoleByName","getPermissionByName","getAllRoles","from","getAllPermissions","FormDataBuilderService","createFormData","model","formData","FormData","hasOwnProperty","undefined","File","FileList","files","file","Date","formattedDate","formatDateForLaravel","JSON","stringify","createUserFormData","user","first_name","last_name","email","phone","is_blocked","otp_enabled","birthday","appendCountryData","available_countries","appendRolesData","roles","appendPermissionsData","permissions","photo","availableCountries","length","country","id","date","test","jsDate","isNaN","getTime","toISOString","split"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}