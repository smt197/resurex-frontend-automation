{"version":3,"file":"default-src_app_auth_components_loading-spinner_loading-spinner_component_ts-src_app_services-bb5df8.js","mappings":"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","sources":["./src/app/auth/components/loading-spinner/loading-spinner.component.ts","./src/app/auth/components/loading-spinner/loading-spinner.component.html","./src/app/services/upload-status.service.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\n\r\n@Component({\r\n  selector: 'vex-loading-spinner',\r\n  standalone: true,\r\n  imports: [\r\n   MatProgressBarModule,\r\n    MatProgressSpinnerModule,\r\n    SharedModule\r\n  ],\r\n  templateUrl: './loading-spinner.component.html',\r\n  styleUrls: ['../../auth.component.scss']\r\n})\r\nexport class LoadingSpinnerComponent {\r\n\r\n}\r\n","<div class=\"flex flex-col items-center justify-center \">\r\n    <button color=\"primary\" mat-raised-button>\r\n    <span class=\"text-lg \" rxTranslate=\"global.loading\">Please wait...</span>\r\n   \r\n</button>\r\n<mat-progress-spinner mode=\"indeterminate\" class=\"icon-2xl\" color=\"primary\" diameter=\"35\"></mat-progress-spinner>\r\n</div>","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\nexport interface UploadStatus {\n  documentId?: number;\n  aliasName?: string;\n  isUploading: boolean;\n  progress: number;\n  status: 'idle' | 'uploading' | 'completed' | 'failed';\n  jobId?: number;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UploadStatusService {\n  private uploadStatuses = new BehaviorSubject<Map<string, UploadStatus>>(\n    new Map()\n  );\n  private progressIntervals = new Map<string, any>();\n\n  private readonly UPLOAD_STORAGE_KEY = 'resurex_upload_statuses';\n\n  constructor() {\n    this.restoreUploadStatuses();\n  }\n\n  // Démarrer un upload pour un document/alias\n  startUpload(identifier: string, documentId?: number): void {\n    const currentStatuses = this.uploadStatuses.value;\n    currentStatuses.set(identifier, {\n      documentId,\n      aliasName: identifier,\n      isUploading: true,\n      progress: 0,\n      status: 'uploading'\n    });\n    this.uploadStatuses.next(new Map(currentStatuses));\n    this.saveUploadStatuses();\n\n    // Simuler une progression initiale pendant l'attente du job WebSocket\n    this.simulateInitialProgress(identifier);\n  }\n\n  private simulateInitialProgress(identifier: string): void {\n    // Nettoyer un éventuel interval existant\n    this.clearProgressInterval(identifier);\n\n    let progress = 0;\n    const interval = setInterval(() => {\n      const currentStatuses = this.uploadStatuses.value;\n      const status = currentStatuses.get(identifier);\n\n      if (!status || !status.isUploading) {\n        this.clearProgressInterval(identifier);\n        return;\n      }\n\n      // Augmenter progressivement jusqu'à 3% maximum\n      // pour indiquer que quelque chose se passe\n      progress += Math.random() * 0.5; // Progression très lente\n\n      if (progress >= 3) {\n        progress = 3;\n        this.clearProgressInterval(identifier);\n      }\n\n      status.progress = progress;\n      currentStatuses.set(identifier, status);\n      this.uploadStatuses.next(new Map(currentStatuses));\n      this.saveUploadStatuses();\n    }, 2000); // Toutes les 2 secondes\n\n    // Stocker l'interval pour pouvoir le nettoyer\n    this.progressIntervals.set(identifier, interval);\n\n    // Nettoyer l'interval après 30 secondes au cas où\n    setTimeout(() => {\n      this.clearProgressInterval(identifier);\n    }, 30000);\n  }\n\n  private clearProgressInterval(identifier: string): void {\n    const interval = this.progressIntervals.get(identifier);\n    if (interval) {\n      clearInterval(interval);\n      this.progressIntervals.delete(identifier);\n    }\n  }\n\n  // Mettre à jour le progrès\n  updateProgress(identifier: string, progress: number, jobId?: number): void {\n    const currentStatuses = this.uploadStatuses.value;\n    const existing = currentStatuses.get(identifier);\n    if (existing) {\n      // Si le nouveau progrès est supérieur au progrès simulé, on l'utilise\n      // Sinon on garde le progrès simulé pour éviter les retours en arrière\n      const newProgress = Math.max(existing.progress, progress);\n\n      existing.progress = newProgress;\n      existing.jobId = jobId;\n      currentStatuses.set(identifier, existing);\n      this.uploadStatuses.next(new Map(currentStatuses));\n      this.saveUploadStatuses();\n    }\n  }\n\n  // Terminer un upload\n  completeUpload(identifier: string): void {\n    const currentStatuses = this.uploadStatuses.value;\n    const existing = currentStatuses.get(identifier);\n    if (existing) {\n      existing.isUploading = false;\n      existing.progress = 100;\n      existing.status = 'completed';\n      currentStatuses.set(identifier, existing);\n      this.uploadStatuses.next(new Map(currentStatuses));\n      this.saveUploadStatuses();\n      // Supprimer après 3 secondes\n      setTimeout(() => {\n        this.removeUploadStatus(identifier);\n      }, 3000);\n    }\n  }\n\n  // Marquer comme échoué\n  failUpload(identifier: string): void {\n    const currentStatuses = this.uploadStatuses.value;\n    const existing = currentStatuses.get(identifier);\n    if (existing) {\n      existing.isUploading = false;\n      existing.status = 'failed';\n      currentStatuses.set(identifier, existing);\n      this.uploadStatuses.next(new Map(currentStatuses));\n      this.saveUploadStatuses();\n    }\n  }\n\n  // Supprimer un statut\n  removeUploadStatus(identifier: string): void {\n    const currentStatuses = this.uploadStatuses.value;\n    currentStatuses.delete(identifier);\n    this.uploadStatuses.next(new Map(currentStatuses));\n    this.saveUploadStatuses();\n  }\n\n  // Obtenir le statut d'un upload spécifique\n  getUploadStatus(identifier: string): Observable<UploadStatus | undefined> {\n    return new Observable((observer) => {\n      const subscription = this.uploadStatuses.subscribe((statuses) => {\n        observer.next(statuses.get(identifier));\n      });\n      return () => subscription.unsubscribe();\n    });\n  }\n\n  // Obtenir tous les statuts\n  getAllUploadStatuses(): Observable<Map<string, UploadStatus>> {\n    return this.uploadStatuses.asObservable();\n  }\n\n  // Vérifier si un upload est en cours\n  isUploadInProgress(identifier: string): boolean {\n    const status = this.uploadStatuses.value.get(identifier);\n    return status?.isUploading || false;\n  }\n\n  // Méthodes de persistance\n  private saveUploadStatuses(): void {\n    try {\n      const statusesMap = this.uploadStatuses.value;\n      const statusesArray = Array.from(statusesMap.entries()).map(\n        ([key, value]) => ({\n          key,\n          value: {\n            ...value,\n            timestamp: Date.now() // Ajouter un timestamp pour la validation\n          }\n        })\n      );\n\n      localStorage.setItem(\n        this.UPLOAD_STORAGE_KEY,\n        JSON.stringify(statusesArray)\n      );\n    } catch (error) {\n      console.error('Error saving upload statuses to localStorage:', error);\n    }\n  }\n\n  private restoreUploadStatuses(): void {\n    try {\n      const storedData = localStorage.getItem(this.UPLOAD_STORAGE_KEY);\n      if (!storedData) return;\n\n      const statusesArray = JSON.parse(storedData);\n      const restoredMap = new Map<string, UploadStatus>();\n      const now = Date.now();\n      const maxAge = 10 * 60 * 1000; // 10 minutes\n\n      statusesArray.forEach((item: any) => {\n        // Vérifier que les données ne sont pas trop anciennes\n        if (item.value.timestamp && now - item.value.timestamp < maxAge) {\n          // Supprimer le timestamp avant de restaurer\n          const { timestamp, ...uploadStatus } = item.value;\n          restoredMap.set(item.key, uploadStatus);\n        }\n      });\n\n      if (restoredMap.size > 0) {\n        this.uploadStatuses.next(restoredMap);\n\n        // Reprendre les simulations de progression si nécessaire\n        restoredMap.forEach((status, identifier) => {\n          if (status.isUploading && status.progress < 5) {\n            this.simulateInitialProgress(identifier);\n          }\n        });\n      }\n    } catch (error) {\n      console.error(\n        'Error restoring upload statuses from localStorage:',\n        error\n      );\n      this.clearUploadStorage();\n    }\n  }\n\n  private clearUploadStorage(): void {\n    try {\n      localStorage.removeItem(this.UPLOAD_STORAGE_KEY);\n    } catch (error) {\n      console.error('Error clearing upload statuses storage:', error);\n    }\n  }\n\n  // Méthode publique pour nettoyer le cache\n  public clearUploadCache(): void {\n    this.clearUploadStorage();\n    this.uploadStatuses.next(new Map());\n    // Nettoyer aussi tous les intervals\n    this.progressIntervals.forEach((interval, key) => {\n      clearInterval(interval);\n    });\n    this.progressIntervals.clear();\n  }\n}\n"],"names":["MatProgressBarModule","MatProgressSpinnerModule","SharedModule","LoadingSpinnerComponent","selectors","standalone","features","i0","ɵɵStandaloneFeature","decls","vars","consts","template","LoadingSpinnerComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","i1","MatProgressSpinner","i2","default","styles","BehaviorSubject","Observable","UploadStatusService","constructor","uploadStatuses","Map","progressIntervals","UPLOAD_STORAGE_KEY","restoreUploadStatuses","startUpload","identifier","documentId","currentStatuses","value","set","aliasName","isUploading","progress","status","next","saveUploadStatuses","simulateInitialProgress","clearProgressInterval","interval","setInterval","get","Math","random","setTimeout","clearInterval","delete","updateProgress","jobId","existing","newProgress","max","completeUpload","removeUploadStatus","failUpload","getUploadStatus","observer","subscription","subscribe","statuses","unsubscribe","getAllUploadStatuses","asObservable","isUploadInProgress","statusesMap","statusesArray","Array","from","entries","map","key","timestamp","Date","now","localStorage","setItem","JSON","stringify","error","console","storedData","getItem","parse","restoredMap","maxAge","forEach","item","uploadStatus","size","clearUploadStorage","removeItem","clearUploadCache","clear","factory","ɵfac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}