{"version":3,"file":"default-src_app_auth_email-not-verify-expiry_email-not-verify-expiry_component_ts.js","mappings":"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","sources":["./src/app/auth/components/loading-spinner/loading-spinner.component.ts","./src/app/auth/components/loading-spinner/loading-spinner.component.html","./src/app/auth/email-not-verify-expiry/email-not-verify-expiry.component.ts","./src/app/auth/email-not-verify-expiry/email-not-verify-expiry.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\n\r\n@Component({\r\n  selector: 'vex-loading-spinner',\r\n  standalone: true,\r\n  imports: [\r\n   MatProgressBarModule,\r\n    MatProgressSpinnerModule,\r\n    SharedModule\r\n  ],\r\n  templateUrl: './loading-spinner.component.html',\r\n  styleUrls: ['../../auth.component.scss']\r\n})\r\nexport class LoadingSpinnerComponent {\r\n\r\n}\r\n","<div class=\"flex flex-col items-center justify-center \">\r\n    <button color=\"primary\" mat-raised-button>\r\n    <span class=\"text-lg \" rxTranslate=\"global.loading\">Please wait...</span>\r\n   \r\n</button>\r\n<mat-progress-spinner mode=\"indeterminate\" class=\"icon-2xl\" color=\"primary\" diameter=\"35\"></mat-progress-spinner>\r\n</div>","import { ChangeDetectionStrategy, Component, inject, signal } from '@angular/core';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { NgClass, NgIf } from '@angular/common';\r\nimport { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { FormControl, FormGroup, ReactiveFormsModule, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { fadeInUp400ms } from '@vex/animations/fade-in-up.animation';\r\nimport { AuthService } from 'src/app/services/auth-service';\r\nimport { credentialsFormForgot } from 'src/app/interfaces/Credentials-form-forgot';\r\nimport { LoadingSpinnerComponent } from '../components/loading-spinner/loading-spinner.component';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@Component({\r\n  selector: 'vex-email-not-verify-expiry',\r\n  templateUrl: './email-not-verify-expiry.component.html',\r\n  styleUrls: ['../auth.component.scss', './email-not-verify-expiry.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  animations: [fadeInUp400ms],\r\n  standalone: true,\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatSnackBarModule,\r\n    MatInputModule,\r\n    MatFormFieldModule,\r\n    ReactiveFormsModule,\r\n    NgIf,\r\n    NgClass,\r\n    MatProgressSpinnerModule,\r\n    LoadingSpinnerComponent,\r\n    TranslateModule\r\n  ]\r\n})\r\nexport class EmailNotVerifyExpiryComponent {\r\n  // Component state signals\r\n  readonly isLoading = signal<boolean>(false);\r\n  readonly isSuccess = signal<boolean>(false);\r\n  readonly message = signal<string>('Your verification link has expired. Please enter your email to receive a new one.');\r\n\r\n  // Form\r\n  emailForm = new FormGroup({\r\n    email: new FormControl('', [Validators.required, Validators.email])\r\n  });\r\n\r\n  // Services\r\n  private readonly authService = inject(AuthService);\r\n  private readonly snackbar = inject(MatSnackBar);\r\n  private readonly router = inject(Router);\r\n\r\n  get emailControl(): FormControl {\r\n    return this.emailForm.get('email') as FormControl;\r\n  }\r\n\r\n  get emailError(): string {\r\n    if (this.emailControl.hasError('required')) {\r\n      return 'Email is required';\r\n    }\r\n    if (this.emailControl.hasError('email')) {\r\n      return 'Please enter a valid email address';\r\n    }\r\n    return '';\r\n  }\r\n\r\n  resendVerification(): void {\r\n    // Marquer tous les champs comme touchés pour afficher les erreurs\r\n    this.emailForm.markAllAsTouched();\r\n\r\n    if (this.emailForm.invalid) {\r\n      return;\r\n    }\r\n\r\n    this.isLoading.set(true);\r\n\r\n    const form: credentialsFormForgot = {\r\n      email: this.emailControl.value || ''\r\n    };\r\n\r\n    this.authService.ResenderVerificationEmail(form).subscribe({\r\n      next: (response) => {\r\n        console.log('Response from resendVerification:', response);\r\n        this.isLoading.set(false);\r\n        this.isSuccess.set(true);\r\n        this.message.set(response.message || 'A new verification link has been sent to your email address.');\r\n        this.showMessage(response.message || 'Verification email sent successfully!');\r\n\r\n        // Désactiver le formulaire après l'envoi réussi\r\n        this.emailForm.disable();\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.isLoading.set(false);\r\n        const errorMessage = error.error?.message || 'Failed to send verification email. Please try again.';\r\n        this.showMessage(errorMessage, true);\r\n      }\r\n    });\r\n  }\r\n\r\n  goToLogin(): void {\r\n    this.router.navigate(['/login']);\r\n  }\r\n\r\n  refresh(): void {\r\n    window.location.reload();\r\n  }\r\n\r\n  private showMessage(message: string, isError: boolean = false): void {\r\n    this.snackbar.open(message, 'Close', {\r\n      duration: isError ? 10000 : 5000,\r\n      panelClass: isError ? ['error-snackbar'] : []\r\n    });\r\n  }\r\n}\r\n","<div class=\"w-full h-full bg-pattern flex flex-col items-center justify-center\">\r\n  <div @fadeInUp class=\"card overflow-hidden w-full max-w-md\">\r\n    <div class=\"flex flex-col items-center\">\r\n      <div class=\"p-6 rounded-full bg-primary-600/10 text-primary-600 mx-auto flex items-center justify-center\">\r\n        <mat-icon class=\"icon-5xl\" [svgIcon]=\"isSuccess() ? 'mat:check' : 'mat:mail'\"></mat-icon>\r\n      </div>\r\n\r\n      <div class=\"text-center mt-4\">\r\n        <h4 class=\"title m-0\" [ngClass]=\"{ 'text-red-500': !isSuccess() }\" rxTranslate=\"form.expiry_link\">\r\n          {{ message() }}\r\n        </h4>\r\n\r\n        <div class=\"p-6 flex flex-col\">\r\n          <ng-container *ngIf=\"!isLoading(); else loadingTemplate\">\r\n\r\n            <!-- Email Input Form (only when not success) -->\r\n            <form *ngIf=\"!isSuccess()\" [formGroup]=\"emailForm\" (ngSubmit)=\"resendVerification()\" class=\"mb-4\">\r\n              <mat-form-field appearance=\"outline\" class=\"w-full\">\r\n                <mat-label>Email Address</mat-label>\r\n                <input\r\n                  matInput\r\n                  type=\"email\"\r\n                  formControlName=\"email\"\r\n                  placeholder=\"your.email@example.com\"\r\n                  autocomplete=\"email\">\r\n                <mat-icon matPrefix>mail</mat-icon>\r\n                <mat-error *ngIf=\"emailControl.hasError('required')\">\r\n                  Email is required\r\n                </mat-error>\r\n                <mat-error *ngIf=\"emailControl.hasError('email')\">\r\n                  Please enter a valid email address\r\n                </mat-error>\r\n              </mat-form-field>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                [disabled]=\"emailForm.invalid\"\r\n                color=\"primary\"\r\n                mat-raised-button\r\n                class=\"w-full\">\r\n                <span class=\"uppercase\">Resend link email verification</span>\r\n              </button>\r\n            </form>\r\n\r\n          </ng-container>\r\n\r\n          <ng-template #loadingTemplate>\r\n            <vex-loading-spinner></vex-loading-spinner>\r\n          </ng-template>\r\n\r\n          <button\r\n            *ngIf=\"isSuccess()\"\r\n            (click)=\"goToLogin()\"\r\n            color=\"primary\"\r\n            mat-raised-button>\r\n            Come back\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],"names":["MatProgressBarModule","MatProgressSpinnerModule","SharedModule","LoadingSpinnerComponent","selectors","standalone","features","i0","ɵɵStandaloneFeature","decls","vars","consts","template","LoadingSpinnerComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","i1","MatProgressSpinner","i2","default","styles","inject","signal","NgClass","NgIf","MatSnackBar","MatSnackBarModule","MatButtonModule","MatIconModule","MatInputModule","MatFormFieldModule","FormControl","FormGroup","ReactiveFormsModule","Validators","Router","fadeInUp400ms","AuthService","TranslateModule","ɵɵlistener","EmailNotVerifyExpiryComponent_ng_container_9_form_1_Template_form_ngSubmit_0_listener","ɵɵrestoreView","_r8","ctx_r7","ɵɵnextContext","ɵɵresetView","resendVerification","ɵɵtemplate","EmailNotVerifyExpiryComponent_ng_container_9_form_1_mat_error_7_Template","EmailNotVerifyExpiryComponent_ng_container_9_form_1_mat_error_8_Template","ɵɵproperty","ctx_r4","emailForm","ɵɵadvance","emailControl","hasError","invalid","ɵɵelementContainerStart","EmailNotVerifyExpiryComponent_ng_container_9_form_1_Template","ɵɵelementContainerEnd","ctx_r0","isSuccess","EmailNotVerifyExpiryComponent_button_12_Template_button_click_0_listener","_r10","ctx_r9","goToLogin","EmailNotVerifyExpiryComponent","constructor","isLoading","message","email","required","authService","snackbar","router","get","emailError","markAllAsTouched","set","form","value","ResenderVerificationEmail","subscribe","next","response","console","log","showMessage","disable","error","errorMessage","navigate","refresh","window","location","reload","isError","open","duration","panelClass","EmailNotVerifyExpiryComponent_Template","EmailNotVerifyExpiryComponent_ng_container_9_Template","EmailNotVerifyExpiryComponent_ng_template_10_Template","ɵɵtemplateRefExtractor","EmailNotVerifyExpiryComponent_button_12_Template","undefined","ɵɵpureFunction1","_c0","ɵɵtextInterpolate1","_r2","MatButton","MatIcon","i3","MatInput","i4","MatFormField","MatLabel","MatError","MatPrefix","i5","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","data","animation","changeDetection"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}